(function(B){if(typeof exports=="object"&&typeof module=="object"){module.exports=B()}else{if(typeof define=="function"&&define.amd){return define([],B)}else{this.CodeMirror=B()}}})(function(){var IL=/gecko\/\d/i.test(navigator.userAgent);var Ms=/MSIE \d/.test(navigator.userAgent);var Hs=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);var Jg=Ms||Hs;var KO=Jg&&(Ms?document.documentMode||6:Hs[1]);var GS=/WebKit\//.test(navigator.userAgent);var Gy=GS&&/Qt\/\d+\.\d+/.test(navigator.userAgent);var Jk=/Chrome\//.test(navigator.userAgent);var L1=/Opera\//.test(navigator.userAgent);var I7=/Apple Computer/.test(navigator.vendor);var Le=/KHTML\//.test(navigator.userAgent);var Lu=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent);var HQ=/PhantomJS/.test(navigator.userAgent);var KL=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent);var H0=KL||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent);var GA=KL||/Mac/.test(navigator.platform);var HY=/win/i.test(navigator.platform);var Lm=L1&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);if(Lm){Lm=Number(Lm[1])}if(Lm&&Lm>=15){L1=false;GS=true}var KJ=GA&&(Gy||L1&&(Lm==null||Lm<12.11));var Kw=IL||(Jg&&KO>=9);var Jy=false,F0=false;function HC(C,D){if(!(this instanceof HC)){return new HC(C,D)}this.options=D=D?J0(D):{};J0(IW,D,false);IC(D);var F=D.value;if(typeof F=="string"){F=new K6(F,D.mode)}this.doc=F;var A=this.display=new Iq(C,F);A.wrapper.CodeMirror=this;Lk(this);Kh(this);if(D.lineWrapping){this.display.wrapper.className+=" CodeMirror-wrap"}if(D.autofocus&&!H0){IQ(this)}this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:false,focused:false,suppressEdits:false,pasteIncoming:false,cutIncoming:false,draggingText:false,highlight:new LL()};if(Jg&&KO<11){setTimeout(G2(Gr,this,true),20)}Ix(this);F9();I2(this);this.curOp.forceUpdate=true;HR(this,F);if((D.autofocus&&!H0)||Jr()==A.input){setTimeout(G2(JE,this),20)}else{HJ(this)}for(var E in L7){if(L7.hasOwnProperty(E)){L7[E](this,D[E],GU)}}F4(this);for(var B=0;B<Hb.length;++B){Hb[B](this)}GW(this)}function Iq(C,A){var D=this;var B=D.input=Kj("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none");if(GS){B.style.width="1000px"}else{B.setAttribute("wrap","off")}if(KL){B.style.border="1px solid black"}B.setAttribute("autocorrect","off");B.setAttribute("autocapitalize","off");B.setAttribute("spellcheck","false");D.inputDiv=Kj("div",[B],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");D.scrollbarH=Kj("div",[Kj("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");D.scrollbarV=Kj("div",[Kj("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar");D.scrollbarFiller=Kj("div",null,"CodeMirror-scrollbar-filler");D.gutterFiller=Kj("div",null,"CodeMirror-gutter-filler");D.lineDiv=Kj("div",null,"CodeMirror-code");D.selectionDiv=Kj("div",null,null,"position: relative; z-index: 1");D.cursorDiv=Kj("div",null,"CodeMirror-cursors");D.measure=Kj("div",null,"CodeMirror-measure");D.lineMeasure=Kj("div",null,"CodeMirror-measure");D.lineSpace=Kj("div",[D.measure,D.lineMeasure,D.selectionDiv,D.cursorDiv,D.lineDiv],null,"position: relative; outline: none");D.mover=Kj("div",[Kj("div",[D.lineSpace],"CodeMirror-lines")],null,"position: relative");D.sizer=Kj("div",[D.mover],"CodeMirror-sizer");D.heightForcer=Kj("div",null,null,"position: absolute; height: "+IB+"px; width: 1px;");D.gutters=Kj("div",null,"CodeMirror-gutters");D.lineGutter=null;D.scroller=Kj("div",[D.sizer,D.heightForcer,D.gutters],"CodeMirror-scroll");D.scroller.setAttribute("tabIndex","-1");D.wrapper=Kj("div",[D.inputDiv,D.scrollbarH,D.scrollbarV,D.scrollbarFiller,D.gutterFiller,D.scroller],"CodeMirror");if(Jg&&KO<8){D.gutters.style.zIndex=-1;D.scroller.style.paddingRight=0}if(KL){B.style.width="0px"}if(!GS){D.scroller.draggable=true}if(Le){D.inputDiv.style.height="1px";D.inputDiv.style.position="absolute"}if(Jg&&KO<8){D.scrollbarH.style.minHeight=D.scrollbarV.style.minWidth="18px"}if(C.appendChild){C.appendChild(D.wrapper)}else{C(D.wrapper)}D.viewFrom=D.viewTo=A.first;D.view=[];D.externalMeasured=null;D.viewOffset=0;D.lastSizeC=0;D.updateLineNumbers=null;D.lineNumWidth=D.lineNumInnerWidth=D.lineNumChars=null;D.prevInput="";D.alignWidgets=false;D.pollingFast=false;D.poll=new LL();D.cachedCharWidth=D.cachedTextHeight=D.cachedPaddingH=null;D.inaccurateSelection=false;D.maxLine=null;D.maxLineLength=0;D.maxLineChanged=false;D.wheelDX=D.wheelDY=D.wheelStartX=D.wheelStartY=null;D.shift=false;D.selForContextMenu=null}function KU(A){A.doc.mode=HC.getMode(A.options,A.doc.modeOption);Iu(A)}function Iu(A){A.doc.iter(function(B){if(B.stateAfter){B.stateAfter=null}if(B.styles){B.styles=null}});A.doc.frontier=A.doc.first;Mb(A,100);A.state.modeGen++;if(A.curOp){GI(A)}}function Hd(A){if(A.options.lineWrapping){Mv(A.display.wrapper,"CodeMirror-wrap");A.display.sizer.style.minWidth=""}else{Hl(A.display.wrapper,"CodeMirror-wrap");Ib(A)}Lj(A);GI(A);JY(A);setTimeout(function(){Ku(A)},100)}function Gz(B){var A=LE(B.display),C=B.options.lineWrapping;var D=C&&Math.max(5,B.display.scroller.clientWidth/LH(B.display)-3);return function(E){if(I3(B.doc,E)){return 0}var G=0;if(E.widgets){for(var F=0;F<E.widgets.length;F++){if(E.widgets[F].height){G+=E.widgets[F].height}}}if(C){return G+(Math.ceil(E.text.length/D)||1)*A}else{return G+A}}}function Lj(A){var B=A.doc,C=Gz(A);B.iter(function(D){var E=C(D);if(E!=D.height){Mh(D,E)}})}function JP(B){var C=Gw[B.options.keyMap],A=C.style;B.display.wrapper.className=B.display.wrapper.className.replace(/\s*cm-keymap-\S+/g,"")+(A?" cm-keymap-"+A:"")}function Kh(A){A.display.wrapper.className=A.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+A.options.theme.replace(/(^|\s)\s*/g," cm-s-");JY(A)}function Hw(A){Lk(A);GI(A);setTimeout(function(){LR(A)},20)}function Lk(F){var B=F.display.gutters,D=F.options.gutters;Hq(B);for(var C=0;C<D.length;++C){var A=D[C];var E=B.appendChild(Kj("div",null,"CodeMirror-gutter "+A));if(A=="CodeMirror-linenumbers"){F.display.lineGutter=E;E.style.width=(F.display.lineNumWidth||1)+"px"}}B.style.display=C?"":"none";GY(F)}function GY(A){var B=A.display.gutters.offsetWidth;A.display.sizer.style.marginLeft=B+"px";A.display.scrollbarH.style.left=A.options.fixedGutter?B+"px":0}function F5(D){if(D.height==0){return 0}var C=D.text.length,A,E=D;while(A=Ia(E)){var B=A.find(0,true);E=B.from.line;C+=B.from.ch-B.to.ch}E=D;while(A=K3(E)){var B=A.find(0,true);C-=E.text.length-B.from.ch;E=B.to.line;C+=E.text.length-B.to.ch}return C}function Ib(A){var C=A.display,B=A.doc;C.maxLine=Gn(B,B.first);C.maxLineLength=F5(C.maxLine);C.maxLineChanged=true;B.iter(function(E){var D=F5(E);if(D>C.maxLineLength){C.maxLineLength=D;C.maxLine=E}})}function IC(B){var A=KZ(B.gutters,"CodeMirror-linenumbers");if(A==-1&&B.lineNumbers){B.gutters=B.gutters.concat(["CodeMirror-linenumbers"])}else{if(A>-1&&!B.lineNumbers){B.gutters=B.gutters.slice(0);B.gutters.splice(A,1)}}}function Ht(A){return A.display.scroller.clientHeight-A.display.wrapper.clientHeight<IB-3}function Go(A){var B=A.display.scroller;return{clientHeight:B.clientHeight,barHeight:A.display.scrollbarV.clientHeight,scrollWidth:B.scrollWidth,clientWidth:B.clientWidth,hScrollbarTakesSpace:Ht(A),barWidth:A.display.scrollbarH.clientWidth,docHeight:Math.round(A.doc.height+JN(A.display))}}function Ku(A,I){if(!I){I=Go(A)}var F=A.display,G=Gb(F.measure);var C=I.docHeight+IB;var H=I.scrollWidth>I.clientWidth;if(H&&I.scrollWidth<=I.clientWidth+1&&G>0&&!I.hScrollbarTakesSpace){H=false}var E=C>I.clientHeight;if(E){F.scrollbarV.style.display="block";F.scrollbarV.style.bottom=H?G+"px":"0";F.scrollbarV.firstChild.style.height=Math.max(0,C-I.clientHeight+(I.barHeight||F.scrollbarV.clientHeight))+"px"}else{F.scrollbarV.style.display="";F.scrollbarV.firstChild.style.height="0"}if(H){F.scrollbarH.style.display="block";F.scrollbarH.style.right=E?G+"px":"0";F.scrollbarH.firstChild.style.width=(I.scrollWidth-I.clientWidth+(I.barWidth||F.scrollbarH.clientWidth))+"px"}else{F.scrollbarH.style.display="";F.scrollbarH.firstChild.style.width="0"}if(H&&E){F.scrollbarFiller.style.display="block";F.scrollbarFiller.style.height=F.scrollbarFiller.style.width=G+"px"}else{F.scrollbarFiller.style.display=""}if(H&&A.options.coverGutterNextToScrollbar&&A.options.fixedGutter){F.gutterFiller.style.display="block";F.gutterFiller.style.height=G+"px";F.gutterFiller.style.width=F.gutters.offsetWidth+"px"}else{F.gutterFiller.style.display=""}if(!A.state.checkedOverlayScrollbar&&I.clientHeight>0){if(G===0){var D=GA&&!Lu?"12px":"18px";F.scrollbarV.style.minWidth=F.scrollbarH.style.minHeight=D;var B=function(J){if(Mn(J)!=F.scrollbarV&&Mn(J)!=F.scrollbarH){JB(A,GP)(J)}};H3(F.scrollbarV,"mousedown",B);H3(F.scrollbarH,"mousedown",B)}A.state.checkedOverlayScrollbar=true}}function Ih(C,I,A){var F=A&&A.top!=null?Math.max(0,A.top):C.scroller.scrollTop;F=Math.floor(F-HN(C));var G=A&&A.bottom!=null?A.bottom:F+C.wrapper.clientHeight;var B=G4(I,F),E=G4(I,G);if(A&&A.ensure){var H=A.ensure.from.line,D=A.ensure.to.line;if(H<B){return{from:H,to:G4(I,Mm(Gn(I,H))+C.wrapper.clientHeight)}}if(Math.min(D,I.lastLine())>=E){return{from:G4(I,Mm(Gn(I,D))-C.wrapper.clientHeight),to:D}}}return{from:B,to:Math.max(E,B+1)}}function LR(I){var G=I.display,C=G.view;if(!G.alignWidgets&&(!G.gutters.firstChild||!I.options.fixedGutter)){return}var D=G1(G)-G.scroller.scrollLeft+I.doc.scrollLeft;var A=G.gutters.offsetWidth,H=D+"px";for(var F=0;F<C.length;F++){if(!C[F].hidden){if(I.options.fixedGutter&&C[F].gutter){C[F].gutter.style.left=H}var B=C[F].alignable;if(B){for(var E=0;E<B.length;E++){B[E].style.left=H}}}}if(I.options.fixedGutter){G.gutters.style.left=(D+A)+"px"}}function F4(G){if(!G.options.lineNumbers){return false}var B=G.doc,E=LC(G.options,B.first+B.size-1),C=G.display;if(E.length!=C.lineNumChars){var D=C.measure.appendChild(Kj("div",[Kj("div",E)],"CodeMirror-linenumber CodeMirror-gutter-elt"));var A=D.firstChild.offsetWidth,F=D.offsetWidth-A;C.lineGutter.style.width="";C.lineNumInnerWidth=Math.max(A,C.lineGutter.offsetWidth-F);C.lineNumWidth=C.lineNumInnerWidth+F;C.lineNumChars=C.lineNumInnerWidth?E.length:-1;C.lineGutter.style.width=C.lineNumWidth+"px";GY(G);return true}return false}function LC(A,B){return String(A.lineNumberFormatter(B+A.firstLineNumber))}function G1(A){return A.scroller.getBoundingClientRect().left-A.sizer.getBoundingClientRect().left}function HD(C,B,A){var D=C.display;this.viewport=B;this.visible=Ih(D,C.doc,B);this.editorIsHidden=!D.wrapper.offsetWidth;this.wrapperHeight=D.wrapper.clientHeight;this.oldViewFrom=D.viewFrom;this.oldViewTo=D.viewTo;this.oldScrollerWidth=D.scroller.clientWidth;this.force=A;this.dims=GC(C)}function Io(J,H){var F=J.display,E=J.doc;if(H.editorIsHidden){Gv(J);return false}if(!H.force&&H.visible.from>=F.viewFrom&&H.visible.to<=F.viewTo&&(F.updateLineNumbers==null||F.updateLineNumbers>=F.viewTo)&&Ln(J)==0){return false}if(F4(J)){Gv(J);H.dims=GC(J)}var A=E.first+E.size;var C=Math.max(H.visible.from-J.options.viewportMargin,E.first);var B=Math.min(A,H.visible.to+J.options.viewportMargin);if(F.viewFrom<C&&C-F.viewFrom<20){C=Math.max(E.first,F.viewFrom)}if(F.viewTo>B&&F.viewTo-B<20){B=Math.min(A,F.viewTo)}if(F0){C=KQ(J.doc,C);B=GO(J.doc,B)}var D=C!=F.viewFrom||B!=F.viewTo||F.lastSizeC!=H.wrapperHeight;Lc(J,C,B);F.viewOffset=Mm(Gn(J.doc,F.viewFrom));J.display.mover.style.top=F.viewOffset+"px";var I=Ln(J);if(!D&&I==0&&!H.force&&(F.updateLineNumbers==null||F.updateLineNumbers>=F.viewTo)){return false}var G=Jr();if(I>4){F.lineDiv.style.display="none"}Gl(J,F.updateLineNumbers,H.dims);if(I>4){F.lineDiv.style.display=""}if(G&&Jr()!=G&&G.offsetHeight){G.focus()}Hq(F.cursorDiv);Hq(F.selectionDiv);if(D){F.lastSizeC=H.wrapperHeight;Mb(J,400)}F.updateLineNumbers=null;return true}function Lp(F,B){var C=B.force,D=B.viewport;for(var A=true;;A=false){if(A&&F.options.lineWrapping&&B.oldScrollerWidth!=F.display.scroller.clientWidth){C=true}else{C=false;if(D&&D.top!=null){D={top:Math.min(F.doc.height+JN(F.display)-IB-F.display.scroller.clientHeight,D.top)}}B.visible=Ih(F.display,F.doc,D);if(B.visible.from>=F.display.viewFrom&&B.visible.to<=F.display.viewTo){break}}if(!Io(F,B)){break}IY(F);var E=Go(F);KK(F);LK(F,E);Ku(F,E)}HU(F,"update",F);if(F.display.viewFrom!=B.oldViewFrom||F.display.viewTo!=B.oldViewTo){HU(F,"viewportChange",F,F.display.viewFrom,F.display.viewTo)}}function Ml(C,B){var A=new HD(C,B);if(Io(C,A)){IY(C);Lp(C,A);var D=Go(C);KK(C);LK(C,D);Ku(C,D)}}function LK(B,A){B.display.sizer.style.minHeight=B.display.heightForcer.style.top=A.docHeight+"px";B.display.gutters.style.height=Math.max(A.docHeight,A.clientHeight-IB)+"px"}function LI(B,A){if(B.display.sizer.offsetWidth+B.display.gutters.offsetWidth<B.display.scroller.clientWidth-1){B.display.sizer.style.minHeight=B.display.heightForcer.style.top="0px";B.display.gutters.style.height=A.docHeight+"px"}}function IY(J){var H=J.display;var G=H.lineDiv.offsetTop;for(var I=0;I<H.view.length;I++){var E=H.view[I],B;if(E.hidden){continue}if(Jg&&KO<8){var D=E.node.offsetTop+E.node.offsetHeight;B=D-G;G=D}else{var C=E.node.getBoundingClientRect();B=C.bottom-C.top}var F=E.line.height-B;if(B<2){B=LE(H)}if(F>0.001||F<-0.001){Mh(E.line,B);KV(E.line);if(E.rest){for(var A=0;A<E.rest.length;A++){KV(E.rest[A])}}}}}function KV(A){if(A.widgets){for(var B=0;B<A.widgets.length;++B){A.widgets[B].height=A.widgets[B].node.offsetHeight}}}function GC(B){var A=B.display,C={},G={};var D=A.gutters.clientLeft;for(var E=A.gutters.firstChild,F=0;E;E=E.nextSibling,++F){C[B.options.gutters[F]]=E.offsetLeft+E.clientLeft+D;G[B.options.gutters[F]]=E.clientWidth}return{fixedPos:G1(A),gutterTotalWidth:A.gutters.offsetWidth,gutterLeft:C,gutterWidth:G,wrapperWidth:A.wrapper.clientWidth}}function Gl(K,F,E){var N=K.display,C=K.options.lineNumbers;var G=N.lineDiv,A=G.firstChild;function J(P){var O=P.nextSibling;if(GS&&GA&&K.display.currentWheelTarget==P){P.style.display="none"}else{P.parentNode.removeChild(P)}return O}var M=N.view,I=N.viewFrom;for(var D=0;D<M.length;D++){var H=M[D];if(H.hidden){}else{if(!H.node){var L=GQ(K,H,I,E);G.insertBefore(L,A)}else{while(A!=H.node){A=J(A)}var B=C&&F!=null&&F<=I&&H.lineNumber;if(H.changes){if(KZ(H.changes,"gutter")>-1){B=false}H2(K,H,I,E)}if(B){Hq(H.lineNumber);H.lineNumber.appendChild(document.createTextNode(LC(K.options,I)))}A=H.node.nextSibling}}I+=H.size}while(A){A=J(A)}}function H2(D,A,C,B){for(var F=0;F<A.changes.length;F++){var E=A.changes[F];if(E=="text"){Kg(D,A)}else{if(E=="gutter"){Gf(D,A,C,B)}else{if(E=="class"){Ij(A)}else{if(E=="widget"){Im(A,B)}}}}}A.changes=null}function KP(A){if(A.node==A.text){A.node=Kj("div",null,null,"position: relative");if(A.text.parentNode){A.text.parentNode.replaceChild(A.node,A.text)}A.node.appendChild(A.text);if(Jg&&KO<8){A.node.style.zIndex=2}}return A.node}function Ho(C){var A=C.bgClass?C.bgClass+" "+(C.line.bgClass||""):C.line.bgClass;if(A){A+=" CodeMirror-linebackground"}if(C.background){if(A){C.background.className=A}else{C.background.parentNode.removeChild(C.background);C.background=null}}else{if(A){var B=KP(C);C.background=B.insertBefore(Kj("div",null,A),B.firstChild)}}}function G6(B,A){var C=B.display.externalMeasured;if(C&&C.line==A.line){B.display.externalMeasured=null;A.measure=C.measure;return C.built}return HO(B,A)}function Kg(C,A){var B=A.text.className;var D=G6(C,A);if(A.text==A.node){A.node=D.pre}A.text.parentNode.replaceChild(D.pre,A.text);A.text=D.pre;if(D.bgClass!=A.bgClass||D.textClass!=A.textClass){A.bgClass=D.bgClass;A.textClass=D.textClass;Ij(A)}else{if(B){A.text.className=B}}}function Ij(B){Ho(B);if(B.line.wrapClass){KP(B).className=B.line.wrapClass}else{if(B.node!=B.text){B.node.className=""}}var A=B.textClass?B.textClass+" "+(B.line.textClass||""):B.line.textClass;B.text.className=A||""}function Gf(E,H,B,F){if(H.gutter){H.node.removeChild(H.gutter);H.gutter=null}var D=H.line.gutterMarkers;if(E.options.lineNumbers||D){var J=KP(H);var G=H.gutter=J.insertBefore(Kj("div",null,"CodeMirror-gutter-wrapper","position: absolute; left: "+(E.options.fixedGutter?F.fixedPos:-F.gutterTotalWidth)+"px"),H.text);if(E.options.lineNumbers&&(!D||!D["CodeMirror-linenumbers"])){H.lineNumber=G.appendChild(Kj("div",LC(E.options,B),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+F.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+E.display.lineNumInnerWidth+"px"))}if(D){for(var I=0;I<E.options.gutters.length;++I){var A=E.options.gutters[I],C=D.hasOwnProperty(A)&&D[A];if(C){G.appendChild(Kj("div",[C],"CodeMirror-gutter-elt","left: "+F.gutterLeft[A]+"px; width: "+F.gutterWidth[A]+"px"))}}}}}function Im(C,B){if(C.alignable){C.alignable=null}for(var A=C.node.firstChild,D;A;A=D){var D=A.nextSibling;if(A.className=="CodeMirror-linewidget"){C.node.removeChild(A)}}J1(C,B)}function GQ(D,A,C,B){var E=G6(D,A);A.text=A.node=E.pre;if(E.bgClass){A.bgClass=E.bgClass}if(E.textClass){A.textClass=E.textClass}Ij(A);Gf(D,A,C,B);J1(A,B);return A.node}function J1(C,B){J7(C.line,C,B,true);if(C.rest){for(var A=0;A<C.rest.length;A++){J7(C.rest[A],C,B,false)}}}function J7(C,G,D,H){if(!C.widgets){return}var B=KP(G);for(var F=0,I=C.widgets;F<I.length;++F){var A=I[F],E=Kj("div",[A.node],"CodeMirror-linewidget");if(!A.handleMouseEvents){E.ignoreEvents=true}KR(A,E,G,D);if(H&&A.above){B.insertBefore(E,G.gutter||G.text)}else{B.appendChild(E)}HU(A,"redraw")}}function KR(D,B,C,A){if(D.noHScroll){(C.alignable||(C.alignable=[])).push(B);var E=A.wrapperWidth;B.style.left=A.fixedPos+"px";if(!D.coverGutter){E-=A.gutterTotalWidth;B.style.paddingLeft=A.gutterTotalWidth+"px"}B.style.width=E+"px"}if(D.coverGutter){B.style.zIndex=5;B.style.position="relative";if(!D.noHScroll){B.style.marginLeft=-A.gutterTotalWidth+"px"}}}var KM=HC.Pos=function(A,B){if(!(this instanceof KM)){return new KM(A,B)}this.line=A;this.ch=B};var Gx=HC.cmpPos=function(A,B){return A.line-B.line||A.ch-B.ch};function GT(A){return KM(A.line,A.ch)}function L2(A,B){return Gx(A,B)<0?B:A}function JG(A,B){return Gx(A,B)<0?A:B}function K2(A,B){this.ranges=A;this.primIndex=B}K2.prototype={primary:function(){return this.ranges[this.primIndex]},equals:function(C){if(C==this){return true}if(C.primIndex!=this.primIndex||C.ranges.length!=this.ranges.length){return false}for(var D=0;D<this.ranges.length;D++){var A=this.ranges[D],B=C.ranges[D];if(Gx(A.anchor,B.anchor)!=0||Gx(A.head,B.head)!=0){return false}}return true},deepCopy:function(){for(var A=[],B=0;B<this.ranges.length;B++){A[B]=new JI(GT(this.ranges[B].anchor),GT(this.ranges[B].head))}return new K2(A,this.primIndex)},somethingSelected:function(){for(var A=0;A<this.ranges.length;A++){if(!this.ranges[A].empty()){return true}}return false},contains:function(A,B){if(!B){B=A}for(var C=0;C<this.ranges.length;C++){var D=this.ranges[C];if(Gx(B,D.from())>=0&&Gx(A,D.to())<=0){return C}}return -1}};function JI(A,B){this.anchor=A;this.head=B}JI.prototype={from:function(){return JG(this.anchor,this.head)},to:function(){return L2(this.anchor,this.head)},empty:function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch}};function KE(E,F){var A=E[F];E.sort(function(K,J){return Gx(K.from(),J.from())});F=KZ(E,A);for(var I=1;I<E.length;I++){var B=E[I],G=E[I-1];if(Gx(G.to(),B.from())>=0){var C=JG(G.from(),B.from()),D=L2(G.to(),B.to());var H=G.empty()?B.from()==B.head:G.from()==G.head;if(I<=F){--F}E.splice(--I,2,new JI(H?D:C,H?C:D))}}return new K2(E,F)}function Ju(A,B){return new K2([new JI(A,B||A)],0)}function Iw(A,B){return Math.max(A.first,Math.min(B,A.first+A.size-1))}function G0(B,C){if(C.line<B.first){return KM(B.first,0)}var A=B.first+B.size-1;if(C.line>A){return KM(A,Gn(B,A).text.length)}return GJ(C,Gn(B,C.line).text.length)}function GJ(C,B){var A=C.ch;if(A==null||A>B){return KM(C.line,B)}else{if(A<0){return KM(C.line,0)}else{return C}}}function Lt(A,B){return B>=A.first&&B<A.first+A.size}function Jh(C,D){for(var B=[],A=0;A<D.length;A++){B[A]=G0(C,D[A])}return B}function MA(F,D,B,C){if(F.cm&&F.cm.display.shift||F.extend){var E=D.anchor;if(C){var A=Gx(B,E)<0;if(A!=(Gx(C,E)<0)){E=B;B=C}else{if(A!=(Gx(B,C)<0)){B=C}}}return new JI(E,B)}else{return new JI(C||B,B)}}function LD(C,A,B,D){Jf(C,new K2([MA(C,C.sel.primary(),A,B)],0),D)}function Kv(F,A,C){for(var D=[],E=0;E<F.sel.ranges.length;E++){D[E]=MA(F,F.sel.ranges[E],A[E],null)}var B=KE(D,F.sel.primIndex);Jf(F,B,C)}function MD(D,C,A,B){var E=D.sel.ranges.slice(0);E[C]=A;Jf(D,KE(E,D.sel.primIndex),B)}function JL(C,B,A,D){Jf(C,Ju(B,A),D)}function GX(B,A){var C={ranges:A.ranges,update:function(E){this.ranges=[];for(var D=0;D<E.length;D++){this.ranges[D]=new JI(G0(B,E[D].anchor),G0(B,E[D].head))}}};Je(B,"beforeSelectionChange",B,C);if(B.cm){Je(B.cm,"beforeSelectionChange",B.cm,C)}if(C.ranges!=A.ranges){return KE(C.ranges,C.ranges.length-1)}else{return A}}function Ja(E,B,A){var C=E.history.done,D=Jx(C);if(D&&D.ranges){C[C.length-1]=B;Gi(E,B,A)}else{Jf(E,B,A)}}function Jf(B,A,C){Gi(B,A,C);Il(B,B.sel,B.cm?B.cm.curOp.id:NaN,C)}function Gi(C,B,A){if(Hx(C,"beforeSelectionChange")||C.cm&&Hx(C.cm,"beforeSelectionChange")){B=GX(C,B)}var D=A&&A.bias||(Gx(B.primary().head,C.sel.primary().head)<0?-1:1);LA(C,La(C,B,D,true));if(!(A&&A.scroll===false)&&C.cm){H7(C.cm)}}function LA(A,B){if(B.equals(A.sel)){return}A.sel=B;if(A.cm){A.cm.curOp.updateInput=A.cm.curOp.selectionChanged=true;Mw(A.cm)}HU(A,"cursorActivity",A)}function LJ(A){LA(A,La(A,A.sel,null,false),JQ)}function La(I,A,G,F){var B;for(var E=0;E<A.ranges.length;E++){var C=A.ranges[E];var D=Lw(I,C.anchor,G,F);var H=Lw(I,C.head,G,F);if(B||D!=C.anchor||H!=C.head){if(!B){B=A.ranges.slice(0,E)}B[E]=new JI(D,H)}}return B?KE(B,A.primIndex):A}function Lw(I,C,E,L){var F=false,H=C;var A=E||1;I.cantEdit=false;search:for(;;){var B=Gn(I,H.line);if(B.markedSpans){for(var J=0;J<B.markedSpans.length;++J){var K=B.markedSpans[J],G=K.marker;if((K.from==null||(G.inclusiveLeft?K.from<=H.ch:K.from<H.ch))&&(K.to==null||(G.inclusiveRight?K.to>=H.ch:K.to>H.ch))){if(L){Je(G,"beforeCursorEnter");if(G.explicitlyCleared){if(!B.markedSpans){break}else{--J;continue}}}if(!G.atomic){continue}var D=G.find(A<0?-1:1);if(Gx(D,H)==0){D.ch+=A;if(D.ch<0){if(D.line>I.first){D=G0(I,KM(D.line-1))}else{D=null}}else{if(D.ch>B.text.length){if(D.line<I.first+I.size-1){D=KM(D.line+1,0)}else{D=null}}}if(!D){if(F){if(!L){return Lw(I,C,E,true)}I.cantEdit=true;return KM(I.first,0)}F=true;D=C;A=-A}}H=D;continue search}}}return H}}function HT(F){var D=F.display,H=F.doc,E={};var J=E.cursors=document.createDocumentFragment();var I=E.selection=document.createDocumentFragment();for(var K=0;K<H.sel.ranges.length;K++){var G=H.sel.ranges[K];var L=G.empty();if(L||F.options.showCursorWhenSelecting){Gg(F,G,J)}if(!L){Kn(F,G,I)}}if(F.options.moveInputWithCursor){var B=Iz(F,H.sel.primary().head,"div");var A=D.wrapper.getBoundingClientRect(),C=D.lineDiv.getBoundingClientRect();E.teTop=Math.max(0,Math.min(D.wrapper.clientHeight-10,B.top+C.top-A.top));E.teLeft=Math.max(0,Math.min(D.wrapper.clientWidth-10,B.left+C.left-A.left))}return E}function G3(A,B){HE(A.display.cursorDiv,B.cursors);HE(A.display.selectionDiv,B.selection);if(B.teTop!=null){A.display.inputDiv.style.top=B.teTop+"px";A.display.inputDiv.style.left=B.teLeft+"px"}}function KK(A){G3(A,HT(A))}function Gg(D,B,F){var C=Iz(D,B.head,"div",null,null,!D.options.singleCursorHeightPerLine);var E=F.appendChild(Kj("div","\u00a0","CodeMirror-cursor"));E.style.left=C.left+"px";E.style.top=C.top+"px";E.style.height=Math.max(0,C.bottom-C.top)*D.options.cursorHeight+"px";if(C.other){var A=F.appendChild(Kj("div","\u00a0","CodeMirror-cursor CodeMirror-secondarycursor"));A.style.display="";A.style.left=C.other.left+"px";A.style.top=C.other.top+"px";A.style.height=(C.other.bottom-C.other.top)*0.85+"px"}}function Kn(A,N,C){var E=A.display,I=A.doc;var R=document.createDocumentFragment();var B=IA(A.display),F=B.left,Q=E.lineSpace.offsetWidth-B.right;function O(S,T,U,V){if(T<0){T=0}T=Math.round(T);V=Math.round(V);R.appendChild(Kj("div",null,"CodeMirror-selected","position: absolute; left: "+S+"px; top: "+T+"px; width: "+(U==null?Q-S:U)+"px; height: "+(V-T)+"px"))}function K(V,Y,X){var S=Gn(I,V);var Z=S.text.length;var U,W;function T(a,b){return Kz(A,KM(V,a),"div",S,b)}Mf(I8(S),Y||0,X==null?Z:X,function(h,f,a){var b=T(h,"left"),e,c,d;if(h==f){e=b;c=d=b.left}else{e=T(f-1,"right");if(a=="rtl"){var g=b;b=e;e=g}c=b.left;d=e.right}if(Y==null&&h==0){c=F}if(e.top-b.top>3){O(c,b.top,null,b.bottom);c=F;if(b.bottom<e.top){O(c,b.bottom,null,e.top)}}if(X==null&&f==Z){d=Q}if(!U||b.top<U.top||b.top==U.top&&b.left<U.left){U=b}if(!W||e.bottom>W.bottom||e.bottom==W.bottom&&e.right>W.right){W=e}if(c<F+1){c=F}O(c,e.top,d-c,e.bottom)});return{start:U,end:W}}var J=N.from(),M=N.to();if(J.line==M.line){K(J.line,J.ch,M.ch)}else{var D=Gn(I,J.line),H=Gn(I,M.line);var L=Hh(D)==Hh(H);var G=K(J.line,J.ch,L?D.text.length+1:null).end;var P=K(M.line,L?0:null,M.ch).start;if(L){if(G.top<P.top-2){O(G.right,G.top,null,G.bottom);O(F,P.top,P.left,P.bottom)}else{O(G.right,G.top,P.left-G.right,G.bottom)}}if(G.bottom<P.top){O(F,G.bottom,null,P.top)}}C.appendChild(R)}function IH(B){if(!B.state.focused){return}var C=B.display;clearInterval(C.blinker);var A=true;C.cursorDiv.style.visibility="";if(B.options.cursorBlinkRate>0){C.blinker=setInterval(function(){C.cursorDiv.style.visibility=(A=!A)?"":"hidden"},B.options.cursorBlinkRate)}else{if(B.options.cursorBlinkRate<0){C.cursorDiv.style.visibility="hidden"}}}function Mb(A,B){if(A.doc.mode.startState&&A.doc.frontier<A.display.viewTo){A.state.highlight.set(B,G2(KD,A))}}function KD(C){var D=C.doc;if(D.frontier<D.first){D.frontier=D.first}if(D.frontier>=C.display.viewTo){return}var A=+new Date+C.options.workTime;var E=JK(D.mode,Ic(C,D.frontier));var B=[];D.iter(D.frontier,Math.min(D.first+D.size,C.display.viewTo+500),function(H){if(D.frontier>=C.display.viewFrom){var I=H.styles;var K=L8(C,H,E,true);H.styles=K.styles;var F=H.styleClasses,L=K.classes;if(L){H.styleClasses=L}else{if(F){H.styleClasses=null}}var G=!I||I.length!=H.styles.length||F!=L&&(!F||!L||F.bgClass!=L.bgClass||F.textClass!=L.textClass);for(var J=0;!G&&J<I.length;++J){G=I[J]!=H.styles[J]}if(G){B.push(D.frontier)}H.stateAfter=JK(D.mode,E)}else{LU(C,H.text,E);H.stateAfter=D.frontier%5==0?JK(D.mode,E):null}++D.frontier;if(+new Date>A){Mb(C,C.options.workDelay);return true}});if(B.length){Gm(C,function(){for(var F=0;F<B.length;F++){Gh(C,B[F],"text")}})}}function GL(A,J,D){var C,F,H=A.doc;var E=D?-1:J-(A.doc.mode.innerMode?1000:100);for(var I=J;I>E;--I){if(I<=H.first){return H.first}var B=Gn(H,I-1);if(B.stateAfter&&(!D||I<=H.frontier)){return I}var G=JX(B.text,null,A.options.tabSize);if(F==null||C>G){F=I-1;C=G}}return F}function Ic(G,A,D){var B=G.doc,C=G.display;if(!B.mode.startState){return true}var F=GL(G,A,D),E=F>B.first&&Gn(B,F-1).stateAfter;if(!E){E=Ll(B.mode)}else{E=JK(B.mode,E)}B.iter(F,A,function(I){LU(G,I.text,E);var H=F==A-1||F%5==0||F>=C.viewFrom&&F<C.viewTo;I.stateAfter=H?JK(B.mode,E):null;++F});if(D){B.frontier=F}return E}function HN(A){return A.lineSpace.offsetTop}function JN(A){return A.mover.offsetHeight-A.lineSpace.offsetHeight}function IA(A){if(A.cachedPaddingH){return A.cachedPaddingH}var C=HE(A.measure,Kj("pre","x"));var B=window.getComputedStyle?window.getComputedStyle(C):C.currentStyle;var D={left:parseInt(B.paddingLeft),right:parseInt(B.paddingRight)};if(!isNaN(D.left)&&!isNaN(D.right)){A.cachedPaddingH=D}return D}function Hm(J,D,H){var C=J.options.lineWrapping;var I=C&&J.display.scroller.clientWidth;if(!D.measure.heights||C&&D.measure.width!=I){var G=D.measure.heights=[];if(C){D.measure.width=I;var B=D.text.firstChild.getClientRects();for(var F=0;F<B.length-1;F++){var A=B[F],E=B[F+1];if(Math.abs(A.bottom-E.bottom)>2){G.push((A.bottom+E.top)/2-H.top)}}}G.push(H.bottom-H.top)}}function Mg(C,A,B){if(C.line==A){return{map:C.measure.map,cache:C.measure.cache}}for(var D=0;D<C.rest.length;D++){if(C.rest[D]==A){return{map:C.measure.maps[D],cache:C.measure.caches[D]}}}for(var D=0;D<C.rest.length;D++){if(Jp(C.rest[D])>B){return{map:C.measure.maps[D],cache:C.measure.caches[D],before:true}}}}function Hi(D,C){C=Hh(C);var A=Jp(C);var E=D.display.externalMeasured=new IE(D.doc,C,A);E.lineN=A;var B=E.built=HO(D,E);E.text=B.pre;HE(D.display.lineMeasure,B.pre);return E}function Jo(B,A,C,D){return Gj(B,Md(B,A),C,D)}function Mt(B,A){if(A>=B.display.viewFrom&&A<B.display.viewTo){return B.display.view[KF(B,A)]}var C=B.display.externalMeasured;if(C&&A>=C.lineN&&A<C.lineN+C.size){return C}}function Md(D,C){var A=Jp(C);var E=Mt(D,A);if(E&&!E.text){E=null}else{if(E&&E.changes){H2(D,E,A,GC(D))}}if(!E){E=Hi(D,C)}var B=Mg(E,C,A);return{line:C,view:E,rect:null,map:B.map,cache:B.cache,before:B.before,hasHeights:false}}function Gj(G,A,E,B,D){if(A.before){E=-1}var F=E+(B||""),C;if(A.cache.hasOwnProperty(F)){C=A.cache[F]}else{if(!A.rect){A.rect=A.view.text.getBoundingClientRect()}if(!A.hasHeights){Hm(G,A.view,A.rect);A.hasHeights=true}C=Ka(G,A,E,B);if(!C.bogus){A.cache[F]=C}}return{left:C.left,right:C.right,top:D?C.rtop:C.top,bottom:D?C.rbottom:C.bottom}}var KX={left:0,right:0,top:0,bottom:0};function Ka(E,Q,M,U){var P=Q.map;var T,G,V,L;for(var O=0;O<P.length;O+=3){var A=P[O],K=P[O+1];if(M<A){G=0;V=1;L="left"}else{if(M<K){G=M-A;V=G+1}else{if(O==P.length-3||M==K&&P[O+3]>M){V=K-A;G=V-1;if(M>=K){L="right"}}}}if(G!=null){T=P[O+2];if(A==K&&U==(T.insertLeft?"left":"right")){L=U}if(U=="left"&&G==0){while(O&&P[O-2]==P[O-3]&&P[O-1].insertLeft){T=P[(O-=3)+2];L="left"}}if(U=="right"&&G==K-A){while(O<P.length-3&&P[O+3]==P[O+4]&&!P[O+5].insertLeft){T=P[(O+=3)+2];L="right"}}break}}var C;if(T.nodeType==3){for(var O=0;O<4;O++){while(G&&I5(Q.line.text.charAt(A+G))){--G}while(A+V<K&&I5(Q.line.text.charAt(A+V))){++V}if(Jg&&KO<9&&G==0&&V==K-A){C=T.parentNode.getBoundingClientRect()}else{if(Jg&&E.options.lineWrapping){var I=Hg(T,G,V).getClientRects();if(I.length){C=I[U=="right"?I.length-1:0]}else{C=KX}}else{C=Hg(T,G,V).getBoundingClientRect()||KX}}if(C.left||C.right||G==0){break}V=G;G=G-1;L="right"}if(Jg&&KO<11){C=Ge(E.display.measure,C)}}else{if(G>0){L=U="right"}var I;if(E.options.lineWrapping&&(I=T.getClientRects()).length>1){C=I[U=="right"?I.length-1:0]}else{C=T.getBoundingClientRect()}}if(Jg&&KO<9&&!G&&(!C||!C.left&&!C.right)){var B=T.parentNode.getClientRects()[0];if(B){C={left:B.left,right:B.left+LH(E.display),top:B.top,bottom:B.bottom}}else{C=KX}}var J=C.top-Q.rect.top,N=C.bottom-Q.rect.top;var F=(J+N)/2;var S=Q.view.measure.heights;for(var O=0;O<S.length-1;O++){if(F<S[O]){break}}var H=O?S[O-1]:0,R=S[O];var D={left:(L=="right"?C.right:C.left)-Q.rect.left,right:(L=="left"?C.left:C.right)-Q.rect.left,top:H,bottom:R};if(!C.left&&!C.right){D.bogus=true}if(!E.options.singleCursorHeightPerLine){D.rtop=J;D.rbottom=N}return D}function Ge(C,D){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!IP(C)){return D}var A=screen.logicalXDPI/screen.deviceXDPI;var B=screen.logicalYDPI/screen.deviceYDPI;return{left:D.left*A,right:D.right*A,top:D.top*B,bottom:D.bottom*B}}function Kx(B){if(B.measure){B.measure.cache={};B.measure.heights=null;if(B.rest){for(var A=0;A<B.rest.length;A++){B.measure.caches[A]={}}}}}function Jt(A){A.display.externalMeasure=null;Hq(A.display.lineMeasure);for(var B=0;B<A.display.view.length;B++){Kx(A.display.view[B])}}function JY(A){Jt(A);A.display.cachedCharWidth=A.display.cachedTextHeight=A.display.cachedPaddingH=null;if(!A.options.lineWrapping){A.display.maxLineChanged=true}A.display.lineNumChars=null}function Kr(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function JA(){return window.pageYOffset||(document.documentElement||document.body).scrollTop}function I4(B,F,D,I){if(F.widgets){for(var E=0;E<F.widgets.length;++E){if(F.widgets[E].above){var H=Ig(F.widgets[E]);D.top+=H;D.bottom+=H}}}if(I=="line"){return D}if(!I){I="local"}var G=Mm(F);if(I=="local"){G+=HN(B.display)}else{G-=B.display.viewOffset}if(I=="page"||I=="window"){var C=B.display.lineSpace.getBoundingClientRect();G+=C.top+(I=="window"?0:JA());var A=C.left+(I=="window"?0:Kr());D.left+=A;D.right+=A}D.top+=G;D.bottom+=G;return D}function Js(B,C,A){if(A=="div"){return C}var D=C.left,E=C.top;if(A=="page"){D-=Kr();E-=JA()}else{if(A=="local"||!A){var F=B.display.sizer.getBoundingClientRect();D+=F.left;E+=F.top}}var G=B.display.lineSpace.getBoundingClientRect();return{left:D-G.left,top:E-G.top}}function Kz(D,A,E,C,B){if(!C){C=Gn(D.doc,A.line)}return I4(D,C,Jo(D,C,A.ch,B),E)}function Iz(E,G,B,C,D,K){C=C||Gn(E.doc,G.line);if(!D){D=Md(E,C)}function I(O,M){var N=Gj(E,D,O,M?"right":"left",K);if(M){N.left=N.right}else{N.right=N.left}return I4(E,C,N,B)}function F(P,M){var O=J[M],N=O.level%2;if(P==JW(O)&&M&&O.level<J[M-1].level){O=J[--M];P=Lx(O)-(O.level%2?0:1);N=true}else{if(P==Lx(O)&&M<J.length-1&&O.level<J[M+1].level){O=J[++M];P=JW(O)-O.level%2;N=false}}if(N&&P==O.to&&P>O.from){return I(P-1)}return I(P,N)}var J=I8(C),H=G.ch;if(!J){return I(H)}var A=F1(J,H);var L=F(H,A);if(IT!=null){L.other=F(H,IT)}return L}function Lq(E,A){var C=0,A=G0(E.doc,A);if(!E.options.lineWrapping){C=LH(E.display)*A.ch}var D=Gn(E.doc,A.line);var B=Mm(D)+HN(E.display);return{left:C,right:C,top:B,bottom:B+D.height}}function Hr(D,B,C,A){var E=KM(D,B);E.xRel=A;if(C){E.outside=true}return E}function K9(I,D,F){var H=I.doc;F+=I.display.viewOffset;if(F<0){return Hr(H.first,0,true,-1)}var A=G4(H,F),J=H.first+H.size-1;if(A>J){return Hr(H.first+H.size-1,Gn(H,J).text.length,true,1)}if(D<0){D=0}var C=Gn(H,A);for(;;){var B=Ip(I,C,A,D,F);var G=K3(C);var E=G&&G.find(0,true);if(G&&(B.ch>E.from.ch||B.ch==E.from.ch&&B.xRel>0)){A=Jp(C=E.to.line)}else{return B}}}function Ip(V,C,R,E,B){var T=B-Mm(C);var X=false,I=2*V.display.wrapper.clientWidth;var L=Md(V,C);function Q(Z){var a=Iz(V,KM(R,Z),"line",C,L);X=true;if(T>a.bottom){return a.left-I}else{if(T<a.top){return a.left+I}else{X=false}}return a.left}var D=I8(C),W=C.text.length;var A=Gq(C),F=IS(C);var M=Q(A),O=X,K=Q(F),H=X;if(E>K){return Hr(R,F,H,1)}for(;;){if(D?F==A||F==LP(C,A,1):F-A<=1){var J=E<M||E-M<=K-E?A:F;var P=E-(J==A?M:K);while(I5(C.text.charAt(J))){++J}var S=Hr(R,J,J==A?O:H,P<-1?-1:P>1?1:0);return S}var N=Math.ceil(W/2),G=A+N;if(D){G=A;for(var Y=0;Y<N;++Y){G=LP(C,G,1)}}var U=Q(G);if(U>E){F=G;K=U;if(H=X){K+=1000}W=N}else{A=G;M=U;O=X;W-=N}}}var I6;function LE(A){if(A.cachedTextHeight!=null){return A.cachedTextHeight}if(I6==null){I6=Kj("pre");for(var C=0;C<49;++C){I6.appendChild(document.createTextNode("x"));I6.appendChild(Kj("br"))}I6.appendChild(document.createTextNode("x"))}HE(A.measure,I6);var B=I6.offsetHeight/50;if(B>3){A.cachedTextHeight=B}Hq(A.measure);return B||1}function LH(C){if(C.cachedCharWidth!=null){return C.cachedCharWidth}var E=Kj("span","xxxxxxxxxx");var A=Kj("pre",[E]);HE(C.measure,A);var B=E.getBoundingClientRect(),D=(B.right-B.left)/10;if(D>2){C.cachedCharWidth=D}return D||10}var F3=null;var IM=0;function I2(A){A.curOp={cm:A,viewChanged:false,startHeight:A.doc.height,forceUpdate:false,updateInput:null,typing:false,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:false,updateMaxLine:false,scrollLeft:null,scrollTop:null,scrollToPos:null,id:++IM};if(F3){F3.ops.push(A.curOp)}else{A.curOp.ownsGroup=F3={ops:[A.curOp],delayedCallbacks:[]}}}function JJ(C){var E=C.delayedCallbacks,A=0;do{for(;A<E.length;A++){E[A]()}for(var D=0;D<C.ops.length;D++){var B=C.ops[D];if(B.cursorActivityHandlers){while(B.cursorActivityCalled<B.cursorActivityHandlers.length){B.cursorActivityHandlers[B.cursorActivityCalled++](B.cm)}}}}while(A<E.length)}function GW(C){var B=C.curOp,D=B.ownsGroup;if(!D){return}try{JJ(D)}finally{F3=null;for(var A=0;A<D.ops.length;A++){D.ops[A].cm.curOp=null}J9(D)}}function J9(C){var B=C.ops;for(var A=0;A<B.length;A++){H8(B[A])}for(var A=0;A<B.length;A++){Ky(B[A])}for(var A=0;A<B.length;A++){Kc(B[A])}for(var A=0;A<B.length;A++){LY(B[A])}for(var A=0;A<B.length;A++){LN(B[A])}}function H8(C){var A=C.cm,B=A.display;if(C.updateMaxLine){Ib(A)}C.mustUpdate=C.viewChanged||C.forceUpdate||C.scrollTop!=null||C.scrollToPos&&(C.scrollToPos.from.line<B.viewFrom||C.scrollToPos.to.line>=B.viewTo)||B.maxLineChanged&&A.options.lineWrapping;C.update=C.mustUpdate&&new HD(A,C.mustUpdate&&{top:C.scrollTop,ensure:C.scrollToPos},C.forceUpdate)}function Ky(A){A.updatedDisplay=A.mustUpdate&&Io(A.cm,A.update)}function Kc(C){var A=C.cm,B=A.display;if(C.updatedDisplay){IY(A)}C.barMeasure=Go(A);if(B.maxLineChanged&&!A.options.lineWrapping){C.adjustWidthTo=Jo(A,B.maxLine,B.maxLine.text.length).left+3;C.maxScrollLeft=Math.max(0,B.sizer.offsetLeft+C.adjustWidthTo+IB-B.scroller.clientWidth)}if(C.updatedDisplay||C.selectionChanged){C.newSelectionNodes=HT(A)}}function LY(B){var A=B.cm;if(B.adjustWidthTo!=null){A.display.sizer.style.minWidth=B.adjustWidthTo+"px";if(B.maxScrollLeft<A.doc.scrollLeft){Jb(A,Math.min(A.display.scroller.scrollLeft,B.maxScrollLeft),true)}A.display.maxLineChanged=false}if(B.newSelectionNodes){G3(A,B.newSelectionNodes)}if(B.updatedDisplay){LK(A,B.barMeasure)}if(B.updatedDisplay||B.startHeight!=A.doc.height){Ku(A,B.barMeasure)}if(B.selectionChanged){IH(A)}if(A.state.focused&&B.updateInput){Gr(A,B.typing)}}function LN(H){var E=H.cm,D=E.display,G=E.doc;if(H.adjustWidthTo!=null&&Math.abs(H.barMeasure.scrollWidth-E.display.scroller.scrollWidth)>1){Ku(E)}if(H.updatedDisplay){Lp(E,H.update)}if(D.wheelStartX!=null&&(H.scrollTop!=null||H.scrollLeft!=null||H.scrollToPos)){D.wheelStartX=D.wheelStartY=null}if(H.scrollTop!=null&&(D.scroller.scrollTop!=H.scrollTop||H.forceScroll)){var J=Math.max(0,Math.min(D.scroller.scrollHeight-D.scroller.clientHeight,H.scrollTop));D.scroller.scrollTop=D.scrollbarV.scrollTop=G.scrollTop=J}if(H.scrollLeft!=null&&(D.scroller.scrollLeft!=H.scrollLeft||H.forceScroll)){var A=Math.max(0,Math.min(D.scroller.scrollWidth-D.scroller.clientWidth,H.scrollLeft));D.scroller.scrollLeft=D.scrollbarH.scrollLeft=G.scrollLeft=A;LR(E)}if(H.scrollToPos){var I=Lb(E,G0(G,H.scrollToPos.from),G0(G,H.scrollToPos.to),H.scrollToPos.margin);if(H.scrollToPos.isCursor&&E.state.focused){IG(E,I)}}var B=H.maybeHiddenMarkers,F=H.maybeUnhiddenMarkers;if(B){for(var C=0;C<B.length;++C){if(!B[C].lines.length){Je(B[C],"hide")}}}if(F){for(var C=0;C<F.length;++C){if(F[C].lines.length){Je(F[C],"unhide")}}}if(D.wrapper.offsetHeight){G.scrollTop=E.display.scroller.scrollTop}if(H.updatedDisplay&&GS){if(E.options.lineWrapping){LI(E,H.barMeasure)}if(H.barMeasure.scrollWidth>H.barMeasure.clientWidth&&H.barMeasure.scrollWidth<H.barMeasure.clientWidth+1&&!Ht(E)){Ku(E)}}if(H.changeObjs){Je(E,"changes",E,H.changeObjs)}}function Gm(B,A){if(B.curOp){return A()}I2(B);try{return A()}finally{GW(B)}}function JB(B,A){return function(){if(B.curOp){return A.apply(B,arguments)}I2(B);try{return A.apply(B,arguments)}finally{GW(B)}}}function JF(A){return function(){if(this.curOp){return A.apply(this,arguments)}I2(this);try{return A.apply(this,arguments)}finally{GW(this)}}}function Mk(A){return function(){var B=this.cm;if(!B||B.curOp){return A.apply(this,arguments)}I2(B);try{return A.apply(this,arguments)}finally{GW(B)}}}function IE(B,A,C){this.line=A;this.rest=HP(A);this.size=this.rest?Jp(Jx(this.rest))-C+1:1;this.node=this.text=null;this.hidden=I3(B,A)}function Kp(G,D,A){var F=[],C;for(var B=D;B<A;B=C){var E=new IE(G.doc,Gn(G.doc,B),B);C=B+E.size;F.push(E)}return F}function GI(H,I,F,G){if(I==null){I=H.doc.first}if(F==null){F=H.doc.first+H.doc.size}if(!G){G=0}var D=H.display;if(G&&F<D.viewTo&&(D.updateLineNumbers==null||D.updateLineNumbers>I)){D.updateLineNumbers=I}H.curOp.viewChanged=true;if(I>=D.viewTo){if(F0&&KQ(H.doc,I)<D.viewTo){Gv(H)}}else{if(F<=D.viewFrom){if(F0&&GO(H.doc,F+G)>D.viewFrom){Gv(H)}else{D.viewFrom+=G;D.viewTo+=G}}else{if(I<=D.viewFrom&&F>=D.viewTo){Gv(H)}else{if(I<=D.viewFrom){var C=ID(H,F,F+G,1);if(C){D.view=D.view.slice(C.index);D.viewFrom=C.lineN;D.viewTo+=G}else{Gv(H)}}else{if(F>=D.viewTo){var C=ID(H,I,I,-1);if(C){D.view=D.view.slice(0,C.index);D.viewTo=C.lineN}else{Gv(H)}}else{var A=ID(H,I,I,-1);var B=ID(H,F,F+G,1);if(A&&B){D.view=D.view.slice(0,A.index).concat(Kp(H,A.lineN,B.lineN)).concat(D.view.slice(B.index));D.viewTo+=G}else{Gv(H)}}}}}}var E=D.externalMeasured;if(E){if(F<E.lineN){E.lineN+=G}else{if(I<E.lineN+E.size){D.externalMeasured=null}}}}function Gh(G,F,D){G.curOp.viewChanged=true;var C=G.display,B=G.display.externalMeasured;if(B&&F>=B.lineN&&F<B.lineN+B.size){C.externalMeasured=null}if(F<C.viewFrom||F>=C.viewTo){return}var A=C.view[KF(G,F)];if(A.node==null){return}var E=A.changes||(A.changes=[]);if(KZ(E,D)==-1){E.push(D)}}function Gv(A){A.display.viewFrom=A.display.viewTo=A.doc.first;A.display.view=[];A.display.viewOffset=0}function KF(C,A){if(A>=C.display.viewTo){return null}A-=C.display.viewFrom;if(A<0){return null}var B=C.display.view;for(var D=0;D<B.length;D++){A-=B[D].size;if(A<0){return D}}}function ID(I,A,C,F){var H=KF(I,A),G,B=I.display.view;if(!F0||C==I.doc.first+I.doc.size){return{index:H,lineN:C}}for(var E=0,D=I.display.viewFrom;E<H;E++){D+=B[E].size}if(D!=A){if(F>0){if(H==B.length-1){return null}G=(D+B[H].size)-A;H++}else{G=D-A}A+=G;C+=G}while(KQ(I.doc,C)!=C){if(H==(F<0?0:B.length-1)){return null}C+=F*B[H-(F<0?1:0)].size;H+=F}return{index:H,lineN:C}}function Lc(E,C,A){var B=E.display,D=B.view;if(D.length==0||C>=B.viewTo||A<=B.viewFrom){B.view=Kp(E,C,A);B.viewFrom=C}else{if(B.viewFrom>C){B.view=Kp(E,C,B.viewFrom).concat(B.view)}else{if(B.viewFrom<C){B.view=B.view.slice(KF(E,C))}}B.viewFrom=C;if(B.viewTo<A){B.view=B.view.concat(Kp(E,B.viewTo,A))}else{if(B.viewTo>A){B.view=B.view.slice(0,KF(E,A))}}}B.viewTo=A}function Ln(C){var A=C.display.view,D=0;for(var E=0;E<A.length;E++){var B=A[E];if(!B.hidden&&(!B.node||B.changes)){++D}}return D}function Iy(A){if(A.display.pollingFast){return}A.display.poll.set(A.options.pollInterval,function(){L3(A);if(A.state.focused){Iy(A)}})}function Kt(B){var A=false;B.display.pollingFast=true;function C(){var D=L3(B);if(!D&&!A){A=true;B.display.poll.set(60,C)}else{B.display.pollingFast=false;Iy(B)}}B.display.poll.set(20,C)}var Hf=null;function L3(S){var I=S.display.input,H=S.display.prevInput,E=S.doc;if(!S.state.focused||(JO(I)&&!H)||J4(S)||S.options.disableInput){return false}if(S.state.pasteIncoming&&S.state.fakedLastChar){I.value=I.value.substring(0,I.value.length-1);S.state.fakedLastChar=false}var K=I.value;if(K==H&&!S.somethingSelected()){return false}if(Jg&&KO>=9&&S.display.inputHasSelection===K||GA&&/[\uf700-\uf7ff]/.test(K)){Gr(S);return false}var T=!S.curOp;if(T){I2(S)}S.display.shift=false;if(K.charCodeAt(0)==8203&&E.sel==S.display.selForContextMenu&&!H){H="\u200b"}var O=0,B=Math.min(H.length,K.length);while(O<B&&H.charCodeAt(O)==K.charCodeAt(O)){++O}var Q=K.slice(O),P=JR(Q);var M=null;if(S.state.pasteIncoming&&E.sel.ranges.length>1){if(Hf&&Hf.join("\n")==Q){M=E.sel.ranges.length%Hf.length==0&&Lg(Hf,JR)}else{if(P.length==E.sel.ranges.length){M=Lg(P,function(U){return[U]})}}}for(var C=E.sel.ranges.length-1;C>=0;C--){var N=E.sel.ranges[C];var A=N.from(),D=N.to();if(O<H.length){A=KM(A.line,A.ch-(H.length-O))}else{if(S.state.overwrite&&N.empty()&&!S.state.pasteIncoming){D=KM(D.line,Math.min(Gn(E,D.line).text.length,D.ch+Jx(P).length))}}var R=S.curOp.updateInput;var L={from:A,to:D,text:M?M[C%M.length]:P,origin:S.state.pasteIncoming?"paste":S.state.cutIncoming?"cut":"+input"};Mx(S.doc,L);HU(S,"inputRead",S,L);if(Q&&!S.state.pasteIncoming&&S.options.electricChars&&S.options.smartIndent&&N.head.ch<100&&(!C||E.sel.ranges[C-1].head.line!=N.head.line)){var J=S.getModeAt(N.head);var G=LF(L);if(J.electricChars){for(var F=0;F<J.electricChars.length;F++){if(Q.indexOf(J.electricChars.charAt(F))>-1){F7(S,G.line,"smart");break}}}else{if(J.electricInput){if(J.electricInput.test(Gn(E,G.line).text.slice(0,G.ch))){F7(S,G.line,"smart")}}}}}H7(S);S.curOp.updateInput=R;S.curOp.typing=true;if(K.length>1000||K.indexOf("\n")>-1){I.value=S.display.prevInput=""}else{S.display.prevInput=K}if(T){GW(S)}S.state.pasteIncoming=S.state.cutIncoming=false;return true}function Gr(G,A){var D,B,E=G.doc;if(G.somethingSelected()){G.display.prevInput="";var C=E.sel.primary();D=Iv&&(C.to().line-C.from().line>100||(B=G.getSelection()).length>1000);var F=D?"-":B||G.getSelection();G.display.input.value=F;if(G.state.focused){Mc(G.display.input)}if(Jg&&KO>=9){G.display.inputHasSelection=F}}else{if(!A){G.display.prevInput=G.display.input.value="";if(Jg&&KO>=9){G.display.inputHasSelection=null}}}G.display.inaccurateSelection=D}function IQ(A){if(A.options.readOnly!="nocursor"&&(!H0||Jr()!=A.display.input)){A.display.input.focus()}}function Lv(A){if(!A.state.focused){IQ(A);JE(A)}}function J4(A){return A.options.readOnly||A.doc.cantEdit}function Ix(E){var A=E.display;H3(A.scroller,"mousedown",JB(E,GP));if(Jg&&KO<11){H3(A.scroller,"dblclick",JB(E,function(H){if(Gk(E,H)){return}var F=KI(E,H);if(!F||G8(E,H)||JD(E.display,H)){return}JT(H);var G=E.findWordAt(F);LD(E.doc,G.anchor,G.head)}))}else{H3(A.scroller,"dblclick",function(F){Gk(E,F)||JT(F)})}H3(A.lineSpace,"selectstart",function(F){if(!JD(A,F)){JT(F)}});if(!Kw){H3(A.scroller,"contextmenu",function(F){Gs(E,F)})}H3(A.scroller,"scroll",function(){if(A.scroller.clientHeight){Mo(E,A.scroller.scrollTop);Jb(E,A.scroller.scrollLeft,true);Je(E,"scroll",E)}});H3(A.scrollbarV,"scroll",function(){if(A.scroller.clientHeight){Mo(E,A.scrollbarV.scrollTop)}});H3(A.scrollbarH,"scroll",function(){if(A.scroller.clientHeight){Jb(E,A.scrollbarH.scrollLeft)}});H3(A.scroller,"mousewheel",function(F){KN(E,F)});H3(A.scroller,"DOMMouseScroll",function(F){KN(E,F)});function C(){if(E.state.focused){setTimeout(G2(IQ,E),0)}}H3(A.scrollbarH,"mousedown",C);H3(A.scrollbarV,"mousedown",C);H3(A.wrapper,"scroll",function(){A.wrapper.scrollTop=A.wrapper.scrollLeft=0});H3(A.input,"keyup",function(F){GH.call(E,F)});H3(A.input,"input",function(){if(Jg&&KO>=9&&E.display.inputHasSelection){E.display.inputHasSelection=null}Kt(E)});H3(A.input,"keydown",JB(E,GF));H3(A.input,"keypress",JB(E,Hn));H3(A.input,"focus",G2(JE,E));H3(A.input,"blur",G2(HJ,E));function D(F){if(!Gk(E,F)){Ly(F)}}if(E.options.dragDrop){H3(A.scroller,"dragstart",function(F){GE(E,F)});H3(A.scroller,"dragenter",D);H3(A.scroller,"dragover",D);H3(A.scroller,"drop",JB(E,Mz))}H3(A.scroller,"paste",function(F){if(JD(A,F)){return}E.state.pasteIncoming=true;IQ(E);Kt(E)});H3(A.input,"paste",function(){if(GS&&!E.state.fakedLastChar&&!(new Date-E.state.lastMiddleDown<200)){var F=A.input.selectionStart,G=A.input.selectionEnd;A.input.value+="$";A.input.selectionEnd=G;A.input.selectionStart=F;E.state.fakedLastChar=true}E.state.pasteIncoming=true;Kt(E)});function B(H){if(E.somethingSelected()){Hf=E.getSelections();if(A.inaccurateSelection){A.prevInput="";A.inaccurateSelection=false;A.input.value=Hf.join("\n");Mc(A.input)}}else{var F=[],I=[];for(var G=0;G<E.doc.sel.ranges.length;G++){var K=E.doc.sel.ranges[G].head.line;var J={anchor:KM(K,0),head:KM(K+1,0)};I.push(J);F.push(E.getRange(J.anchor,J.head))}if(H.type=="cut"){E.setSelections(I,null,JQ)}else{A.prevInput="";A.input.value=F.join("\n");Mc(A.input)}Hf=F}if(H.type=="cut"){E.state.cutIncoming=true}}H3(A.input,"cut",B);H3(A.input,"copy",B);if(Le){H3(A.sizer,"mouseup",function(){if(Jr()==A.input){A.input.blur()}IQ(E)})}}function Km(A){var B=A.display;B.cachedCharWidth=B.cachedTextHeight=B.cachedPaddingH=null;A.setSize()}function JD(B,C){for(var A=Mn(C);A!=B.wrapper;A=A.parentNode){if(!A||A.ignoreEvents||A.parentNode==B.sizer&&A!=B.mover){return true}}}function KI(H,D,B,A){var C=H.display;if(!B){var G=Mn(D);if(G==C.scrollbarH||G==C.scrollbarV||G==C.scrollbarFiller||G==C.gutterFiller){return null}}var E,F,K=C.lineSpace.getBoundingClientRect();try{E=D.clientX-K.left;F=D.clientY-K.top}catch(D){return null}var L=K9(H,E,F),J;if(A&&L.xRel==1&&(J=Gn(H.doc,L.line).text).length==L.ch){var I=JX(J,J.length,H.options.tabSize)-J.length;L=KM(L.line,Math.max(0,Math.round((E-IA(H.display).left)/LH(H.display))-I))}return L}function GP(C){if(Gk(this,C)){return}var B=this,A=B.display;A.shift=C.shiftKey;if(JD(A,C)){if(!GS){A.scroller.draggable=false;setTimeout(function(){A.scroller.draggable=true},100)}return}if(G8(B,C)){return}var D=KI(B,C);window.focus();switch(KS(C)){case 1:if(D){Kb(B,C,D)}else{if(Mn(C)==A.scroller){JT(C)}}break;case 2:if(GS){B.state.lastMiddleDown=+new Date}if(D){LD(B.doc,D)}setTimeout(G2(IQ,B),20);JT(C);break;case 3:if(Kw){Gs(B,C)}break}}var I0,Jl;function Kb(G,A,B){setTimeout(G2(Lv,G),0);var D=+new Date,F;if(Jl&&Jl.time>D-400&&Gx(Jl.pos,B)==0){F="triple"}else{if(I0&&I0.time>D-400&&Gx(I0.pos,B)==0){F="double";Jl={time:D,pos:B}}else{F="single";I0={time:D,pos:B}}}var E=G.doc.sel,C=GA?A.metaKey:A.ctrlKey;if(G.options.dragDrop&&HK&&!J4(G)&&F=="single"&&E.contains(B)>-1&&E.somethingSelected()){G9(G,A,B,C)}else{HA(G,A,B,F,C)}}function G9(D,A,F,B){var C=D.display;var E=JB(D,function(G){if(GS){C.scroller.draggable=false}D.state.draggingText=false;GG(document,"mouseup",E);GG(C.scroller,"drop",E);if(Math.abs(A.clientX-G.clientX)+Math.abs(A.clientY-G.clientY)<10){JT(G);if(!B){LD(D.doc,F)}IQ(D);if(Jg&&KO==9){setTimeout(function(){document.body.focus();IQ(D)},20)}}});if(GS){C.scroller.draggable=true}D.state.draggingText=E;if(C.scroller.dragDrop){C.scroller.dragDrop()}H3(document,"mouseup",E);H3(C.scroller,"drop",E)}function HA(G,J,P,H,C){var I=G.display,L=G.doc;JT(J);var A,K,R=L.sel;if(C&&!J.shiftKey){K=L.sel.contains(P);if(K>-1){A=L.sel.ranges[K]}else{A=new JI(P,P)}}else{A=L.sel.primary()}if(J.altKey){H="rect";if(!C){A=new JI(P,P)}P=KI(G,J,true,true);K=-1}else{if(H=="double"){var N=G.findWordAt(P);if(G.display.shift||L.extend){A=MA(L,A,N.anchor,N.head)}else{A=N}}else{if(H=="triple"){var M=new JI(KM(P.line,0),G0(L,KM(P.line+1,0)));if(G.display.shift||L.extend){A=MA(L,A,M.anchor,M.head)}else{A=M}}else{A=MA(L,A,P)}}}if(!C){K=0;Jf(L,new K2([A],0),Kd);R=L.sel}else{if(K>-1){MD(L,K,A,Kd)}else{K=L.sel.ranges.length;Jf(L,KE(L.sel.ranges.concat([A]),K),{scroll:false,origin:"*mouse"})}}var E=P;function T(h){if(Gx(E,h)==0){return}E=h;if(H=="rect"){var W=[],c=G.options.tabSize;var V=JX(Gn(L,P.line).text,P.ch,c);var f=JX(Gn(L,h.line).text,h.ch,c);var b=Math.min(V,f),i=Math.max(V,f);for(var Y=Math.min(P.line,h.line),X=Math.min(G.lastLine(),Math.max(P.line,h.line));Y<=X;Y++){var U=Gn(L,Y).text,a=Jm(U,b,c);if(b==i){W.push(new JI(KM(Y,a),KM(Y,a)))}else{if(U.length>a){W.push(new JI(KM(Y,a),KM(Y,Jm(U,i,c))))}}}if(!W.length){W.push(new JI(P,P))}Jf(L,KE(R.ranges.slice(0,K).concat(W),K),{origin:"*mouse",scroll:false});G.scrollIntoView(h)}else{var g=A;var Z=g.anchor,e=h;if(H!="single"){if(H=="double"){var d=G.findWordAt(h)}else{var d=new JI(KM(h.line,0),G0(L,KM(h.line+1,0)))}if(Gx(d.anchor,Z)>0){e=d.head;Z=JG(g.from(),d.anchor)}else{e=d.anchor;Z=L2(g.to(),d.head)}}var W=R.ranges.slice(0);W[K]=new JI(G0(L,Z),e);Jf(L,KE(W,K),Kd)}}var S=I.wrapper.getBoundingClientRect();var B=0;function Q(Y){var V=++B;var W=KI(G,Y,true,H=="rect");if(!W){return}if(Gx(W,E)!=0){Lv(G);T(W);var U=Ih(I,L);if(W.line>=U.to||W.line<U.from){setTimeout(JB(G,function(){if(B==V){Q(Y)}}),150)}}else{var X=Y.clientY<S.top?-20:Y.clientY>S.bottom?20:0;if(X){setTimeout(JB(G,function(){if(B!=V){return}I.scroller.scrollTop+=X;Q(Y)}),50)}}}function D(U){B=Infinity;JT(U);IQ(G);GG(document,"mousemove",O);GG(document,"mouseup",F);L.history.lastSelOrigin=null}var O=JB(G,function(U){if(!KS(U)){D(U)}else{Q(U)}});var F=JB(G,D);H3(document,"mousemove",O);H3(document,"mouseup",F)}function IN(L,D,K,F,J){try{var A=D.clientX,G=D.clientY}catch(D){return false}if(A>=Math.floor(L.display.gutters.getBoundingClientRect().right)){return false}if(F){JT(D)}var H=L.display;var E=H.lineDiv.getBoundingClientRect();if(G>E.bottom||!Hx(L,K)){return Jz(D)}G-=E.top-H.viewOffset;for(var B=0;B<L.options.gutters.length;++B){var M=H.gutters.childNodes[B];if(M&&M.getBoundingClientRect().right>=A){var I=G4(L.doc,G);var C=L.options.gutters[B];J(L,K,L,I,C,D);return Jz(D)}}}function G8(A,B){return IN(A,B,"gutterClick",true,HU)}var Jd=0;function Mz(D){var B=this;if(Gk(B,D)||JD(B.display,D)){return}JT(D);if(Jg){Jd=+new Date}var E=KI(B,D,true),J=D.dataTransfer.files;if(!E||J4(B)){return}if(J&&J.length&&window.FileReader&&window.File){var I=J.length,H=Array(I),A=0;var C=function(M,L){var K=new FileReader;K.onload=JB(B,function(){H[L]=K.result;if(++A==I){E=G0(B.doc,E);var N={from:E,to:E,text:JR(H.join("\n")),origin:"paste"};Mx(B.doc,N);Ja(B.doc,Ju(E,LF(N)))}});K.readAsText(M)};for(var G=0;G<I;++G){C(J[G],G)}}else{if(B.state.draggingText&&B.doc.sel.contains(E)>-1){B.state.draggingText(D);setTimeout(G2(IQ,B),20);return}try{var H=D.dataTransfer.getData("Text");if(H){if(B.state.draggingText&&!(GA?D.metaKey:D.ctrlKey)){var F=B.listSelections()}Gi(B.doc,Ju(E,E));if(F){for(var G=0;G<F.length;++G){LX(B.doc,"",F[G].anchor,F[G].head,"drag")}}B.replaceSelection(H,"around","paste");IQ(B)}}catch(D){}}}function GE(B,C){if(Jg&&(!B.state.draggingText||+new Date-Jd<100)){Ly(C);return}if(Gk(B,C)||JD(B.display,C)){return}C.dataTransfer.setData("Text",B.getSelection());if(C.dataTransfer.setDragImage&&!I7){var A=Kj("img",null,null,"position: fixed; left: 0; top: 0;");A.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";if(L1){A.width=A.height=1;B.display.wrapper.appendChild(A);A._top=A.offsetTop}C.dataTransfer.setDragImage(A,0,0);if(L1){A.parentNode.removeChild(A)}}}function Mo(A,B){if(Math.abs(A.doc.scrollTop-B)<2){return}A.doc.scrollTop=B;if(!IL){Ml(A,{top:B})}if(A.display.scroller.scrollTop!=B){A.display.scroller.scrollTop=B}if(A.display.scrollbarV.scrollTop!=B){A.display.scrollbarV.scrollTop=B}if(IL){Ml(A)}Mb(A,100)}function Jb(B,A,C){if(C?A==B.doc.scrollLeft:Math.abs(B.doc.scrollLeft-A)<2){return}A=Math.min(A,B.display.scroller.scrollWidth-B.display.scroller.clientWidth);B.doc.scrollLeft=A;LR(B);if(B.display.scroller.scrollLeft!=A){B.display.scroller.scrollLeft=A}if(B.display.scrollbarH.scrollLeft!=A){B.display.scrollbarH.scrollLeft=A}}var Jc=0,L9=null;if(Jg){L9=-0.53}else{if(IL){L9=15}else{if(Jk){L9=-0.7}else{if(I7){L9=-1/3}}}}function KN(B,D){var J=D.wheelDeltaX,H=D.wheelDeltaY;if(J==null&&D.detail&&D.axis==D.HORIZONTAL_AXIS){J=D.detail}if(H==null&&D.detail&&D.axis==D.VERTICAL_AXIS){H=D.detail}else{if(H==null){H=D.wheelDelta}}var F=B.display,I=F.scroller;if(!(J&&I.scrollWidth>I.clientWidth||H&&I.scrollHeight>I.clientHeight)){return}if(H&&GA&&GS){outer:for(var A=D.target,C=F.view;A!=I;A=A.parentNode){for(var E=0;E<C.length;E++){if(C[E].node==A){B.display.currentWheelTarget=A;break outer}}}}if(J&&!IL&&!L1&&L9!=null){if(H){Mo(B,Math.max(0,Math.min(I.scrollTop+H*L9,I.scrollHeight-I.clientHeight)))}Jb(B,Math.max(0,Math.min(I.scrollLeft+J*L9,I.scrollWidth-I.clientWidth)));JT(D);F.wheelStartX=null;return}if(H&&L9!=null){var L=H*L9;var G=B.doc.scrollTop,K=G+F.wrapper.clientHeight;if(L<0){G=Math.max(0,G+L-50)}else{K=Math.min(B.doc.height,K+L+50)}Ml(B,{top:G,bottom:K})}if(Jc<20){if(F.wheelStartX==null){F.wheelStartX=I.scrollLeft;F.wheelStartY=I.scrollTop;F.wheelDX=J;F.wheelDY=H;setTimeout(function(){if(F.wheelStartX==null){return}var N=I.scrollLeft-F.wheelStartX;var M=I.scrollTop-F.wheelStartY;var O=(M&&F.wheelDY&&M/F.wheelDY)||(N&&F.wheelDX&&N/F.wheelDX);F.wheelStartX=F.wheelStartY=null;if(!O){return}L9=(L9*Jc+O)/(Jc+1);++Jc},200)}else{F.wheelDX+=J;F.wheelDY+=H}}}function IZ(E,A,C){if(typeof A=="string"){A=GZ[A];if(!A){return false}}if(E.display.pollingFast&&L3(E)){E.display.pollingFast=false}var D=E.display.shift,B=false;try{if(J4(E)){E.state.suppressEdits=true}if(C){E.display.shift=false}B=A(E)!=LG}finally{E.display.shift=D;E.state.suppressEdits=false}return B}function KB(A){var B=A.state.keyMaps.slice(0);if(A.options.extraKeys){B.push(A.options.extraKeys)}B.push(A.options.keyMap);return B}var JZ;function Ke(B,C){var D=JS(B.options.keyMap),E=D.auto;clearTimeout(JZ);if(E&&!HI(C)){JZ=setTimeout(function(){if(JS(B.options.keyMap)==D){B.options.keyMap=(E.call?E.call(null,B):E);JP(B)}},50)}var G=F2(C,true),A=false;if(!G){return false}var F=KB(B);if(C.shiftKey){A=IJ("Shift-"+G,F,function(H){return IZ(B,H,true)})||IJ(G,F,function(H){if(typeof H=="string"?/^go[A-Z]/.test(H):H.motion){return IZ(B,H)}})}else{A=IJ(G,F,function(H){return IZ(B,H)})}if(A){JT(C);IH(B);HU(B,"keyHandled",B,G,C)}return A}function K5(C,A,B){var D=IJ("'"+B+"'",KB(C),function(E){return IZ(C,E,true)});if(D){JT(A);IH(C);HU(C,"keyHandled",C,"'"+B+"'",A)}return D}var KC=null;function GF(A){var C=this;Lv(C);if(Gk(C,A)){return}if(Jg&&KO<11&&A.keyCode==27){A.returnValue=false}var B=A.keyCode;C.display.shift=B==16||A.shiftKey;var D=Ke(C,A);if(L1){KC=D?B:null;if(!D&&B==88&&!Iv&&(GA?A.metaKey:A.ctrlKey)){C.replaceSelection("",null,"cut")}}if(B==18&&!/\bCodeMirror-crosshair\b/.test(C.display.lineDiv.className)){IR(C)}}function IR(A){var C=A.display.lineDiv;Mv(C,"CodeMirror-crosshair");function B(D){if(D.keyCode==18||!D.altKey){Hl(C,"CodeMirror-crosshair");GG(document,"keyup",B);GG(document,"mouseover",B)}}H3(document,"keyup",B);H3(document,"mouseover",B)}function GH(A){if(A.keyCode==16){this.doc.sel.shift=false}Gk(this,A)}function Hn(C){var E=this;if(Gk(E,C)||C.ctrlKey&&!C.altKey||GA&&C.metaKey){return}var A=C.keyCode,D=C.charCode;if(L1&&A==KC){KC=null;JT(C);return}if(((L1&&(!C.which||C.which<10))||Le)&&Ke(E,C)){return}var B=String.fromCharCode(D==null?A:D);if(K5(E,C,B)){return}if(Jg&&KO>=9){E.display.inputHasSelection=null}Kt(E)}function JE(A){if(A.options.readOnly=="nocursor"){return}if(!A.state.focused){Je(A,"focus",A);A.state.focused=true;Mv(A.display.wrapper,"CodeMirror-focused");if(!A.curOp&&A.display.selForContextMenu!=A.doc.sel){Gr(A);if(GS){setTimeout(G2(Gr,A,true),0)}}}Iy(A);IH(A)}function HJ(A){if(A.state.focused){Je(A,"blur",A);A.state.focused=false;Hl(A.display.wrapper,"CodeMirror-focused")}clearInterval(A.display.blinker);setTimeout(function(){if(!A.state.focused){A.display.shift=false}},150)}function Gs(I,E){if(Gk(I,E,"contextmenu")){return}var D=I.display;if(JD(D,E)||HH(I,E)){return}var F=KI(I,E),G=D.scroller.scrollTop;if(!F||L1){return}var K=I.options.resetSelectionOnContextMenu;if(K&&I.doc.sel.contains(F)==-1){JB(I,Jf)(I.doc,Ju(F),JQ)}var B=D.input.style.cssText;D.inputDiv.style.position="absolute";D.input.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(E.clientY-5)+"px; left: "+(E.clientX-5)+"px; z-index: 1000; background: "+(Jg?"rgba(255, 255, 255, .05)":"transparent")+"; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";if(GS){var H=window.scrollY}IQ(I);if(GS){window.scrollTo(null,H)}Gr(I);if(!I.somethingSelected()){D.input.value=D.prevInput=" "}D.selForContextMenu=I.doc.sel;clearTimeout(D.detectingSelectAll);function C(){if(D.input.selectionStart!=null){var M=I.somethingSelected();var L=D.input.value="\u200b"+(M?D.input.value:"");D.prevInput=M?"":"\u200b";D.input.selectionStart=1;D.input.selectionEnd=L.length;D.selForContextMenu=I.doc.sel}}function A(){D.inputDiv.style.position="relative";D.input.style.cssText=B;if(Jg&&KO<9){D.scrollbarV.scrollTop=D.scroller.scrollTop=G}Iy(I);if(D.input.selectionStart!=null){if(!Jg||(Jg&&KO<9)){C()}var L=0,M=function(){if(D.selForContextMenu==I.doc.sel&&D.input.selectionStart==0){JB(I,GZ.selectAll)(I)}else{if(L++<10){D.detectingSelectAll=setTimeout(M,500)}else{Gr(I)}}};D.detectingSelectAll=setTimeout(M,200)}}if(Jg&&KO>=9){C()}if(Kw){Ly(E);var J=function(){GG(window,"mouseup",J);setTimeout(A,20)};H3(window,"mouseup",J)}else{setTimeout(A,50)}}function HH(A,B){if(!Hx(A,"gutterContextMenu")){return false}return IN(A,B,"gutterContextMenu",false,Je)}var LF=HC.changeEnd=function(A){if(!A.text){return A.to}return KM(A.from.line+A.text.length-1,Jx(A.text).length+(A.text.length==1?A.from.ch:0))};function KW(A,C){if(Gx(A,C.from)<0){return A}if(Gx(A,C.to)<=0){return LF(C)}var D=A.line+C.text.length-(C.to.line-C.from.line)-1,B=A.ch;if(A.line==C.to.line){B+=LF(C).ch-C.to.ch}return KM(D,B)}function Is(E,A){var B=[];for(var C=0;C<E.sel.ranges.length;C++){var D=E.sel.ranges[C];B.push(new JI(KW(D.anchor,A),KW(D.head,A)))}return KE(B,E.sel.primIndex)}function Hv(B,A,C){if(B.line==A.line){return KM(C.line,B.ch-A.ch+C.ch)}else{return KM(C.line+(B.line-A.line),B.ch)}}function LQ(I,K,G){var E=[];var L=KM(I.first,0),J=L;for(var C=0;C<K.length;C++){var F=K[C];var D=Hv(F.from,L,J);var B=Hv(LF(F),L,J);L=F.to;J=B;if(G=="around"){var A=I.sel.ranges[C],H=Gx(A.head,A.anchor)<0;E[C]=new JI(H?B:D,H?D:B)}else{E[C]=new JI(D,D)}}return new K2(E,I.sel.primIndex)}function HB(C,A,D){var B={canceled:false,from:A.from,to:A.to,text:A.text,origin:A.origin,cancel:function(){this.canceled=true}};if(D){B.update=function(G,H,E,F){if(G){this.from=G0(C,G)}if(H){this.to=G0(C,H)}if(E){this.text=E}if(F!==undefined){this.origin=F}}}Je(C,"beforeChange",C,B);if(C.cm){Je(C.cm,"beforeChange",C.cm,B)}if(B.canceled){return null}return{from:B.from,to:B.to,text:B.text,origin:B.origin}}function Mx(E,A,C){if(E.cm){if(!E.cm.curOp){return JB(E.cm,Mx)(E,A,C)}if(E.cm.state.suppressEdits){return}}if(Hx(E,"beforeChange")||E.cm&&Hx(E.cm,"beforeChange")){A=HB(E,A,true);if(!A){return}}var D=Jy&&!C&&IV(E,A.from,A.to);if(D){for(var B=D.length-1;B>=0;--B){LW(E,{from:D[B].from,to:D[B].to,text:B?[""]:A.text})}}else{LW(E,A)}}function LW(C,D){if(D.text.length==1&&D.text[0]==""&&Gx(D.from,D.to)==0){return}var A=Is(C,D);Kk(C,D,A,C.cm?C.cm.curOp.id:NaN);It(C,D,A,I9(C,D));var B=[];Kf(C,function(F,E){if(!E&&KZ(B,F.history)==-1){LO(F.history,D);B.push(F.history)}It(F,D,null,I9(F,D))})}function GB(J,K,D){if(J.cm&&J.cm.state.suppressEdits){return}var M=J.history,B,A=J.sel;var I=K=="undo"?M.done:M.undone,F=K=="undo"?M.undone:M.done;for(var H=0;H<I.length;H++){B=I[H];if(D?B.ranges&&!B.equals(J.sel):!B.ranges){break}}if(H==I.length){return}M.lastOrigin=M.lastSelOrigin=null;for(;;){B=I.pop();if(B.ranges){Hk(B,F);if(D&&!B.equals(J.sel)){Jf(J,B,{clearRedo:false});return}A=B}else{break}}var E=[];Hk(A,F);F.push({changes:E,generation:M.generation});M.generation=B.generation||++M.maxGeneration;var L=Hx(J,"beforeChange")||J.cm&&Hx(J.cm,"beforeChange");for(var H=B.changes.length-1;H>=0;--H){var C=B.changes[H];C.origin=K;if(L&&!HB(J,C,false)){I.length=0;return}E.push(Ld(J,C));var N=H?Is(J,C):Jx(I);It(J,C,N,Ma(J,C));if(!H&&J.cm){J.cm.scrollIntoView({from:C.from,to:LF(C)})}var G=[];Kf(J,function(O,P){if(!P&&KZ(G,O.history)==-1){LO(O.history,C);G.push(O.history)}It(O,C,null,Ma(O,C))})}}function L0(C,B){if(B==0){return}C.first+=B;C.sel=new K2(Lg(C.sel.ranges,function(E){return new JI(KM(E.anchor.line+B,E.anchor.ch),KM(E.head.line+B,E.head.ch))}),C.sel.primIndex);if(C.cm){GI(C.cm,C.first,C.first-B,B);for(var D=C.cm.display,A=D.viewFrom;A<D.viewTo;A++){Gh(C.cm,A,"gutter")}}}function It(F,C,B,A){if(F.cm&&!F.cm.curOp){return JB(F.cm,It)(F,C,B,A)}if(C.to.line<F.first){L0(F,C.text.length-1-(C.to.line-C.from.line));return}if(C.from.line>F.lastLine()){return}if(C.from.line<F.first){var E=C.text.length-1-(F.first-C.from.line);L0(F,E);C={from:KM(F.first,0),to:KM(C.to.line+E,C.to.ch),text:[Jx(C.text)],origin:C.origin}}var D=F.lastLine();if(C.to.line>D){C={from:C.from,to:KM(D,Gn(F,D).text.length),text:[C.text[0]],origin:C.origin}}C.removed=Hj(F,C.from,C.to);if(!B){B=Is(F,C)}if(F.cm){LM(F.cm,C,A)}else{HX(F,C,A)}Gi(F,B,JQ)}function LM(C,D,L){var J=C.doc,E=C.display,A=D.from,M=D.to;var F=false,H=A.line;if(!C.options.lineWrapping){H=Jp(Hh(Gn(J,A.line)));J.iter(H,M.line+1,function(N){if(N==E.maxLine){F=true;return true}})}if(J.sel.contains(D.from,D.to)>-1){Mw(C)}HX(J,D,L,Gz(C));if(!C.options.lineWrapping){J.iter(H,A.line+D.text.length,function(O){var N=F5(O);if(N>E.maxLineLength){E.maxLine=O;E.maxLineLength=N;E.maxLineChanged=true;F=false}});if(F){C.curOp.updateMaxLine=true}}J.frontier=Math.min(J.frontier,A.line);Mb(C,400);var I=D.text.length-(M.line-A.line)-1;if(A.line==M.line&&D.text.length==1&&!J6(C.doc,D)){Gh(C,A.line,"text")}else{GI(C,A.line,M.line+1,I)}var G=Hx(C,"changes"),B=Hx(C,"change");if(B||G){var K={from:A,to:M,text:D.text,removed:D.removed,origin:D.origin};if(B){HU(C,"change",C,K)}if(G){(C.curOp.changeObjs||(C.curOp.changeObjs=[])).push(K)}}C.display.selForContextMenu=null}function LX(F,B,A,C,D){if(!C){C=A}if(Gx(C,A)<0){var E=C;C=A;A=E}if(typeof B=="string"){B=JR(B)}Mx(F,{from:A,to:C,text:B,origin:D})}function IG(F,A){var B=F.display,C=B.sizer.getBoundingClientRect(),D=null;if(A.top+C.top<0){D=true}else{if(A.bottom+C.top>(window.innerHeight||document.documentElement.clientHeight)){D=false}}if(D!=null&&!HQ){var E=Kj("div","\u200b",null,"position: absolute; top: "+(A.top-B.viewOffset-HN(F.display))+"px; height: "+(A.bottom-A.top+IB)+"px; left: "+A.left+"px; width: 2px;");F.display.lineSpace.appendChild(E);E.scrollIntoView(D);F.display.lineSpace.removeChild(E)}}function Lb(K,H,A,D){if(D==null){D=0}for(var E=0;E<5;E++){var F=false,I=Iz(K,H);var G=!A||A==H?I:Iz(K,A);var J=H4(K,Math.min(I.left,G.left),Math.min(I.top,G.top)-D,Math.max(I.left,G.left),Math.max(I.bottom,G.bottom)+D);var B=K.doc.scrollTop,C=K.doc.scrollLeft;if(J.scrollTop!=null){Mo(K,J.scrollTop);if(Math.abs(K.doc.scrollTop-B)>1){F=true}}if(J.scrollLeft!=null){Jb(K,J.scrollLeft);if(Math.abs(K.doc.scrollLeft-C)>1){F=true}}if(!F){return I}}}function K1(F,D,C,E,A){var B=H4(F,D,C,E,A);if(B.scrollTop!=null){Mo(F,B.scrollTop)}if(B.scrollLeft!=null){Jb(F,B.scrollLeft)}}function H4(B,H,J,N,P){var A=B.display,Q=LE(B.display);if(J<0){J=0}var C=B.curOp&&B.curOp.scrollTop!=null?B.curOp.scrollTop:A.scroller.scrollTop;var D=A.scroller.clientHeight-IB,K={};if(P-J>D){P=J+D}var I=B.doc.height+JN(A);var L=J<Q,O=P>I-Q;if(J<C){K.scrollTop=L?0:J}else{if(P>C+D){var E=Math.min(J,(O?I:P)-D);if(E!=C){K.scrollTop=E}}}var F=B.curOp&&B.curOp.scrollLeft!=null?B.curOp.scrollLeft:A.scroller.scrollLeft;var M=A.scroller.clientWidth-IB-A.gutters.offsetWidth;var G=N-H>M;if(G){N=H+M}if(H<10){K.scrollLeft=0}else{if(H<F){K.scrollLeft=Math.max(0,H-(G?0:10))}else{if(N>M+F-3){K.scrollLeft=N+(G?0:10)-M}}}return K}function HS(B,C,A){if(C!=null||A!=null){He(B)}if(C!=null){B.curOp.scrollLeft=(B.curOp.scrollLeft==null?B.doc.scrollLeft:B.curOp.scrollLeft)+C}if(A!=null){B.curOp.scrollTop=(B.curOp.scrollTop==null?B.doc.scrollTop:B.curOp.scrollTop)+A}}function H7(C){He(C);var D=C.getCursor(),A=D,B=D;if(!C.options.lineWrapping){A=D.ch?KM(D.line,D.ch-1):D;B=KM(D.line,D.ch+1)}C.curOp.scrollToPos={from:A,to:B,margin:C.options.cursorScrollMargin,isCursor:true}}function He(D){var C=D.curOp.scrollToPos;if(C){D.curOp.scrollToPos=null;var E=Lq(D,C.from),B=Lq(D,C.to);var A=H4(D,Math.min(E.left,B.left),Math.min(E.top,B.top)-C.margin,Math.max(E.right,B.right),Math.max(E.bottom,B.bottom)+C.margin);D.scrollTo(A.scrollLeft,A.scrollTop)}}function F7(N,L,K,E){var D=N.doc,J;if(K==null){K="add"}if(K=="smart"){if(!D.mode.indent){K="prev"}else{J=Ic(N,L)}}var M=N.options.tabSize;var A=Gn(D,L),I=JX(A.text,null,M);if(A.stateAfter){A.stateAfter=null}var F=A.text.match(/^\s*/)[0],B;if(!E&&!/\S/.test(A.text)){B=0;K="not"}else{if(K=="smart"){B=D.mode.indent(J,A.text.slice(F.length),A.text);if(B==LG||B>150){if(!E){return}K="prev"}}}if(K=="prev"){if(L>D.first){B=JX(Gn(D,L-1).text,null,M)}else{B=0}}else{if(K=="add"){B=I+N.options.indentUnit}else{if(K=="subtract"){B=I-N.options.indentUnit}else{if(typeof K=="number"){B=I+K}}}}B=Math.max(0,B);var C="",H=0;if(N.options.indentWithTabs){for(var O=Math.floor(B/M);O;--O){H+=M;C+="\t"}}if(H<B){C+=LZ(B-H)}if(C!=F){LX(D,C,KM(L,0),KM(L,F.length),"+input")}else{for(var O=0;O<D.sel.ranges.length;O++){var G=D.sel.ranges[O];if(G.head.line==L&&G.head.ch<F.length){var H=KM(L,F.length);MD(D,O,new JI(H,H));break}}}A.stateAfter=null}function Mp(F,C,E,B){var A=C,D=C;if(typeof C=="number"){D=Gn(F,Iw(F,C))}else{A=Jp(C)}if(A==null){return null}if(B(D,A)&&F.cm){Gh(F.cm,A,E)}return D}function J2(B,G){var D=B.doc.sel.ranges,C=[];for(var A=0;A<D.length;A++){var F=G(D[A]);while(C.length&&Gx(F.from,Jx(C).to)<=0){var E=C.pop();if(Gx(E.from,F.from)<0){F.from=E.from;break}}C.push(F)}Gm(B,function(){for(var H=C.length-1;H>=0;H--){LX(B.doc,"",C[H].from,C[H].to,"+delete")}H7(B)})}function Hu(B,H,F,A,Q){var P=H.line,S=H.ch,K=F;var N=Gn(B,P);var O=true;function E(){var T=P+F;if(T<B.first||T>=B.first+B.size){return(O=false)}P=T;return N=Gn(B,T)}function J(U){var T=(Q?LP:K7)(N,S,F,true);if(T==null){if(!U&&E()){if(Q){S=(F<0?IS:Gq)(N)}else{S=F<0?N.text.length:0}}else{return(O=false)}}else{S=T}return true}if(A=="char"){J()}else{if(A=="column"){J(true)}else{if(A=="word"||A=="group"){var M=null,I=A=="group";var L=B.cm&&B.cm.getHelper(H,"wordChars");for(var D=true;;D=false){if(F<0&&!J(!D)){break}var C=N.text.charAt(S)||"\n";var R=Jj(C,L)?"w":I&&C=="\n"?"n":!I||/\s/.test(C)?null:"p";if(I&&!D&&!R){R="s"}if(M&&M!=R){if(F<0){F=1;J()}break}if(R){M=R}if(F>0&&!J(!D)){break}}}}}var G=Lw(B,KM(P,S),K,true);if(!O){G.hitSide=true}return G}function Li(I,D,C,E){var A=I.doc,G=D.left,H;if(E=="page"){var B=Math.min(I.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);H=D.top+C*(B-(C<0?1.5:0.5)*LE(I.display))}else{if(E=="line"){H=C>0?D.bottom+3:D.top-3}}for(;;){var F=K9(I,G,H);if(!F.outside){break}if(C<0?H<=0:H>=A.height){F.hitSide=true;break}H+=C*5}return F}HC.prototype={constructor:HC,focus:function(){window.focus();IQ(this);Kt(this)},setOption:function(C,A){var B=this.options,D=B[C];if(B[C]==A&&C!="mode"){return}B[C]=A;if(L7.hasOwnProperty(C)){JB(this,L7[C])(this,A,D)}},getOption:function(A){return this.options[A]},getDoc:function(){return this.doc},addKeyMap:function(B,A){this.state.keyMaps[A?"push":"unshift"](B)},removeKeyMap:function(A){var B=this.state.keyMaps;for(var C=0;C<B.length;++C){if(B[C]==A||(typeof B[C]!="string"&&B[C].name==A)){B.splice(C,1);return true}}},addOverlay:JF(function(B,A){var C=B.token?B:HC.getMode(this.options,B);if(C.startState){throw new Error("Overlays may not be stateful.")}this.state.overlays.push({mode:C,modeSpec:B,opaque:A&&A.opaque});this.state.modeGen++;GI(this)}),removeOverlay:JF(function(C){var B=this.state.overlays;for(var A=0;A<B.length;++A){var D=B[A].modeSpec;if(D==C||typeof C=="string"&&D.name==C){B.splice(A,1);this.state.modeGen++;GI(this);return}}}),indentLine:JF(function(B,C,A){if(typeof C!="string"&&typeof C!="number"){if(C==null){C=this.options.smartIndent?"smart":"prev"}else{C=C?"add":"subtract"}}if(Lt(this.doc,B)){F7(this,B,C,A)}}),indentSelection:JF(function(E){var H=this.doc.sel.ranges,I=-1;for(var J=0;J<H.length;J++){var G=H[J];if(!G.empty()){var D=G.from(),C=G.to();var A=Math.max(I,D.line);I=Math.min(this.lastLine(),C.line-(C.ch?0:1))+1;for(var B=A;B<I;++B){F7(this,B,E)}var F=this.doc.sel.ranges;if(D.ch==0&&H.length==F.length&&F[J].from().ch>0){MD(this.doc,J,new JI(D,F[J].to()),JQ)}}else{if(G.head.line>I){F7(this,G.head.line,E,true);I=G.head.line;if(J==this.doc.sel.primIndex){H7(this)}}}}}),getTokenAt:function(F,D){var G=this.doc;F=G0(G,F);var A=Ic(this,F.line,D),E=this.doc.mode;var C=Gn(G,F.line);var H=new Ls(C.text,this.options.tabSize);while(H.pos<F.ch&&!H.eol()){H.start=H.pos;var B=MB(E,H,A)}return{start:H.start,end:H.pos,string:H.current(),type:B||null,state:A}},getTokenTypeAt:function(H){H=G0(this.doc,H);var E=J8(this,Gn(this.doc,H.line));var C=0,G=(E.length-1)/2,A=H.ch;var D;if(A==0){D=E[2]}else{for(;;){var F=(C+G)>>1;if((F?E[F*2-1]:0)>=A){G=F}else{if(E[F*2+1]<A){C=F+1}else{D=E[F*2+2];break}}}}var B=D?D.indexOf("cm-overlay "):-1;return B<0?D:B==0?null:D.slice(0,B-1)},getModeAt:function(A){var B=this.doc.mode;if(!B.innerMode){return B}return HC.innerMode(B,this.getTokenAt(A).state).mode},getHelper:function(A,B){return this.getHelpers(A,B)[0]},getHelpers:function(H,C){var A=[];if(!Gd.hasOwnProperty(C)){return Gd}var E=Gd[C],F=this.getModeAt(H);if(typeof F[C]=="string"){if(E[F[C]]){A.push(E[F[C]])}}else{if(F[C]){for(var D=0;D<F[C].length;D++){var G=E[F[C][D]];if(G){A.push(G)}}}else{if(F.helperType&&E[F.helperType]){A.push(E[F.helperType])}else{if(E[F.name]){A.push(E[F.name])}}}}for(var D=0;D<E._global.length;D++){var B=E._global[D];if(B.pred(F,this)&&KZ(A,B.val)==-1){A.push(B.val)}}return A},getStateAfter:function(C,A){var B=this.doc;C=Iw(B,C==null?B.first+B.size-1:C);return Ic(this,C+1,A)},cursorCoords:function(B,C){var A,D=this.doc.sel.primary();if(B==null){A=D.head}else{if(typeof B=="object"){A=G0(this.doc,B)}else{A=B?D.from():D.to()}}return Iz(this,A,C||"page")},charCoords:function(A,B){return Kz(this,G0(this.doc,A),B||"page")},coordsChar:function(B,A){B=Js(this,B,A||"page");return K9(this,B.left,B.top)},lineAtHeight:function(B,A){B=Js(this,{top:B,left:0},A||"page").top;return G4(this.doc,B+this.display.viewOffset)},heightAtLine:function(C,A){var B=false,D=this.doc.first+this.doc.size-1;if(C<this.doc.first){C=this.doc.first}else{if(C>D){C=D;B=true}}var E=Gn(this.doc,C);return I4(this,E,{top:0,left:0},A||"page").top+(B?this.doc.height-Mm(E):0)},defaultTextHeight:function(){return LE(this.display)},defaultCharWidth:function(){return LH(this.display)},setGutterMarker:JF(function(B,A,C){return Mp(this.doc,B,"gutter",function(E){var D=E.gutterMarkers||(E.gutterMarkers={});D[A]=C;if(!C&&JH(D)){E.gutterMarkers=null}return true})}),clearGutter:JF(function(A){var B=this,C=B.doc,D=C.first;C.iter(function(E){if(E.gutterMarkers&&E.gutterMarkers[A]){E.gutterMarkers[A]=null;Gh(B,D,"gutter");if(JH(E.gutterMarkers)){E.gutterMarkers=null}}++D})}),addLineWidget:JF(function(C,A,B){return KH(this,C,A,B)}),removeLineWidget:function(A){A.clear()},lineInfo:function(A){if(typeof A=="number"){if(!Lt(this.doc,A)){return null}var B=A;A=Gn(this.doc,A);if(!A){return null}}else{var B=Jp(A);if(B==null){return null}}return{line:B,handle:A,text:A.text,gutterMarkers:A.gutterMarkers,textClass:A.textClass,bgClass:A.bgClass,wrapClass:A.wrapClass,widgets:A.widgets}},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(H,D,E,J,C){var F=this.display;H=Iz(this,G0(this.doc,H));var I=H.bottom,A=H.left;D.style.position="absolute";F.sizer.appendChild(D);if(J=="over"){I=H.top}else{if(J=="above"||J=="near"){var B=Math.max(F.wrapper.clientHeight,this.doc.height),G=Math.max(F.sizer.clientWidth,F.lineSpace.clientWidth);if((J=="above"||H.bottom+D.offsetHeight>B)&&H.top>D.offsetHeight){I=H.top-D.offsetHeight}else{if(H.bottom+D.offsetHeight<=B){I=H.bottom}}if(A+D.offsetWidth>G){A=G-D.offsetWidth}}}D.style.top=I+"px";D.style.left=D.style.right="";if(C=="right"){A=F.sizer.clientWidth-D.offsetWidth;D.style.right="0px"}else{if(C=="left"){A=0}else{if(C=="middle"){A=(F.sizer.clientWidth-D.offsetWidth)/2}}D.style.left=A+"px"}if(E){K1(this,A,I,A+D.offsetWidth,I+D.offsetHeight)}},triggerOnKeyDown:JF(GF),triggerOnKeyPress:JF(Hn),triggerOnKeyUp:GH,execCommand:function(A){if(GZ.hasOwnProperty(A)){return GZ[A](this)}},findPosH:function(A,B,D,G){var F=1;if(B<0){F=-1;B=-B}for(var C=0,E=G0(this.doc,A);C<B;++C){E=Hu(this.doc,E,F,D,G);if(E.hitSide){break}}return E},moveH:JF(function(C,A){var B=this;B.extendSelectionsBy(function(D){if(B.display.shift||B.doc.extend||D.empty()){return Hu(B.doc,D.head,C,A,B.options.rtlMoveVisually)}else{return C<0?D.from():D.to()}},KA)}),deleteH:JF(function(C,A){var B=this.doc.sel,D=this.doc;if(B.somethingSelected()){D.replaceSelection("",null,"+delete")}else{J2(this,function(E){var F=Hu(D,E.head,C,A,false);return C<0?{from:F,to:E.head}:{from:E.head,to:F}})}}),findPosV:function(H,B,G,D){var I=1,F=D;if(B<0){I=-1;B=-B}for(var C=0,E=G0(this.doc,H);C<B;++C){var A=Iz(this,E,"div");if(F==null){F=A.left}else{A.left=F}E=Li(this,A,I,G);if(E.hitSide){break}}return E},moveV:JF(function(D,A){var G=this,B=this.doc,E=[];var F=!G.display.shift&&!B.extend&&B.sel.somethingSelected();B.extendSelectionsBy(function(J){if(F){return D<0?J.from():J.to()}var H=Iz(G,J.head,"div");if(J.goalColumn!=null){H.left=J.goalColumn}E.push(H.left);var I=Li(G,H,D,A);if(A=="page"&&J==B.sel.primary()){HS(G,null,Kz(G,I,"div").top-H.top)}return I},KA);if(E.length){for(var C=0;C<B.sel.ranges.length;C++){B.sel.ranges[C].goalColumn=E[C]}}}),findWordAt:function(H){var G=this.doc,C=Gn(G,H.line).text;var F=H.ch,A=H.ch;if(C){var D=this.getHelper(H,"wordChars");if((H.xRel<0||A==C.length)&&F){--F}else{++A}var E=C.charAt(F);var B=Jj(E,D)?function(I){return Jj(I,D)}:/\s/.test(E)?function(I){return/\s/.test(I)}:function(I){return !/\s/.test(I)&&!Jj(I)};while(F>0&&B(C.charAt(F-1))){--F}while(A<C.length&&B(C.charAt(A))){++A}}return new JI(KM(H.line,F),KM(H.line,A))},toggleOverwrite:function(A){if(A!=null&&A==this.state.overwrite){return}if(this.state.overwrite=!this.state.overwrite){Mv(this.display.cursorDiv,"CodeMirror-overwrite")}else{Hl(this.display.cursorDiv,"CodeMirror-overwrite")}Je(this,"overwriteToggle",this,this.state.overwrite)},hasFocus:function(){return Jr()==this.display.input},scrollTo:JF(function(B,A){if(B!=null||A!=null){He(this)}if(B!=null){this.curOp.scrollLeft=B}if(A!=null){this.curOp.scrollTop=A}}),getScrollInfo:function(){var A=this.display.scroller,B=IB;return{left:A.scrollLeft,top:A.scrollTop,height:A.scrollHeight-B,width:A.scrollWidth-B,clientHeight:A.clientHeight-B,clientWidth:A.clientWidth-B}},scrollIntoView:JF(function(B,C){if(B==null){B={from:this.doc.sel.primary().head,to:null};if(C==null){C=this.options.cursorScrollMargin}}else{if(typeof B=="number"){B={from:KM(B,0),to:null}}else{if(B.from==null){B={from:B,to:null}}}}if(!B.to){B.to=B.from}B.margin=C||0;if(B.from.line!=null){He(this);this.curOp.scrollToPos=B}else{var A=H4(this,Math.min(B.from.left,B.to.left),Math.min(B.from.top,B.to.top)-B.margin,Math.max(B.from.right,B.to.right),Math.max(B.from.bottom,B.to.bottom)+B.margin);this.scrollTo(A.scrollLeft,A.scrollTop)}}),setSize:JF(function(D,E){var B=this;function C(F){return typeof F=="number"||/^\d+$/.test(String(F))?F+"px":F}if(D!=null){B.display.wrapper.style.width=C(D)}if(E!=null){B.display.wrapper.style.height=C(E)}if(B.options.lineWrapping){Jt(this)}var A=B.display.viewFrom;B.doc.iter(A,B.display.viewTo,function(F){if(F.widgets){for(var G=0;G<F.widgets.length;G++){if(F.widgets[G].noHScroll){Gh(B,A,"widget");break}}}++A});B.curOp.forceUpdate=true;Je(B,"refresh",this)}),operation:function(A){return Gm(this,A)},refresh:JF(function(){var A=this.display.cachedTextHeight;GI(this);this.curOp.forceUpdate=true;JY(this);this.scrollTo(this.doc.scrollLeft,this.doc.scrollTop);GY(this);if(A==null||Math.abs(A-LE(this.display))>0.5){Lj(this)}Je(this,"refresh",this)}),swapDoc:JF(function(A){var B=this.doc;B.cm=null;HR(this,A);JY(this);Gr(this);this.scrollTo(A.scrollLeft,A.scrollTop);this.curOp.forceScroll=true;HU(this,"swapDoc",this,B);return B}),getInputField:function(){return this.display.input},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}};IU(HC);var IW=HC.defaults={};var L7=HC.optionHandlers={};function LV(C,B,D,A){HC.defaults[C]=B;if(D){L7[C]=A?function(E,G,F){if(F!=GU){D(E,G,F)}}:D}}var GU=HC.Init={toString:function(){return"CodeMirror.Init"}};LV("value","",function(A,B){A.setValue(B)},true);LV("mode",null,function(A,B){A.doc.modeOption=B;KU(A)},true);LV("indentUnit",2,KU,true);LV("indentWithTabs",false);LV("smartIndent",true);LV("tabSize",4,function(A){Iu(A);JY(A);GI(A)},true);LV("specialChars",/[\t\u0000-\u0019\u00ad\u200b-\u200f\u2028\u2029\ufeff]/g,function(A,B){A.options.specialChars=new RegExp(B.source+(B.test("\t")?"":"|\t"),"g");A.refresh()},true);LV("specialCharPlaceholder",JU,function(A){A.refresh()},true);LV("electricChars",true);LV("rtlMoveVisually",!HY);LV("wholeLineUpdateBefore",true);LV("theme","default",function(A){Kh(A);Hw(A)},true);LV("keyMap","default",JP);LV("extraKeys",null);LV("lineWrapping",false,Hd,true);LV("gutters",[],function(A){IC(A.options);Hw(A)},true);LV("fixedGutter",true,function(A,B){A.display.gutters.style.left=B?G1(A.display)+"px":"0";A.refresh()},true);LV("coverGutterNextToScrollbar",false,Ku,true);LV("lineNumbers",false,function(A){IC(A.options);Hw(A)},true);LV("firstLineNumber",1,Hw,true);LV("lineNumberFormatter",function(A){return A},Hw,true);LV("showCursorWhenSelecting",false,KK,true);LV("resetSelectionOnContextMenu",true);LV("readOnly",false,function(A,B){if(B=="nocursor"){HJ(A);A.display.input.blur();A.display.disabled=true}else{A.display.disabled=false;if(!B){Gr(A)}}});LV("disableInput",false,function(A,B){if(!B){Gr(A)}},true);LV("dragDrop",true);LV("cursorBlinkRate",530);LV("cursorScrollMargin",0);LV("cursorHeight",1,KK,true);LV("singleCursorHeightPerLine",true,KK,true);LV("workTime",100);LV("workDelay",100);LV("flattenSpans",true,Iu,true);LV("addModeClass",false,Iu,true);LV("pollInterval",100);LV("undoDepth",200,function(A,B){A.doc.history.undoDepth=B});LV("historyEventDelay",1250);LV("viewportMargin",10,function(A){A.refresh()},true);LV("maxHighlightLength",10000,Iu,true);LV("moveInputWithCursor",true,function(A,B){if(!B){A.display.inputDiv.style.top=A.display.inputDiv.style.left=0}});LV("tabindex",null,function(A,B){A.display.input.tabIndex=B||""});LV("autofocus",null);var Ks=HC.modes={},FZ=HC.mimeModes={};HC.defineMode=function(A,B){if(!HC.defaults.mode&&A!="null"){HC.defaults.mode=A}if(arguments.length>2){B.dependencies=Array.prototype.slice.call(arguments,2)}Ks[A]=B};HC.defineMIME=function(B,A){FZ[B]=A};HC.resolveMode=function(B){if(typeof B=="string"&&FZ.hasOwnProperty(B)){B=FZ[B]}else{if(B&&typeof B.name=="string"&&FZ.hasOwnProperty(B.name)){var A=FZ[B.name];if(typeof A=="string"){A={name:A}}B=Ko(A,B);B.name=A.name}else{if(typeof B=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(B)){return HC.resolveMode("application/xml")}}}if(typeof B=="string"){return{name:B}}else{return B||{name:"null"}}};HC.getMode=function(B,E){var E=HC.resolveMode(E);var A=Ks[E.name];if(!A){return HC.getMode(B,"text/plain")}var C=A(B,E);if(HG.hasOwnProperty(E.name)){var F=HG[E.name];for(var D in F){if(!F.hasOwnProperty(D)){continue}if(C.hasOwnProperty(D)){C["_"+D]=C[D]}C[D]=F[D]}}C.name=E.name;if(E.helperType){C.helperType=E.helperType}if(E.modeProps){for(var D in E.modeProps){C[D]=E.modeProps[D]}}return C};HC.defineMode("null",function(){return{token:function(A){A.skipToEnd()}}});HC.defineMIME("text/plain","null");var HG=HC.modeExtensions={};HC.extendMode=function(C,A){var B=HG.hasOwnProperty(C)?HG[C]:(HG[C]={});J0(A,B)};HC.defineExtension=function(A,B){HC.prototype[A]=B};HC.defineDocExtension=function(A,B){K6.prototype[A]=B};HC.defineOption=LV;var Hb=[];HC.defineInitHook=function(A){Hb.push(A)};var Gd=HC.helpers={};HC.registerHelper=function(C,A,B){if(!Gd.hasOwnProperty(C)){Gd[C]=HC[C]={_global:[]}}Gd[C][A]=B};HC.registerGlobalHelper=function(C,B,A,D){HC.registerHelper(C,B,D);Gd[C]._global.push({pred:A,val:D})};var JK=HC.copyState=function(C,E){if(E===true){return E}if(C.copyState){return C.copyState(E)}var B={};for(var A in E){var D=E[A];if(D instanceof Array){D=D.concat([])}B[A]=D}return B};var Ll=HC.startState=function(A,C,B){return A.startState?A.startState(C,B):true};HC.innerMode=function(C,B){while(C.innerMode){var A=C.innerMode(B);if(!A||A.mode==C){break}B=A.state;C=A.mode}return A||{mode:C,state:B}};var GZ=HC.commands={selectAll:function(A){A.setSelection(KM(A.firstLine(),0),KM(A.lastLine()),JQ)},singleSelection:function(A){A.setSelection(A.getCursor("anchor"),A.getCursor("head"),JQ)},killLine:function(A){J2(A,function(C){if(C.empty()){var B=Gn(A.doc,C.head.line).text.length;if(C.head.ch==B&&C.head.line<A.lastLine()){return{from:C.head,to:KM(C.head.line+1,0)}}else{return{from:C.head,to:KM(C.head.line,B)}}}else{return{from:C.from(),to:C.to()}}})},deleteLine:function(A){J2(A,function(B){return{from:KM(B.from().line,0),to:G0(A.doc,KM(B.to().line+1,0))}})},delLineLeft:function(A){J2(A,function(B){return{from:KM(B.from().line,0),to:B.from()}})},delWrappedLineLeft:function(A){J2(A,function(D){var B=A.charCoords(D.head,"div").top+5;var C=A.coordsChar({left:0,top:B},"div");return{from:C,to:D.from()}})},delWrappedLineRight:function(A){J2(A,function(D){var C=A.charCoords(D.head,"div").top+5;var B=A.coordsChar({left:A.display.lineDiv.offsetWidth+100,top:C},"div");return{from:D.from(),to:B}})},undo:function(A){A.undo()},redo:function(A){A.redo()},undoSelection:function(A){A.undoSelection()},redoSelection:function(A){A.redoSelection()},goDocStart:function(A){A.extendSelection(KM(A.firstLine(),0))},goDocEnd:function(A){A.extendSelection(KM(A.lastLine()))},goLineStart:function(A){A.extendSelectionsBy(function(B){return JM(A,B.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(A){A.extendSelectionsBy(function(B){return Jn(A,B.head)},{origin:"+move",bias:1})},goLineEnd:function(A){A.extendSelectionsBy(function(B){return I1(A,B.head.line)},{origin:"+move",bias:-1})},goLineRight:function(A){A.extendSelectionsBy(function(C){var B=A.charCoords(C.head,"div").top+5;return A.coordsChar({left:A.display.lineDiv.offsetWidth+100,top:B},"div")},KA)},goLineLeft:function(A){A.extendSelectionsBy(function(C){var B=A.charCoords(C.head,"div").top+5;return A.coordsChar({left:0,top:B},"div")},KA)},goLineLeftSmart:function(A){A.extendSelectionsBy(function(D){var C=A.charCoords(D.head,"div").top+5;var B=A.coordsChar({left:0,top:C},"div");if(B.ch<A.getLine(B.line).search(/\S/)){return Jn(A,D.head)}return B},KA)},goLineUp:function(A){A.moveV(-1,"line")},goLineDown:function(A){A.moveV(1,"line")},goPageUp:function(A){A.moveV(-1,"page")},goPageDown:function(A){A.moveV(1,"page")},goCharLeft:function(A){A.moveH(-1,"char")},goCharRight:function(A){A.moveH(1,"char")},goColumnLeft:function(A){A.moveH(-1,"column")},goColumnRight:function(A){A.moveH(1,"column")},goWordLeft:function(A){A.moveH(-1,"word")},goGroupRight:function(A){A.moveH(1,"group")},goGroupLeft:function(A){A.moveH(-1,"group")},goWordRight:function(A){A.moveH(1,"word")},delCharBefore:function(A){A.deleteH(-1,"char")},delCharAfter:function(A){A.deleteH(1,"char")},delWordBefore:function(A){A.deleteH(-1,"word")},delWordAfter:function(A){A.deleteH(1,"word")},delGroupBefore:function(A){A.deleteH(-1,"group")},delGroupAfter:function(A){A.deleteH(1,"group")},indentAuto:function(A){A.indentSelection("smart")},indentMore:function(A){A.indentSelection("add")},indentLess:function(A){A.indentSelection("subtract")},insertTab:function(A){A.replaceSelection("\t")},insertSoftTab:function(G){var A=[],D=G.listSelections(),F=G.options.tabSize;for(var C=0;C<D.length;C++){var B=D[C].from();var E=JX(G.getLine(B.line),B.ch,F);A.push(new Array(F-E%F+1).join(" "))}G.replaceSelections(A)},defaultTab:function(A){if(A.somethingSelected()){A.indentSelection("add")}else{A.execCommand("insertTab")}},transposeChars:function(A){Gm(A,function(){var E=A.listSelections(),F=[];for(var D=0;D<E.length;D++){var B=E[D].head,G=Gn(A.doc,B.line).text;if(G){if(B.ch==G.length){B=new KM(B.line,B.ch-1)}if(B.ch>0){B=new KM(B.line,B.ch+1);A.replaceRange(G.charAt(B.ch-1)+G.charAt(B.ch-2),KM(B.line,B.ch-2),B,"+transpose")}else{if(B.line>A.doc.first){var C=Gn(A.doc,B.line-1).text;if(C){A.replaceRange(G.charAt(0)+"\n"+C.charAt(C.length-1),KM(B.line-1,C.length-1),KM(B.line,1),"+transpose")}}}}F.push(new JI(B,B))}A.setSelections(F)})},newlineAndIndent:function(A){Gm(A,function(){var C=A.listSelections().length;for(var B=0;B<C;B++){var D=A.listSelections()[B];A.replaceRange("\n",D.anchor,D.head,"+input");A.indentLine(D.from().line+1,null,true);H7(A)}})},toggleOverwrite:function(A){A.toggleOverwrite()}};var Gw=HC.keyMap={};Gw.basic={"Left":"goCharLeft","Right":"goCharRight","Up":"goLineUp","Down":"goLineDown","End":"goLineEnd","Home":"goLineStartSmart","PageUp":"goPageUp","PageDown":"goPageDown","Delete":"delCharAfter","Backspace":"delCharBefore","Shift-Backspace":"delCharBefore","Tab":"defaultTab","Shift-Tab":"indentAuto","Enter":"newlineAndIndent","Insert":"toggleOverwrite","Esc":"singleSelection"};Gw.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"};Gw.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]};Gw.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"};Gw["default"]=GA?Gw.macDefault:Gw.pcDefault;function JS(A){if(typeof A=="string"){return Gw[A]}else{return A}}var IJ=HC.lookupKey=function(D,B,C){function A(I){I=JS(I);var G=I[D];if(G===false){return"stop"}if(G!=null&&C(G)){return true}if(I.nofallthrough){return"stop"}var K=I.fallthrough;if(K==null){return false}if(Object.prototype.toString.call(K)!="[object Array]"){return A(K)}for(var H=0;H<K.length;++H){var J=A(K[H]);if(J){return J}}return false}for(var E=0;E<B.length;++E){var F=A(B[E]);if(F){return F!="stop"}}};var HI=HC.isModifierKey=function(A){var B=K8[A.keyCode];return B=="Ctrl"||B=="Alt"||B=="Shift"||B=="Mod"};var F2=HC.keyName=function(A,B){if(L1&&A.keyCode==34&&A["char"]){return false}var C=K8[A.keyCode];if(C==null||A.altGraphKey){return false}if(A.altKey){C="Alt-"+C}if(KJ?A.metaKey:A.ctrlKey){C="Ctrl-"+C}if(KJ?A.ctrlKey:A.metaKey){C="Cmd-"+C}if(!B&&A.shiftKey){C="Shift-"+C}return C};HC.fromTextArea=function(D,E){if(!E){E={}}E.value=D.value;if(!E.tabindex&&D.tabindex){E.tabindex=D.tabindex}if(!E.placeholder&&D.placeholder){E.placeholder=D.placeholder}if(E.autofocus==null){var H=Jr();E.autofocus=H==D||D.getAttribute("autofocus")!=null&&H==document.body}function A(){D.value=B.getValue()}if(D.form){H3(D.form,"submit",A);if(!E.leaveSubmitMethodAlone){var I=D.form,F=I.submit;try{var G=I.submit=function(){A();I.submit=F;I.submit();I.submit=G}}catch(C){}}}D.style.display="none";var B=HC(function(J){D.parentNode.insertBefore(J,D.nextSibling)},E);B.save=A;B.getTextArea=function(){return D};B.toTextArea=function(){B.toTextArea=isNaN;A();D.parentNode.removeChild(B.getWrapperElement());D.style.display="";if(D.form){GG(D.form,"submit",A);if(typeof D.form.submit=="function"){D.form.submit=F}}};return B};var Ls=HC.StringStream=function(A,B){this.pos=this.start=0;this.string=A;this.tabSize=B||8;this.lastColumnPos=this.lastColumnValue=0;this.lineStart=0};Ls.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==this.lineStart},peek:function(){return this.string.charAt(this.pos)||undefined},next:function(){if(this.pos<this.string.length){return this.string.charAt(this.pos++)}},eat:function(A){var B=this.string.charAt(this.pos);if(typeof A=="string"){var C=B==A}else{var C=B&&(A.test?A.test(B):A(B))}if(C){++this.pos;return B}},eatWhile:function(B){var A=this.pos;while(this.eat(B)){}return this.pos>A},eatSpace:function(){var A=this.pos;while(/[\s\u00a0]/.test(this.string.charAt(this.pos))){++this.pos}return this.pos>A},skipToEnd:function(){this.pos=this.string.length},skipTo:function(B){var A=this.string.indexOf(B,this.pos);if(A>-1){this.pos=A;return true}},backUp:function(A){this.pos-=A},column:function(){if(this.lastColumnPos<this.start){this.lastColumnValue=JX(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue);this.lastColumnPos=this.start}return this.lastColumnValue-(this.lineStart?JX(this.string,this.lineStart,this.tabSize):0)},indentation:function(){return JX(this.string,null,this.tabSize)-(this.lineStart?JX(this.string,this.lineStart,this.tabSize):0)},match:function(D,C,E){if(typeof D=="string"){var F=function(G){return E?G.toLowerCase():G};var B=this.string.substr(this.pos,D.length);if(F(B)==F(D)){if(C!==false){this.pos+=D.length}return true}}else{var A=this.string.slice(this.pos).match(D);if(A&&A.index>0){return null}if(A&&C!==false){this.pos+=A[0].length}return A}},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(B,A){this.lineStart+=B;try{return A()}finally{this.lineStart-=B}}};var Ir=HC.TextMarker=function(A,B){this.lines=[];this.type=B;this.doc=A};IU(Ir);Ir.prototype.clear=function(){if(this.explicitlyCleared){return}var J=this.doc.cm,H=J&&!J.curOp;if(H){I2(J)}if(Hx(this,"clear")){var G=this.find();if(G){HU(this,"clear",G.from,G.to)}}var E=null,B=null;for(var I=0;I<this.lines.length;++I){var D=this.lines[I];var A=L4(D.markedSpans,this);if(J&&!this.collapsed){Gh(J,Jp(D),"text")}else{if(J){if(A.to!=null){B=Jp(D)}if(A.from!=null){E=Jp(D)}}}D.markedSpans=K0(D.markedSpans,A);if(A.from==null&&this.collapsed&&!I3(this.doc,D)&&J){Mh(D,LE(J.display))}}if(J&&this.collapsed&&!J.options.lineWrapping){for(var I=0;I<this.lines.length;++I){var C=Hh(this.lines[I]),F=F5(C);if(F>J.display.maxLineLength){J.display.maxLine=C;J.display.maxLineLength=F;J.display.maxLineChanged=true}}}if(E!=null&&J&&this.collapsed){GI(J,E,B+1)}this.lines.length=0;this.explicitlyCleared=true;if(this.atomic&&this.doc.cantEdit){this.doc.cantEdit=false;if(J){LJ(J.doc)}}if(J){HU(J,"markerCleared",J,this)}if(H){GW(J)}if(this.parent){this.parent.clear()}};Ir.prototype.find=function(D,E){if(D==null&&this.type=="bookmark"){D=1}var F,C;for(var A=0;A<this.lines.length;++A){var G=this.lines[A];var B=L4(G.markedSpans,this);if(B.from!=null){F=KM(E?G:Jp(G),B.from);if(D==-1){return F}}if(B.to!=null){C=KM(E?G:Jp(G),B.to);if(D==1){return C}}}return F&&{from:F,to:C}};Ir.prototype.changed=function(){var C=this.find(-1,true),A=this,B=this.doc.cm;if(!C||!B){return}Gm(B,function(){var E=C.line,D=Jp(C.line);var F=Mt(B,D);if(F){Kx(F);B.curOp.selectionChanged=B.curOp.forceUpdate=true}B.curOp.updateMaxLine=true;if(!I3(A.doc,E)&&A.height!=null){var G=A.height;A.height=null;var H=Ig(A)-G;if(H){Mh(E,E.height+H)}}})};Ir.prototype.attachLine=function(A){if(!this.lines.length&&this.doc.cm){var B=this.doc.cm.curOp;if(!B.maybeHiddenMarkers||KZ(B.maybeHiddenMarkers,this)==-1){(B.maybeUnhiddenMarkers||(B.maybeUnhiddenMarkers=[])).push(this)}}this.lines.push(A)};Ir.prototype.detachLine=function(A){this.lines.splice(KZ(this.lines,A),1);if(!this.lines.length&&this.doc.cm){var B=this.doc.cm.curOp;(B.maybeHiddenMarkers||(B.maybeHiddenMarkers=[])).push(this)}};var Me=0;function Gu(J,E,D,H,I){if(H&&H.shared){return GN(J,E,D,H,I)}if(J.cm&&!J.cm.curOp){return JB(J.cm,Gu)(J,E,D,H,I)}var F=new Ir(J,I),K=Gx(E,D);if(H){J0(H,F,false)}if(K>0||K==0&&F.clearWhenEmpty!==false){return F}if(F.replacedWith){F.collapsed=true;F.widgetNode=Kj("span",[F.replacedWith],"CodeMirror-widget");if(!H.handleMouseEvents){F.widgetNode.ignoreEvents=true}if(H.insertLeft){F.widgetNode.insertLeft=true}}if(F.collapsed){if(If(J,E.line,E,D,F)||E.line!=D.line&&If(J,D.line,E,D,F)){throw new Error("Inserting collapsed marker partially overlapping an existing one")}F0=true}if(F.addToHistory){Kk(J,{from:E,to:D,origin:"markText"},J.sel,NaN)}var A=E.line,C=J.cm,G;J.iter(A,D.line+1,function(L){if(C&&F.collapsed&&!C.options.lineWrapping&&Hh(L)==C.display.maxLine){G=true}if(F.collapsed&&A!=E.line){Mh(L,0)}KY(L,new HW(F,A==E.line?E.ch:null,A==D.line?D.ch:null));++A});if(F.collapsed){J.iter(E.line,D.line+1,function(L){if(I3(J,L)){Mh(L,0)}})}if(F.clearOnEnter){H3(F,"beforeCursorEnter",function(){F.clear()})}if(F.readOnly){Jy=true;if(J.history.done.length||J.history.undone.length){J.clearHistory()}}if(F.collapsed){F.id=++Me;F.atomic=true}if(C){if(G){C.curOp.updateMaxLine=true}if(F.collapsed){GI(C,E.line,D.line+1)}else{if(F.className||F.title||F.startStyle||F.endStyle){for(var B=E.line;B<=D.line;B++){Gh(C,B,"text")}}}if(F.atomic){LJ(C.doc)}HU(C,"markerAdded",C,F)}return F}var Ii=HC.SharedTextMarker=function(C,A){this.markers=C;this.primary=A;for(var B=0;B<C.length;++B){C[B].parent=this}};IU(Ii);Ii.prototype.clear=function(){if(this.explicitlyCleared){return}this.explicitlyCleared=true;for(var A=0;A<this.markers.length;++A){this.markers[A].clear()}HU(this,"clear")};Ii.prototype.find=function(B,A){return this.primary.find(B,A)};function GN(H,C,G,B,F){B=J0(B);B.shared=false;var A=[Gu(H,C,G,B,F)],D=A[0];var E=B.widgetNode;Kf(H,function(I){if(E){B.widgetNode=E.cloneNode(true)}A.push(Gu(I,G0(I,C),G0(I,G),B,F));for(var J=0;J<I.linked.length;++J){if(I.linked[J].isParent){return}}D=Jx(A)});return new Ii(A,D)}function Lh(A){return A.findMarks(KM(A.first,0),A.clipPos(KM(A.lastLine())),function(B){return B.parent})}function GV(F,B){for(var H=0;H<B.length;H++){var E=B[H],G=E.find();var C=F.clipPos(G.from),A=F.clipPos(G.to);if(Gx(C,A)){var D=Gu(F,C,A,E.primary,E.primary.type);E.markers.push(D);D.parent=E}}}function In(A){for(var B=0;B<A.length;B++){var C=A[B],D=[C.primary.doc];Kf(C.primary.doc,function(G){D.push(G)});for(var F=0;F<C.markers.length;F++){var E=C.markers[F];if(KZ(D,E.doc)==-1){E.parent=null;C.markers.splice(F--,1)}}}}function HW(B,C,A){this.marker=B;this.from=C;this.to=A}function L4(C,B){if(C){for(var D=0;D<C.length;++D){var A=C[D];if(A.marker==B){return A}}}}function K0(C,A){for(var D,B=0;B<C.length;++B){if(C[B]!=A){(D||(D=[])).push(C[B])}}return D}function KY(A,B){A.markedSpans=A.markedSpans?A.markedSpans.concat([B]):[B];B.marker.attachLine(A)}function Hc(G,C,H){if(G){for(var D=0,F;D<G.length;++D){var E=G[D],A=E.marker;var I=E.from==null||(A.inclusiveLeft?E.from<=C:E.from<C);if(I||E.from==C&&A.type=="bookmark"&&(!H||!E.marker.insertLeft)){var B=E.to==null||(A.inclusiveRight?E.to>=C:E.to>C);(F||(F=[])).push(new HW(A,E.from,B?null:E.to))}}}return F}function F8(F,I,G){if(F){for(var C=0,E;C<F.length;++C){var D=F[C],A=D.marker;var B=D.to==null||(A.inclusiveRight?D.to>=I:D.to>I);if(B||D.from==I&&A.type=="bookmark"&&(!G||D.marker.insertLeft)){var H=D.from==null||(A.inclusiveLeft?D.from<=I:D.from<I);(E||(E=[])).push(new HW(A,H?null:D.from-I,D.to==null?null:D.to-I))}}}return E}function I9(A,P){var D=Lt(A,P.from.line)&&Gn(A,P.from.line).markedSpans;var E=Lt(A,P.to.line)&&Gn(A,P.to.line).markedSpans;if(!D&&!E){return null}var Q=P.from.ch,I=P.to.ch,N=Gx(P.from,P.to)==0;var L=Hc(D,Q,N);var J=F8(E,I,N);var B=P.text.length==1,K=Jx(P.text).length+(B?Q:0);if(L){for(var F=0;F<L.length;++F){var H=L[F];if(H.to==null){var C=L4(J,H.marker);if(!C){H.to=Q}else{if(B){H.to=C.to==null?null:C.to+K}}}}}if(J){for(var F=0;F<J.length;++F){var H=J[F];if(H.to!=null){H.to+=K}if(H.from==null){var C=L4(L,H.marker);if(!C){H.from=K;if(B){(L||(L=[])).push(H)}}}else{H.from+=K;if(B){(L||(L=[])).push(H)}}}}if(L){L=H6(L)}if(J&&J!=L){J=H6(J)}var M=[L];if(!B){var O=P.text.length-2,G;if(O>0&&L){for(var F=0;F<L.length;++F){if(L[F].to==null){(G||(G=[])).push(new HW(L[F].marker,null,null))}}}for(var F=0;F<O;++F){M.push(G)}M.push(J)}return M}function H6(B){for(var C=0;C<B.length;++C){var A=B[C];if(A.from!=null&&A.from==A.to&&A.marker.clearWhenEmpty!==false){B.splice(C--,1)}}if(!B.length){return null}return B}function Ma(E,H){var D=GD(E,H);var C=I9(E,H);if(!D){return C}if(!C){return D}for(var I=0;I<D.length;++I){var J=D[I],A=C[I];if(J&&A){spans:for(var B=0;B<A.length;++B){var G=A[B];for(var F=0;F<J.length;++F){if(J[F].marker==G.marker){continue spans}}J.push(G)}}else{if(A){D[I]=A}}}return D}function IV(I,D,M){var L=null;I.iter(D.line,M.line+1,function(P){if(P.markedSpans){for(var O=0;O<P.markedSpans.length;++O){var N=P.markedSpans[O].marker;if(N.readOnly&&(!L||KZ(L,N)==-1)){(L||(L=[])).push(N)}}}});if(!L){return null}var A=[{from:D,to:M}];for(var F=0;F<L.length;++F){var J=L[F],C=J.find(0);for(var H=0;H<A.length;++H){var E=A[H];if(Gx(E.to,C.from)<0||Gx(E.from,C.to)>0){continue}var K=[H,1],B=Gx(E.from,C.from),G=Gx(E.to,C.to);if(B<0||!J.inclusiveLeft&&!B){K.push({from:E.from,to:C.from})}if(G>0||!J.inclusiveRight&&!G){K.push({from:C.to,to:E.to})}A.splice.apply(A,K);H+=K.length-1}}return A}function Lz(B){var A=B.markedSpans;if(!A){return}for(var C=0;C<A.length;++C){A[C].marker.detachLine(B)}B.markedSpans=null}function GM(B,A){if(!A){return}for(var C=0;C<A.length;++C){A[C].marker.attachLine(B)}B.markedSpans=A}function Lr(A){return A.inclusiveLeft?-1:0}function Lf(A){return A.inclusiveRight?1:0}function Ga(B,E){var A=B.lines.length-E.lines.length;if(A!=0){return A}var G=B.find(),C=E.find();var D=Gx(G.from,C.from)||Lr(B)-Lr(E);if(D){return -D}var F=Gx(G.to,C.to)||Lf(B)-Lf(E);if(F){return F}return E.id-B.id}function JC(D,F){var C=F0&&D.markedSpans,B;if(C){for(var A,E=0;E<C.length;++E){A=C[E];if(A.marker.collapsed&&(F?A.from:A.to)==null&&(!B||Ga(B,A.marker)<0)){B=A.marker}}}return B}function Ia(A){return JC(A,true)}function K3(A){return JC(A,false)}function If(I,J,D,C,K){var A=Gn(I,J);var H=F0&&A.markedSpans;if(H){for(var B=0;B<H.length;++B){var E=H[B];if(!E.marker.collapsed){continue}var G=E.marker.find(0);var F=Gx(G.from,D)||Lr(E.marker)-Lr(K);var L=Gx(G.to,C)||Lf(E.marker)-Lf(K);if(F>=0&&L<=0||F<=0&&L>=0){continue}if(F<=0&&(Gx(G.to,D)>0||(E.marker.inclusiveRight&&K.inclusiveLeft))||F>=0&&(Gx(G.from,C)<0||(E.marker.inclusiveLeft&&K.inclusiveRight))){return true}}}}function Hh(A){var B;while(B=Ia(A)){A=B.find(-1,true).line}return A}function HP(B){var A,C;while(A=K3(B)){B=A.find(1,true).line;(C||(C=[])).push(B)}return C}function KQ(C,A){var B=Gn(C,A),D=Hh(B);if(B==D){return A}return Jp(D)}function GO(C,A){if(A>C.lastLine()){return A}var B=Gn(C,A),D;if(!I3(C,B)){return A}while(D=K3(B)){B=D.find(1,true).line}return Jp(B)+1}function I3(D,C){var B=F0&&C.markedSpans;if(B){for(var A,E=0;E<B.length;++E){A=B[E];if(!A.marker.collapsed){continue}if(A.from==null){return true}if(A.marker.widgetNode){continue}if(A.from==0&&A.marker.inclusiveLeft&&Id(D,C,A)){return true}}}}function Id(F,D,A){if(A.to==null){var C=A.marker.find(1,true);return Id(F,C.line,L4(C.line.markedSpans,A.marker))}if(A.marker.inclusiveRight&&A.to==D.text.length){return true}for(var B,E=0;E<D.markedSpans.length;++E){B=D.markedSpans[E];if(B.marker.collapsed&&!B.marker.widgetNode&&B.from==A.to&&(B.to==null||B.to!=A.from)&&(B.marker.inclusiveLeft||A.marker.inclusiveRight)&&Id(F,D,B)){return true}}}var KT=HC.LineWidget=function(C,A,B){if(B){for(var D in B){if(B.hasOwnProperty(D)){this[D]=B[D]}}}this.cm=C;this.node=A};IU(KT);function IX(A,C,B){if(Mm(C)<((A.curOp&&A.curOp.scrollTop)||A.doc.scrollTop)){HS(A,null,B)}}KT.prototype.clear=function(){var F=this.cm,B=this.line.widgets,E=this.line,A=Jp(E);if(A==null||!B){return}for(var C=0;C<B.length;++C){if(B[C]==this){B.splice(C--,1)}}if(!B.length){E.widgets=null}var D=Ig(this);Gm(F,function(){IX(F,E,-D);Gh(F,A,"widget");Mh(E,Math.max(0,E.height-D))})};KT.prototype.changed=function(){var C=this.height,B=this.cm,A=this.line;this.height=null;var D=Ig(this)-C;if(!D){return}Gm(B,function(){B.curOp.forceUpdate=true;IX(B,A,D);Mh(A,A.height+D)})};function Ig(A){if(A.height!=null){return A.height}if(!G5(document.body,A.node)){var B="position: relative;";if(A.coverGutter){B+="margin-left: -"+A.cm.getGutterElement().offsetWidth+"px;"}HE(A.cm.display.measure,Kj("div",[A.node],null,B))}return A.height=A.node.offsetHeight}function KH(E,C,A,B){var D=new KT(E,A,B);if(D.noHScroll){E.display.alignWidgets=true}Mp(E.doc,C,"widget",function(F){var G=F.widgets||(F.widgets=[]);if(D.insertAt==null){G.push(D)}else{G.splice(Math.min(G.length-1,Math.max(0,D.insertAt)),0,D)}D.line=F;if(!I3(E.doc,F)){var H=Mm(F)<E.doc.scrollTop;Mh(F,F.height+Ig(D));if(H){HS(E,null,D.height)}E.curOp.forceUpdate=true}return true});return D}var HZ=HC.Line=function(A,C,B){this.text=A;GM(this,C);this.height=B?B(this):1};IU(HZ);HZ.prototype.lineNo=function(){return Jp(this)};function F6(D,A,E,C){D.text=A;if(D.stateAfter){D.stateAfter=null}if(D.styles){D.styles=null}if(D.order!=null){D.order=null}Lz(D);GM(D,E);var B=C?C(D):1;if(B!=D.height){Mh(D,B)}}function Hy(A){A.parent=null;Lz(A)}function Mj(C,A){if(C){for(;;){var D=C.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!D){break}C=C.slice(0,D.index)+C.slice(D.index+D[0].length);var B=D[1]?"bgClass":"textClass";if(A[B]==null){A[B]=D[2]}else{if(!(new RegExp("(?:^|s)"+D[2]+"(?:$|s)")).test(A[B])){A[B]+=" "+D[2]}}}}return C}function L5(C,B){if(C.blankLine){return C.blankLine(B)}if(!C.innerMode){return}var A=HC.innerMode(C,B);if(A.mode.blankLine){return A.mode.blankLine(A.state)}}function MB(A,D,C){for(var E=0;E<10;E++){var B=A.token(D,C);if(D.pos>D.start){return B}}throw new Error("Mode "+A.name+" failed to advance stream.")}function HF(M,J,G,I,N,E,A){var D=G.flattenSpans;if(D==null){D=M.options.flattenSpans}var H=0,B=null;var K=new Ls(J,M.options.tabSize),F;if(J==""){Mj(L5(G,I),E)}while(!K.eol()){if(K.pos>M.options.maxHighlightLength){D=false;if(A){LU(M,J,I,K.pos)}K.pos=J.length;F=null}else{F=Mj(MB(G,K,I),E)}if(M.options.addModeClass){var L=HC.innerMode(G,I).mode.name;if(L){F="m-"+(F?L+" "+F:L)}}if(!D||B!=F){if(H<K.start){N(K.start,B)}H=K.start;B=F}K.start=K.pos}while(H<K.pos){var C=Math.min(K.pos,H+50000);N(C,B);H=C}}function L8(B,H,J,E){var D=[B.state.modeGen],G={};HF(B,H.text,B.doc.mode,J,function(K,L){D.push(K,L)},G,E);for(var I=0;I<B.state.overlays.length;++I){var C=B.state.overlays[I],A=1,F=0;HF(B,H.text,C.mode,true,function(M,K){var O=A;while(F<M){var N=D[A];if(N>M){D.splice(A,1,M,D[A+1],N)}A+=2;F=Math.min(M,N)}if(!K){return}if(C.opaque){D.splice(O,A-O,M,"cm-overlay "+K);A=O+2}else{for(;O<A;O+=2){var L=D[O+1];D[O+1]=(L?L+" ":"")+"cm-overlay "+K}}},G)}return{styles:D,classes:G.bgClass||G.textClass?G:null}}function J8(B,A){if(!A.styles||A.styles[0]!=B.state.modeGen){var C=L8(B,A,A.stateAfter=Ic(B,Jp(A)));A.styles=C.styles;if(C.classes){A.styleClasses=C.classes}else{if(A.styleClasses){A.styleClasses=null}}}return A.styles}function LU(D,C,F,A){var E=D.doc.mode;var B=new Ls(C,D.options.tabSize);B.start=B.pos=A||0;if(C==""){L5(E,F)}while(!B.eol()&&B.pos<=D.options.maxHighlightLength){MB(E,B,F);B.start=B.pos}}var IF={},My={};function LB(B,A){if(!B||/^\s*$/.test(B)){return null}var C=A.addModeClass?My:IF;return C[B]||(C[B]=B.replace(/\S+/g,"cm-$&"))}function HO(G,D){var F=Kj("span",null,null,GS?"padding-right: .1px":null);var C={pre:Kj("pre",[F]),content:F,col:0,pos:0,cm:G};D.measure={};for(var A=0;A<=(D.rest?D.rest.length:0);A++){var B=A?D.rest[A-1]:D.line,E;C.pos=0;C.addToken=Ie;if((Jg||GS)&&G.getOption("lineWrapping")){C.addToken=J3(C.addToken)}if(LT(G.display.measure)&&(E=I8(B))){C.addToken=KG(C.addToken,E)}C.map=[];H9(B,C,J8(G,B));if(B.styleClasses){if(B.styleClasses.bgClass){C.bgClass=Gp(B.styleClasses.bgClass,C.bgClass||"")}if(B.styleClasses.textClass){C.textClass=Gp(B.styleClasses.textClass,C.textClass||"")}}if(C.map.length==0){C.map.push(0,0,C.content.appendChild(GK(G.display.measure)))}if(A==0){D.measure.map=C.map;D.measure.cache={}}else{(D.measure.maps||(D.measure.maps=[])).push(C.map);(D.measure.caches||(D.measure.caches=[])).push({})}}Je(G,"renderLine",G,D.line,C.pre);if(C.pre.className){C.textClass=Gp(C.pre.className,C.textClass||"")}return C}function JU(A){var B=Kj("span","\u2022","cm-invalidchar");B.title="\\u"+A.charCodeAt(0).toString(16);return B}function Ie(A,L,P,O,J,K){if(!L){return}var Q=A.cm.options.specialChars,D=false;if(!Q.test(L)){A.col+=L.length;var G=document.createTextNode(L);A.map.push(A.pos,A.pos+L.length,G);if(Jg&&KO<9){D=true}A.pos+=L.length}else{var G=document.createDocumentFragment(),E=0;while(true){Q.lastIndex=E;var I=Q.exec(L);var N=I?I.index-E:L.length-E;if(N){var B=document.createTextNode(L.slice(E,E+N));if(Jg&&KO<9){G.appendChild(Kj("span",[B]))}else{G.appendChild(B)}A.map.push(A.pos,A.pos+N,B);A.col+=N;A.pos+=N}if(!I){break}E+=N+1;if(I[0]=="\t"){var M=A.cm.options.tabSize,H=M-A.col%M;var B=G.appendChild(Kj("span",LZ(H),"cm-tab"));A.col+=H}else{var B=A.cm.options.specialCharPlaceholder(I[0]);if(Jg&&KO<9){G.appendChild(Kj("span",[B]))}else{G.appendChild(B)}A.col+=1}A.map.push(A.pos,A.pos+1,B);A.pos++}}if(P||O||J||D){var C=P||"";if(O){C+=O}if(J){C+=J}var F=Kj("span",[G],C);if(K){F.title=K}return A.content.appendChild(F)}A.content.appendChild(G)}function J3(B){function A(D){var E=" ";for(var C=0;C<D.length-2;++C){E+=C%2?" ":"\u00a0"}E+=" ";return E}return function(F,G,C,E,D,H){B(F,G.replace(/ {3,}/g,A),C,E,D,H)}}function KG(A,B){return function(E,G,I,K,J,H){I=I?I+" cm-force-border":"cm-force-border";var L=E.pos,D=L+G.length;for(;;){for(var C=0;C<B.length;C++){var F=B[C];if(F.to>L&&F.from<=L){break}}if(F.to>=D){return A(E,G,I,K,J,H)}A(E,G.slice(0,F.to-L),I,K,null,H);K=null;G=G.slice(F.to-L);L=F.to}}}function HV(A,C,B,E){var D=!E&&B.widgetNode;if(D){A.map.push(A.pos,A.pos+C,D);A.content.appendChild(D)}A.pos+=C}function H9(R,U,J){var Q=R.markedSpans,V=R.text,M=0;if(!Q){for(var D=1;D<J.length;D+=2){U.addToken(U,V.slice(M,M=J[D]),LB(J[D+1],U.cm.options))}return}var F=V.length,E=0,D=1,P="",B;var G=0,A,H,L,N,T;for(;;){if(G==E){A=H=L=N="";T=null;G=Infinity;var X=[];for(var S=0;S<Q.length;++S){var O=Q[S],C=O.marker;if(O.from<=E&&(O.to==null||O.to>E)){if(O.to!=null&&G>O.to){G=O.to;H=""}if(C.className){A+=" "+C.className}if(C.startStyle&&O.from==E){L+=" "+C.startStyle}if(C.endStyle&&O.to==G){H+=" "+C.endStyle}if(C.title&&!N){N=C.title}if(C.collapsed&&(!T||Ga(T.marker,C)<0)){T=O}}else{if(O.from>E&&G>O.from){G=O.from}}if(C.type=="bookmark"&&O.from==E&&C.widgetNode){X.push(C)}}if(T&&(T.from||0)==E){HV(U,(T.to==null?F+1:T.to)-E,T.marker,T.from==null);if(T.to==null){return}}if(!T&&X.length){for(var S=0;S<X.length;++S){HV(U,0,X[S])}}}if(E>=F){break}var K=Math.min(F,G);while(true){if(P){var I=E+P.length;if(!T){var W=I>K?P.slice(0,K-E):P;U.addToken(U,W,B?B+A:A,L,E+W.length==G?H:"",N)}if(I>=K){P=P.slice(K-E);E=K;break}E=I;L=""}P=V.slice(M,M=J[D++]);B=LB(J[D++],U.cm.options)}}}function J6(A,B){return B.from.ch==0&&B.to.ch==0&&Jx(B.text)==""&&(!A.cm||A.cm.options.wholeLineUpdateBefore)}function HX(K,F,M,E){function A(Q){return M?M[Q]:null}function O(Q,R,S){F6(Q,R,S,E);HU(Q,"change",Q,F)}var P=F.from,I=F.to,D=F.text;var L=Gn(K,P.line),B=Gn(K,I.line);var C=Jx(D),N=A(D.length-1),H=I.line-P.line;if(J6(K,F)){for(var J=0,G=[];J<D.length-1;++J){G.push(new HZ(D[J],A(J),E))}O(B,B.text,N);if(H){K.remove(P.line,H)}if(G.length){K.insert(P.line,G)}}else{if(L==B){if(D.length==1){O(L,L.text.slice(0,P.ch)+C+L.text.slice(I.ch),N)}else{for(var G=[],J=1;J<D.length-1;++J){G.push(new HZ(D[J],A(J),E))}G.push(new HZ(C+L.text.slice(I.ch),N,E));O(L,L.text.slice(0,P.ch)+D[0],A(0));K.insert(P.line+1,G)}}else{if(D.length==1){O(L,L.text.slice(0,P.ch)+D[0]+B.text.slice(I.ch),A(0));K.remove(P.line+1,H)}else{O(L,L.text.slice(0,P.ch)+D[0],A(0));O(B,C+B.text.slice(I.ch),N);for(var J=1,G=[];J<D.length-1;++J){G.push(new HZ(D[J],A(J),E))}if(H>1){K.remove(P.line+1,H-1)}K.insert(P.line+1,G)}}}HU(K,"change",K,F)}function Hz(A){this.lines=A;this.parent=null;for(var C=0,B=0;C<A.length;++C){A[C].parent=this;B+=A[C].height}this.height=B}Hz.prototype={chunkSize:function(){return this.lines.length},removeInner:function(E,A){for(var C=E,B=E+A;C<B;++C){var D=this.lines[C];this.height-=D.height;Hy(D);HU(D,"delete")}this.lines.splice(E,A)},collapse:function(A){A.push.apply(A,this.lines)},insertInner:function(C,B,D){this.height+=D;this.lines=this.lines.slice(0,C).concat(B).concat(this.lines.slice(C));for(var A=0;A<B.length;++A){B[A].parent=this}},iterN:function(C,D,A){for(var B=C+D;C<B;++C){if(A(this.lines[C])){return true}}}};function G7(E){this.children=E;var C=0,A=0;for(var B=0;B<E.length;++B){var D=E[B];C+=D.chunkSize();A+=D.height;D.parent=this}this.size=C;this.height=A;this.parent=null}G7.prototype={chunkSize:function(){return this.size},removeInner:function(C,H){this.size-=H;for(var A=0;A<this.children.length;++A){var D=this.children[A],B=D.chunkSize();if(C<B){var F=Math.min(H,B-C),E=D.height;D.removeInner(C,F);this.height-=E-D.height;if(B==F){this.children.splice(A--,1);D.parent=null}if((H-=F)==0){break}C=0}else{C-=B}}if(this.size-H<25&&(this.children.length>1||!(this.children[0] instanceof Hz))){var G=[];this.collapse(G);this.children=[new Hz(G)];this.children[0].parent=this}},collapse:function(A){for(var B=0;B<this.children.length;++B){this.children[B].collapse(A)}},insertInner:function(G,A,C){this.size+=A.length;this.height+=C;for(var H=0;H<this.children.length;++H){var E=this.children[H],F=E.chunkSize();if(G<=F){E.insertInner(G,A,C);if(E.lines&&E.lines.length>50){while(E.lines.length>50){var B=E.lines.splice(E.lines.length-25,25);var D=new Hz(B);E.height-=D.height;this.children.splice(H+1,0,D);D.parent=this}this.maybeSpill()}break}G-=F}},maybeSpill:function(){if(this.children.length<=10){return}var D=this;do{var E=D.children.splice(D.children.length-5,5);var C=new G7(E);if(!D.parent){var B=new G7(D.children);B.parent=D;D.children=[B,C];D=B}else{D.size-=C.size;D.height-=C.height;var A=KZ(D.parent.children,D);D.parent.children.splice(A+1,0,C)}C.parent=D.parent}while(D.children.length>10);D.parent.maybeSpill()},iterN:function(B,C,F){for(var A=0;A<this.children.length;++A){var D=this.children[A],E=D.chunkSize();if(B<E){var G=Math.min(C,E-B);if(D.iterN(B,G,F)){return true}if((C-=G)==0){break}B=0}else{B-=E}}}};var II=0;var K6=HC.Doc=function(A,C,B){if(!(this instanceof K6)){return new K6(A,C,B)}if(B==null){B=0}G7.call(this,[new Hz([new HZ("",null)])]);this.first=B;this.scrollTop=this.scrollLeft=0;this.cantEdit=false;this.cleanGeneration=1;this.frontier=B;var D=KM(B,0);this.sel=Ju(D);this.history=new Mr(null);this.id=++II;this.modeOption=C;if(typeof A=="string"){A=JR(A)}HX(this,{from:D,to:D,text:A});Jf(this,Ju(D),JQ)};K6.prototype=Ko(G7.prototype,{constructor:K6,iter:function(C,A,B){if(B){this.iterN(C-this.first,A-C,B)}else{this.iterN(this.first,this.first+this.size,C)}},insert:function(C,B){var D=0;for(var A=0;A<B.length;++A){D+=B[A].height}this.insertInner(C-this.first,B,D)},remove:function(A,B){this.removeInner(A-this.first,B)},getValue:function(B){var A=Mq(this,this.first,this.first+this.size);if(B===false){return A}return A.join(B||"\n")},setValue:Mk(function(C){var A=KM(this.first,0),B=this.first+this.size-1;Mx(this,{from:A,to:KM(B,Gn(this,B).text.length),text:JR(C),origin:"setValue"},true);Jf(this,Ju(A))}),replaceRange:function(A,C,B,D){C=G0(this,C);B=B?G0(this,B):C;LX(this,A,C,B,D)},getRange:function(C,B,A){var D=Hj(this,G0(this,C),G0(this,B));if(A===false){return D}return D.join(A||"\n")},getLine:function(A){var B=this.getLineHandle(A);return B&&B.text},getLineHandle:function(A){if(Lt(this,A)){return Gn(this,A)}},getLineNumber:function(A){return Jp(A)},getLineHandleVisualStart:function(A){if(typeof A=="number"){A=Gn(this,A)}return Hh(A)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(A){return G0(this,A)},getCursor:function(A){var C=this.sel.primary(),B;if(A==null||A=="head"){B=C.head}else{if(A=="anchor"){B=C.anchor}else{if(A=="end"||A=="to"||A===false){B=C.to()}else{B=C.from()}}}return B},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Mk(function(B,A,C){JL(this,G0(this,typeof B=="number"?KM(B,A||0):B),null,C)}),setSelection:Mk(function(B,A,C){JL(this,G0(this,B),G0(this,A||B),C)}),extendSelection:Mk(function(A,B,C){LD(this,G0(this,A),B&&G0(this,B),C)}),extendSelections:Mk(function(B,A){Kv(this,Jh(this,B,A))}),extendSelectionsBy:Mk(function(A,B){Kv(this,Lg(this.sel.ranges,A),B)}),setSelections:Mk(function(C,A,D){if(!C.length){return}for(var E=0,B=[];E<C.length;E++){B[E]=new JI(G0(this,C[E].anchor),G0(this,C[E].head))}if(A==null){A=Math.min(C.length-1,this.sel.primIndex)}Jf(this,KE(B,A),D)}),addSelection:Mk(function(C,B,A){var D=this.sel.ranges.slice(0);D.push(new JI(G0(this,C),G0(this,B||C)));Jf(this,KE(D,D.length-1),A)}),getSelection:function(A){var B=this.sel.ranges,E;for(var C=0;C<B.length;C++){var D=Hj(this,B[C].from(),B[C].to());E=E?E.concat(D):D}if(A===false){return E}else{return E.join(A||"\n")}},getSelections:function(B){var C=[],A=this.sel.ranges;for(var E=0;E<A.length;E++){var D=Hj(this,A[E].from(),A[E].to());if(B!==false){D=D.join(B||"\n")}C[E]=D}return C},replaceSelection:function(B,C,A){var D=[];for(var E=0;E<this.sel.ranges.length;E++){D[E]=B}this.replaceSelections(D,C,A||"+input")},replaceSelections:Mk(function(E,F,A){var C=[],G=this.sel;for(var H=0;H<G.ranges.length;H++){var D=G.ranges[H];C[H]={from:D.from(),to:D.to(),text:JR(E[H]),origin:A}}var B=F&&F!="end"&&LQ(this,C,F);for(var H=C.length-1;H>=0;H--){Mx(this,C[H])}if(B){Ja(this,B)}else{if(this.cm){H7(this.cm)}}}),undo:Mk(function(){GB(this,"undo")}),redo:Mk(function(){GB(this,"redo")}),undoSelection:Mk(function(){GB(this,"undo",true)}),redoSelection:Mk(function(){GB(this,"redo",true)}),setExtending:function(A){this.extend=A},getExtending:function(){return this.extend},historySize:function(){var C=this.history,D=0,B=0;for(var A=0;A<C.done.length;A++){if(!C.done[A].ranges){++D}}for(var A=0;A<C.undone.length;A++){if(!C.undone[A].ranges){++B}}return{undo:D,redo:B}},clearHistory:function(){this.history=new Mr(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(true)},changeGeneration:function(A){if(A){this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null}return this.history.generation},isClean:function(A){return this.history.generation==(A||this.cleanGeneration)},getHistory:function(){return{done:HM(this.history.done),undone:HM(this.history.undone)}},setHistory:function(B){var A=this.history=new Mr(this.history.maxGeneration);A.done=HM(B.done.slice(0),null,true);A.undone=HM(B.undone.slice(0),null,true)},addLineClass:Mk(function(C,B,A){return Mp(this,C,"class",function(E){var D=B=="text"?"textClass":B=="background"?"bgClass":"wrapClass";if(!E[D]){E[D]=A}else{if(new RegExp("(?:^|\\s)"+A+"(?:$|\\s)").test(E[D])){return false}else{E[D]+=" "+A}}return true})}),removeLineClass:Mk(function(C,B,A){return Mp(this,C,"class",function(D){var G=B=="text"?"textClass":B=="background"?"bgClass":"wrapClass";var F=D[G];if(!F){return false}else{if(A==null){D[G]=null}else{var E=F.match(new RegExp("(?:^|\\s+)"+A+"(?:$|\\s+)"));if(!E){return false}var H=E.index+E[0].length;D[G]=F.slice(0,E.index)+(!E.index||H==F.length?"":" ")+F.slice(H)||null}}return true})}),markText:function(C,A,B){return Gu(this,G0(this,C),G0(this,A),B,"range")},setBookmark:function(C,A){var B={replacedWith:A&&(A.nodeType==null?A.widget:A),insertLeft:A&&A.insertLeft,clearWhenEmpty:false,shared:A&&A.shared};C=G0(this,C);return Gu(this,C,C,B,"bookmark")},findMarksAt:function(B){B=G0(this,B);var C=[],A=Gn(this,B.line).markedSpans;if(A){for(var E=0;E<A.length;++E){var D=A[E];if((D.from==null||D.from<=B.ch)&&(D.to==null||D.to>=B.ch)){C.push(D.marker.parent||D.marker)}}}return C},findMarks:function(C,B,A){C=G0(this,C);B=G0(this,B);var D=[],E=C.line;this.iter(C.line,B.line+1,function(H){var G=H.markedSpans;if(G){for(var I=0;I<G.length;I++){var F=G[I];if(!(E==C.line&&C.ch>F.to||F.from==null&&E!=C.line||E==B.line&&F.from>B.ch)&&(!A||A(F.marker))){D.push(F.marker.parent||F.marker)}}}++E});return D},getAllMarks:function(){var A=[];this.iter(function(D){var C=D.markedSpans;if(C){for(var B=0;B<C.length;++B){if(C[B].from!=null){A.push(C[B].marker)}}}});return A},posFromIndex:function(C){var B,A=this.first;this.iter(function(E){var D=E.text.length+1;if(D>C){B=C;return true}C-=D;++A});return G0(this,KM(A,B))},indexFromPos:function(B){B=G0(this,B);var A=B.ch;if(B.line<this.first||B.ch<0){return 0}this.iter(this.first,B.line,function(C){A+=C.text.length+1});return A},copy:function(B){var A=new K6(Mq(this,this.first,this.first+this.size),this.modeOption,this.first);A.scrollTop=this.scrollTop;A.scrollLeft=this.scrollLeft;A.sel=this.sel;A.extend=false;if(B){A.history.undoDepth=this.history.undoDepth;A.setHistory(this.getHistory())}return A},linkedDoc:function(B){if(!B){B={}}var C=this.first,A=this.first+this.size;if(B.from!=null&&B.from>C){C=B.from}if(B.to!=null&&B.to<A){A=B.to}var D=new K6(Mq(this,C,A),B.mode||this.modeOption,C);if(B.sharedHist){D.history=this.history}(this.linked||(this.linked=[])).push({doc:D,sharedHist:B.sharedHist});D.linked=[{doc:this,isParent:true,sharedHist:B.sharedHist}];GV(D,Lh(this));return D},unlinkDoc:function(C){if(C instanceof HC){C=C.doc}if(this.linked){for(var D=0;D<this.linked.length;++D){var B=this.linked[D];if(B.doc!=C){continue}this.linked.splice(D,1);C.unlinkDoc(this);In(Lh(this));break}}if(C.history==this.history){var A=[C.id];Kf(C,function(E){A.push(E.id)},true);C.history=new Mr(null);C.history.done=HM(this.history.done,A);C.history.undone=HM(this.history.undone,A)}},iterLinkedDocs:function(A){Kf(this,A)},getMode:function(){return this.mode},getEditor:function(){return this.cm}});K6.prototype.eachLine=K6.prototype.iter;var Lo="iter insert remove copy getEditor".split(" ");for(var Kl in K6.prototype){if(K6.prototype.hasOwnProperty(Kl)&&KZ(Lo,Kl)<0){HC.prototype[Kl]=(function(A){return function(){return A.apply(this.doc,arguments)}})(K6.prototype[Kl])}}IU(K6);function Kf(C,A,B){function D(E,I,J){if(E.linked){for(var F=0;F<E.linked.length;++F){var G=E.linked[F];if(G.doc==I){continue}var H=J&&G.sharedHist;if(B&&!H){continue}A(G.doc,H);D(G.doc,E,H)}}}D(C,null,true)}function HR(B,A){if(A.cm){throw new Error("This document is already in use.")}B.doc=A;A.cm=B;Lj(B);KU(B);if(!B.options.lineWrapping){Ib(B)}B.options.mode=A.modeOption;GI(B)}function Gn(F,B){B-=F.first;if(B<0||B>=F.size){throw new Error("There is no line "+(B+F.first)+" in the document.")}for(var C=F;!C.lines;){for(var A=0;;++A){var E=C.children[A],D=E.chunkSize();if(B<D){C=E;break}B-=D}}return C.lines[B]}function Hj(D,C,B){var A=[],E=C.line;D.iter(C.line,B.line+1,function(F){var G=F.text;if(E==B.line){G=G.slice(0,B.ch)}if(E==C.line){G=G.slice(C.ch)}A.push(G);++E});return A}function Mq(C,D,A){var B=[];C.iter(D,A,function(E){B.push(E.text)});return B}function Mh(B,C){var A=C-B.height;if(A){for(var D=B;D;D=D.parent){D.height+=A}}}function Jp(B){if(B.parent==null){return null}var C=B.parent,A=KZ(C.lines,B);for(var D=C.parent;D;C=D,D=D.parent){for(var E=0;;++E){if(D.children[E]==C){break}A+=D.children[E].chunkSize()}}return A+C.first}function G4(D,F){var H=D.first;outer:do{for(var A=0;A<D.children.length;++A){var C=D.children[A],G=C.height;if(F<G){D=C;continue outer}F-=G;H+=C.chunkSize()}return H}while(!D.lines);for(var A=0;A<D.lines.length;++A){var B=D.lines[A],E=B.height;if(F<E){break}F-=E}return H+A}function Mm(F){F=Hh(F);var D=0,B=F.parent;for(var A=0;A<B.lines.length;++A){var G=B.lines[A];if(G==F){break}else{D+=G.height}}for(var C=B.parent;C;B=C,C=B.parent){for(var A=0;A<C.children.length;++A){var E=C.children[A];if(E==B){break}else{D+=E.height}}}return D}function I8(A){var B=A.order;if(B==null){B=A.order=Kq(A.text)}return B}function Mr(A){this.done=[];this.undone=[];this.undoDepth=Infinity;this.lastModTime=this.lastSelTime=0;this.lastOp=this.lastSelOp=null;this.lastOrigin=this.lastSelOrigin=null;this.generation=this.maxGeneration=A||1}function Ld(B,C){var A={from:GT(C.from),to:LF(C),text:Hj(B,C.from,C.to)};Ji(B,A,C.from.line,C.to.line+1);Kf(B,function(D){Ji(D,A,C.from.line,C.to.line+1)},true);return A}function MC(B){while(B.length){var A=Jx(B);if(A.ranges){B.pop()}else{break}}}function Jw(A,B){if(B){MC(A.done);return Jx(A.done)}else{if(A.done.length&&!Jx(A.done).ranges){return Jx(A.done)}else{if(A.done.length>1&&!A.done[A.done.length-2].ranges){A.done.pop();return Jx(A.done)}}}}function Kk(H,F,G,D){var A=H.history;A.undone.length=0;var C=+new Date,I;if((A.lastOp==D||A.lastOrigin==F.origin&&F.origin&&((F.origin.charAt(0)=="+"&&H.cm&&A.lastModTime>C-H.cm.options.historyEventDelay)||F.origin.charAt(0)=="*"))&&(I=Jw(A,A.lastOp==D))){var B=Jx(I.changes);if(Gx(F.from,F.to)==0&&Gx(F.from,B.to)==0){B.to=LF(F)}else{I.changes.push(Ld(H,F))}}else{var E=Jx(A.done);if(!E||!E.ranges){Hk(H.sel,A.done)}I={changes:[Ld(H,F)],generation:A.generation};A.done.push(I);while(A.done.length>A.undoDepth){A.done.shift();if(!A.done[0].ranges){A.done.shift()}}}A.done.push(G);A.generation=++A.maxGeneration;A.lastModTime=A.lastSelTime=C;A.lastOp=A.lastSelOp=D;A.lastOrigin=A.lastSelOrigin=F.origin;if(!B){Je(H,"historyAdded")}}function Gc(D,B,C,A){var E=B.charAt(0);return E=="*"||E=="+"&&C.ranges.length==A.ranges.length&&C.somethingSelected()==A.somethingSelected()&&new Date-D.history.lastSelTime<=(D.cm?D.cm.options.historyEventDelay:500)}function Il(F,D,E,C){var A=F.history,B=C&&C.origin;if(E==A.lastSelOp||(B&&A.lastSelOrigin==B&&(A.lastModTime==A.lastSelTime&&A.lastOrigin==B||Gc(F,B,Jx(A.done),D)))){A.done[A.done.length-1]=D}else{Hk(D,A.done)}A.lastSelTime=+new Date;A.lastSelOrigin=B;A.lastSelOp=E;if(C&&C.clearRedo!==false){MC(A.undone)}}function Hk(B,C){var A=Jx(C);if(!(A&&A.ranges&&A.equals(B))){C.push(B)}}function Ji(F,A,C,B){var E=A["spans_"+F.id],D=0;F.iter(Math.max(F.first,C),Math.min(F.first+F.size,B),function(G){if(G.markedSpans){(E||(E=A["spans_"+F.id]={}))[D]=G.markedSpans}++D})}function Mi(B){if(!B){return null}for(var C=0,A;C<B.length;++C){if(B[C].marker.explicitlyCleared){if(!A){A=B.slice(0,C)}}else{if(A){A.push(B[C])}}}return !A?B:A.length?A:null}function GD(D,B){var C=B["spans_"+D.id];if(!C){return null}for(var A=0,E=[];A<B.text.length;++A){E.push(Mi(C[A]))}return E}function HM(D,E,B){for(var J=0,H=[];J<D.length;++J){var L=D[J];if(L.ranges){H.push(B?K2.prototype.deepCopy.call(L):L);continue}var K=L.changes,F=[];H.push({changes:F});for(var G=0;G<K.length;++G){var C=K[G],A;F.push({from:C.from,to:C.to,text:C.text});if(E){for(var I in C){if(A=I.match(/^spans_(\d+)$/)){if(KZ(E,Number(A[1]))>-1){Jx(F)[I]=C[I];delete C[I]}}}}}}return H}function Mu(B,C,A,D){if(A<B.line){B.line+=D}else{if(C<B.line){B.line=C;B.ch=0}}}function Jq(F,G,E,H){for(var I=0;I<F.length;++I){var C=F[I],A=true;if(C.ranges){if(!C.copied){C=F[I]=C.deepCopy();C.copied=true}for(var D=0;D<C.ranges.length;D++){Mu(C.ranges[D].anchor,G,E,H);Mu(C.ranges[D].head,G,E,H)}continue}for(var D=0;D<C.changes.length;++D){var B=C.changes[D];if(E<B.from.line){B.from=KM(B.from.line+H,B.from.ch);B.to=KM(B.to.line+H,B.to.ch)}else{if(G<=B.to.line){A=false;break}}}if(!A){F.splice(0,I+1);I=0}}}function LO(D,A){var E=A.from.line,C=A.to.line,B=A.text.length-(C-E)-1;Jq(D.done,E,C,B);Jq(D.undone,E,C,B)}var JT=HC.e_preventDefault=function(A){if(A.preventDefault){A.preventDefault()}else{A.returnValue=false}};var H1=HC.e_stopPropagation=function(A){if(A.stopPropagation){A.stopPropagation()}else{A.cancelBubble=true}};function Jz(A){return A.defaultPrevented!=null?A.defaultPrevented:A.returnValue==false}var Ly=HC.e_stop=function(A){JT(A);H1(A)};function Mn(A){return A.target||A.srcElement}function KS(B){var A=B.which;if(A==null){if(B.button&1){A=1}else{if(B.button&2){A=3}else{if(B.button&4){A=2}}}}if(GA&&B.ctrlKey&&A==1){A=3}return A}var H3=HC.on=function(B,C,E){if(B.addEventListener){B.addEventListener(C,E,false)}else{if(B.attachEvent){B.attachEvent("on"+C,E)}else{var A=B._handlers||(B._handlers={});var D=A[C]||(A[C]=[]);D.push(E)}}};var GG=HC.off=function(B,C,D){if(B.removeEventListener){B.removeEventListener(C,D,false)}else{if(B.detachEvent){B.detachEvent("on"+C,D)}else{var A=B._handlers&&B._handlers[C];if(!A){return}for(var E=0;E<A.length;++E){if(A[E]==D){A.splice(E,1);break}}}}};var Je=HC.signal=function(B,C){var A=B._handlers&&B._handlers[C];if(!A){return}var D=Array.prototype.slice.call(arguments,2);for(var E=0;E<A.length;++E){A[E].apply(null,D)}};var JV=null;function HU(D,F){var G=D._handlers&&D._handlers[F];if(!G){return}var B=Array.prototype.slice.call(arguments,2),E;if(F3){E=F3.delayedCallbacks}else{if(JV){E=JV}else{E=JV=[];setTimeout(HL,0)}}function C(H){return function(){H.apply(null,B)}}for(var A=0;A<G.length;++A){E.push(C(G[A]))}}function HL(){var A=JV;JV=null;for(var B=0;B<A.length;++B){A[B]()}}function Gk(B,C,A){Je(B,A||C.type,B,C);return Jz(C)||C.codemirrorIgnore}function Mw(C){var A=C._handlers&&C._handlers.cursorActivity;if(!A){return}var B=C.curOp.cursorActivityHandlers||(C.curOp.cursorActivityHandlers=[]);for(var D=0;D<A.length;++D){if(KZ(B,A[D])==-1){B.push(A[D])}}}function Hx(A,C){var B=A._handlers&&A._handlers[C];return B&&B.length>0}function IU(A){A.prototype.on=function(B,C){H3(this,B,C)};A.prototype.off=function(B,C){GG(this,B,C)}}var IB=30;var LG=HC.Pass={toString:function(){return"CodeMirror.Pass"}};var JQ={scroll:false},Kd={origin:"*mouse"},KA={origin:"+move"};function LL(){this.id=null}LL.prototype.set=function(B,A){clearTimeout(this.id);this.id=setTimeout(A,B)};var JX=HC.countColumn=function(F,C,H,E,B){if(C==null){C=F.search(/[^\s\u00a0]/);if(C==-1){C=F.length}}for(var G=E||0,D=B||0;;){var A=F.indexOf("\t",G);if(A<0||A>=C){return D+(C-G)}D+=A-G;D+=H-(D%H);G=A+1}};function Jm(E,D,B){for(var A=0,F=0;;){var G=E.indexOf("\t",A);if(G==-1){G=E.length}var C=G-A;if(G==E.length||F+C>=D){return A+Math.min(C,D-F)}F+=G-A;F+=B-(F%B);A=G+1;if(F>=D){return A}}}var GR=[""];function LZ(A){while(GR.length<=A){GR.push(Jx(GR)+" ")}return GR[A]}function Jx(A){return A[A.length-1]}var Mc=function(A){A.select()};if(KL){Mc=function(A){A.selectionStart=0;A.selectionEnd=A.value.length}}else{if(Jg){Mc=function(B){try{B.select()}catch(A){}}}}function KZ(C,B){for(var A=0;A<C.length;++A){if(C[A]==B){return A}}return -1}if([].indexOf){KZ=function(B,A){return B.indexOf(A)}}function Lg(C,A){var B=[];for(var D=0;D<C.length;D++){B[D]=A(C[D],D)}return B}if([].map){Lg=function(B,A){return B.map(A)}}function Ko(C,B){var A;if(Object.create){A=Object.create(C)}else{var D=function(){};D.prototype=C;A=new D()}if(B){J0(B,A)}return A}function J0(C,A,D){if(!A){A={}}for(var B in C){if(C.hasOwnProperty(B)&&(D!==false||!A.hasOwnProperty(B))){A[B]=C[B]}}return A}function G2(A){var B=Array.prototype.slice.call(arguments,1);return function(){return A.apply(null,B)}}var L6=/[\u00df\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;var Ha=HC.isWordChar=function(A){return/\w/.test(A)||A>"\x80"&&(A.toUpperCase()!=A.toLowerCase()||L6.test(A))};function Jj(B,A){if(!A){return Ha(B)}if(A.source.indexOf("\\w")>-1&&Ha(B)){return true}return A.test(B)}function JH(B){for(var A in B){if(B.hasOwnProperty(A)&&B[A]){return false}}return true}var Ik=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function I5(A){return A.charCodeAt(0)>=768&&Ik.test(A)}function Kj(C,F,A,E){var B=document.createElement(C);if(A){B.className=A}if(E){B.style.cssText=E}if(typeof F=="string"){B.appendChild(document.createTextNode(F))}else{if(F){for(var D=0;D<F.length;++D){B.appendChild(F[D])}}}return B}var Hg;if(document.createRange){Hg=function(A,C,B){var D=document.createRange();D.setEnd(A,B);D.setStart(A,C);return D}}else{Hg=function(A,C,B){var D=document.body.createTextRange();D.moveToElementText(A.parentNode);D.collapse(true);D.moveEnd("character",B);D.moveStart("character",C);return D}}function Hq(A){for(var B=A.childNodes.length;B>0;--B){A.removeChild(A.firstChild)}return A}function HE(A,B){return Hq(A).appendChild(B)}function G5(A,B){if(A.contains){return A.contains(B)}while(B=B.parentNode){if(B==A){return true}}}function Jr(){return document.activeElement}if(Jg&&KO<11){Jr=function(){try{return document.activeElement}catch(A){return document.body}}}function IO(A){return new RegExp("\\b"+A+"\\b\\s*")}function Hl(A,B){var C=IO(B);if(C.test(A.className)){A.className=A.className.replace(C,"")}}function Mv(B,A){if(!IO(A).test(B.className)){B.className+=" "+A}}function Gp(C,A){var B=C.split(" ");for(var D=0;D<B.length;D++){if(B[D]&&!IO(B[D]).test(A)){A+=" "+B[D]}}return A}function IK(C){if(!document.body.getElementsByClassName){return}var D=document.body.getElementsByClassName("CodeMirror");for(var A=0;A<D.length;A++){var B=D[A].CodeMirror;if(B){C(B)}}}var K4=false;function F9(){if(K4){return}LS();K4=true}function LS(){var A;H3(window,"resize",function(){if(A==null){A=setTimeout(function(){A=null;J5=null;IK(Km)},100)}});H3(window,"blur",function(){IK(HJ)})}var HK=function(){if(Jg&&KO<9){return false}var A=Kj("div");return"draggable" in A||"dragDrop" in A}();var J5;function Gb(A){if(J5!=null){return J5}var B=Kj("div",null,null,"width: 50px; height: 50px; overflow-x: scroll");HE(A,B);if(B.offsetWidth){J5=B.offsetHeight-B.clientHeight}return J5||0}var Ki;function GK(A){if(Ki==null){var B=Kj("span","\u200b");HE(A,Kj("span",[B,document.createTextNode("x")]));if(A.firstChild.offsetHeight!=0){Ki=B.offsetWidth<=1&&B.offsetHeight>2&&!(Jg&&KO<8)}}if(Ki){return Kj("span","\u200b")}else{return Kj("span","\u00a0",null,"display: inline-block; width: 1px; margin-right: -1px")}}var Gt;function LT(C){if(Gt!=null){return Gt}var B=HE(C,document.createTextNode("A\u062eA"));var D=Hg(B,0,1).getBoundingClientRect();if(!D||D.left==D.right){return false}var A=Hg(B,1,2).getBoundingClientRect();return Gt=(A.right-D.right<3)}var JR=HC.splitLines="\n\nb".split(/\n/).length!=3?function(G){var D=0,C=[],E=G.length;while(D<=E){var F=G.indexOf("\n",D);if(F==-1){F=G.length}var B=G.slice(D,G.charAt(F-1)=="\r"?F-1:F);var A=B.indexOf("\r");if(A!=-1){C.push(B.slice(0,A));D+=A+1}else{C.push(B);D=F+1}}return C}:function(A){return A.split(/\r\n?|\n/)};var JO=window.getSelection?function(A){try{return A.selectionStart!=A.selectionEnd}catch(B){return false}}:function(A){try{var B=A.ownerDocument.selection.createRange()}catch(C){}if(!B||B.parentElement()!=A){return false}return B.compareEndPoints("StartToEnd",B)!=0};var Iv=(function(){var A=Kj("div");if("oncopy" in A){return true}A.setAttribute("oncopy","return;");return typeof A.oncopy=="function"})();var Hp=null;function IP(C){if(Hp!=null){return Hp}var A=HE(C,Kj("span","x"));var D=A.getBoundingClientRect();var B=Hg(A,0,1).getBoundingClientRect();return Hp=Math.abs(D.left-B.left)>1}var K8={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",107:"=",109:"-",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};HC.keyNames=K8;(function(){for(var A=0;A<10;A++){K8[A+48]=K8[A+96]=String(A)}for(var A=65;A<=90;A++){K8[A]=String.fromCharCode(A)}for(var A=1;A<=12;A++){K8[A+111]=K8[A+63235]="F"+A}})();function Mf(D,F,C,B){if(!D){return B(F,C,"ltr")}var G=false;for(var A=0;A<D.length;++A){var E=D[A];if(E.from<C&&E.to>F||F==C&&E.to==F){B(Math.max(E.from,F),Math.min(E.to,C),E.level==1?"rtl":"ltr");G=true}}if(!G){B(F,C,"ltr")}}function JW(A){return A.level%2?A.to:A.from}function Lx(A){return A.level%2?A.from:A.to}function Gq(A){var B=I8(A);return B?JW(B[0]):0}function IS(A){var B=I8(A);if(!B){return A.text.length}return Lx(Jx(B))}function JM(D,C){var A=Gn(D.doc,C);var E=Hh(A);if(E!=A){C=Jp(E)}var B=I8(E);var F=!B?0:B[0].level%2?IS(E):Gq(E);return KM(C,F)}function I1(F,A){var C,E=Gn(F.doc,A);while(C=K3(E)){E=C.find(1,true).line;A=null}var D=I8(E);var B=!D?E.text.length:D[0].level%2?Gq(E):IS(E);return KM(A==null?Jp(E):A,B)}function Jn(G,C){var B=JM(G,C.line);var E=Gn(G.doc,B.line);var D=I8(E);if(!D||D[0].level==0){var A=Math.max(0,E.text.search(/\S/));var F=C.line==B.line&&C.ch<=A&&C.ch;return KM(B.line,F?0:A)}return B}function Jv(A,C,B){var D=A[0].level;if(C==D){return true}if(B==D){return false}return C<B}var IT;function F1(C,B){IT=null;for(var A=0,D;A<C.length;++A){var E=C[A];if(E.from<B&&E.to>B){return A}if((E.from==B||E.to==B)){if(D==null){D=A}else{if(Jv(C,E.level,C[D].level)){if(E.from!=E.to){IT=D}return A}else{if(E.from!=E.to){IT=A}return D}}}}return D}function H5(C,B,D,A){if(!A){return B+D}do{B+=D}while(B>0&&I5(C.text.charAt(B)));return B}function LP(B,E,A,C){var G=I8(B);if(!G){return K7(B,E,A,C)}var H=F1(G,E),F=G[H];var D=H5(B,E,F.level%2?-A:A,C);for(;;){if(D>F.from&&D<F.to){return D}if(D==F.from||D==F.to){if(F1(G,D)==H){return D}F=G[H+=A];return(A>0)==F.level%2?F.to:F.from}else{F=G[H+=A];if(!F){return null}if((A>0)==F.level%2){D=H5(B,F.to,-1,C)}else{D=H5(B,F.from,1,C)}}}}function K7(C,D,E,A){var B=D+E;if(A){while(B>0&&I5(C.text.charAt(B))){B+=E}}return B<0||B>C.text.length?null:B}var Kq=(function(){var G="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN";var F="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm";function E(K){if(K<=247){return G.charAt(K)}else{if(1424<=K&&K<=1524){return"R"}else{if(1536<=K&&K<=1773){return F.charAt(K-1536)}else{if(1774<=K&&K<=2220){return"r"}else{if(8192<=K&&K<=8203){return"w"}else{if(K==8204){return"b"}else{return"L"}}}}}}}var H=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;var J=/[stwN]/,I=/[LRr]/,D=/[Lb1n]/,A=/[1n]/;var B="L";function C(K,L,M){this.level=K;this.from=L;this.to=M}return function(K){if(!H.test(K)){return false}var T=K.length,W=[];for(var a=0,V;a<T;++a){W.push(V=E(K.charCodeAt(a)))}for(var a=0,L=B;a<T;++a){var V=W[a];if(V=="m"){W[a]=L}else{L=V}}for(var a=0,R=B;a<T;++a){var V=W[a];if(V=="1"&&R=="r"){W[a]="n"}else{if(I.test(V)){R=V;if(V=="r"){W[a]="R"}}}}for(var a=1,L=W[0];a<T-1;++a){var V=W[a];if(V=="+"&&L=="1"&&W[a+1]=="1"){W[a]="1"}else{if(V==","&&L==W[a+1]&&(L=="1"||L=="n")){W[a]=L}}L=V}for(var a=0;a<T;++a){var V=W[a];if(V==","){W[a]="N"}else{if(V=="%"){for(var b=a+1;b<T&&W[b]=="%";++b){}var S=(a&&W[a-1]=="!")||(b<T&&W[b]=="1")?"1":"N";for(var P=a;P<b;++P){W[P]=S}a=b-1}}}for(var a=0,R=B;a<T;++a){var V=W[a];if(R=="L"&&V=="1"){W[a]="L"}else{if(I.test(V)){R=V}}}for(var a=0;a<T;++a){if(J.test(W[a])){for(var b=a+1;b<T&&J.test(W[b]);++b){}var Q=(a?W[a-1]:B)=="L";var M=(b<T?W[b]:B)=="L";var S=Q||M?"L":"R";for(var P=a;P<b;++P){W[P]=S}a=b-1}}var X=[],Z;for(var a=0;a<T;){if(D.test(W[a])){var U=a;for(++a;a<T&&D.test(W[a]);++a){}X.push(new C(0,U,a))}else{var N=a,O=X.length;for(++a;a<T&&W[a]!="L";++a){}for(var P=N;P<a;){if(A.test(W[P])){if(N<P){X.splice(O,0,new C(1,N,P))}var Y=P;for(++P;P<a&&A.test(W[P]);++P){}X.splice(O,0,new C(2,Y,P));N=P}else{++P}}if(N<a){X.splice(O,0,new C(1,N,a))}}}if(X[0].level==1&&(Z=K.match(/^\s+/))){X[0].from=Z[0].length;X.unshift(new C(0,0,Z[0].length))}if(Jx(X).level==1&&(Z=K.match(/\s+$/))){Jx(X).to-=Z[0].length;X.push(new C(0,T-Z[0].length,T))}if(X[0].level!=Jx(X).level){X.push(new C(X[0].level,T,T))}return X}})();HC.version="4.7.0";return HC});