(function(){function B(){this.Diff_Timeout=1;this.Diff_EditCost=4;this.Match_Threshold=0.5;this.Match_Distance=1000;this.Patch_DeleteThreshold=0.5;this.Patch_Margin=4;this.Match_MaxBits=32}B.prototype.diff_main=function(I,K,A,M){"undefined"==typeof M&&(M=0>=this.Diff_Timeout?Number.MAX_VALUE:(new Date).getTime()+1000*this.Diff_Timeout);if(null==I||null==K){throw Error("Null input. (diff_main)")}if(I==K){return I?[[0,I]]:[]}"undefined"==typeof A&&(A=!0);var J=A,N=this.diff_commonPrefix(I,K);A=I.substring(0,N);I=I.substring(N);K=K.substring(N);var N=this.diff_commonSuffix(I,K),L=I.substring(I.length-N);I=I.substring(0,I.length-N);K=K.substring(0,K.length-N);I=this.diff_compute_(I,K,J,M);A&&I.unshift([0,A]);L&&I.push([0,L]);this.diff_cleanupMerge(I);return I};B.prototype.diff_compute_=function(I,K,A,M){if(!I){return[[1,K]]}if(!K){return[[-1,I]]}var J=I.length>K.length?I:K,N=I.length>K.length?K:I,L=J.indexOf(N);return -1!=L?(A=[[1,J.substring(0,L)],[0,N],[1,J.substring(L+N.length)]],I.length>K.length&&(A[0][0]=A[2][0]=-1),A):1==N.length?[[-1,I],[1,K]]:(J=this.diff_halfMatch_(I,K))?(N=J[0],I=J[1],L=J[2],K=J[3],J=J[4],N=this.diff_main(N,L,A,M),A=this.diff_main(I,K,A,M),N.concat([[0,J]],A)):A&&100<I.length&&100<K.length?this.diff_lineMode_(I,K,M):this.diff_bisect_(I,K,M)};B.prototype.diff_lineMode_=function(I,K,A){var M=this.diff_linesToChars_(I,K);I=M.chars1;K=M.chars2;M=M.lineArray;I=this.diff_main(I,K,!1,A);this.diff_charsToLines_(I,M);this.diff_cleanupSemantic(I);I.push([0,""]);for(var J=M=K=0,N="",L="";K<I.length;){switch(I[K][0]){case 1:J++;L+=I[K][1];break;case -1:M++;N+=I[K][1];break;case 0:if(1<=M&&1<=J){I.splice(K-M-J,M+J);K=K-M-J;M=this.diff_main(N,L,!1,A);for(J=M.length-1;0<=J;J--){I.splice(K,0,M[J])}K+=M.length}M=J=0;L=N=""}K++}I.pop();return I};B.prototype.diff_bisect_=function(X,Z,A){for(var a=X.length,b=Z.length,c=Math.ceil((a+b)/2),d=c,k=2*c,e=Array(k),l=Array(k),f=0;f<k;f++){e[f]=-1,l[f]=-1}e[d+1]=0;l[d+1]=0;for(var f=a-b,r=0!=f%2,m=0,g=0,q=0,p=0,o=0;o<c&&!((new Date).getTime()>A);o++){for(var i=-o+m;i<=o-g;i+=2){var j=d+i,Y;Y=i==-o||i!=o&&e[j-1]<e[j+1]?e[j+1]:e[j-1]+1;for(var n=Y-i;Y<a&&n<b&&X.charAt(Y)==Z.charAt(n);){Y++,n++}e[j]=Y;if(Y>a){g+=2}else{if(n>b){m+=2}else{if(r&&(j=d+f-i,0<=j&&j<k&&-1!=l[j])){var h=a-l[j];if(Y>=h){return this.diff_bisectSplit_(X,Z,Y,n,A)}}}}}for(i=-o+q;i<=o-p;i+=2){j=d+i;h=i==-o||i!=o&&l[j-1]<l[j+1]?l[j+1]:l[j-1]+1;for(Y=h-i;h<a&&Y<b&&X.charAt(a-h-1)==Z.charAt(b-Y-1);){h++,Y++}l[j]=h;if(h>a){p+=2}else{if(Y>b){q+=2}else{if(!r&&(j=d+f-i,0<=j&&(j<k&&-1!=e[j])&&(Y=e[j],n=d+Y-j,h=a-h,Y>=h))){return this.diff_bisectSplit_(X,Z,Y,n,A)}}}}}return[[-1,X],[1,Z]]};B.prototype.diff_bisectSplit_=function(I,K,A,M,J){var N=I.substring(0,A),L=K.substring(0,M);I=I.substring(A);K=K.substring(M);N=this.diff_main(N,L,!1,J);J=this.diff_main(I,K,!1,J);return N.concat(J)};B.prototype.diff_linesToChars_=function(I,K){function A(G){for(var C="",F=0,E=-1,D=M.length;E<G.length-1;){E=G.indexOf("\n",F);-1==E&&(E=G.length-1);var H=G.substring(F,E+1),F=E+1;(J.hasOwnProperty?J.hasOwnProperty(H):void 0!==J[H])?C+=String.fromCharCode(J[H]):(C+=String.fromCharCode(D),J[H]=D,M[D++]=H)}return C}var M=[],J={};M[0]="";var N=A(I),L=A(K);return{chars1:N,chars2:L,lineArray:M}};B.prototype.diff_charsToLines_=function(A,I){for(var J=0;J<A.length;J++){for(var K=A[J][1],L=[],H=0;H<K.length;H++){L[H]=I[K.charCodeAt(H)]}A[J][1]=L.join("")}};B.prototype.diff_commonPrefix=function(A,I){if(!A||!I||A.charAt(0)!=I.charAt(0)){return 0}for(var J=0,K=Math.min(A.length,I.length),L=K,H=0;J<L;){A.substring(H,L)==I.substring(H,L)?H=J=L:K=L,L=Math.floor((K-J)/2+J)}return L};B.prototype.diff_commonSuffix=function(A,I){if(!A||!I||A.charAt(A.length-1)!=I.charAt(I.length-1)){return 0}for(var J=0,K=Math.min(A.length,I.length),L=K,H=0;J<L;){A.substring(A.length-L,A.length-H)==I.substring(I.length-L,I.length-H)?H=J=L:K=L,L=Math.floor((K-J)/2+J)}return L};B.prototype.diff_commonOverlap_=function(A,I){var J=A.length,K=I.length;if(0==J||0==K){return 0}J>K?A=A.substring(J-K):J<K&&(I=I.substring(0,J));J=Math.min(J,K);if(A==I){return J}for(var K=0,L=1;;){var H=A.substring(J-L),H=I.indexOf(H);if(-1==H){return K}L+=H;if(0==H||A.substring(J-L)==I.substring(0,L)){K=L,L++}}};B.prototype.diff_halfMatch_=function(O,Q){function N(Y,H,I){for(var X=Y.substring(I,I+Math.floor(Y.length/4)),C=-1,Z="",D,G,E,J;-1!=(C=H.indexOf(X,C+1));){var W=A.diff_commonPrefix(Y.substring(I),H.substring(C)),F=A.diff_commonSuffix(Y.substring(0,I),H.substring(0,C));Z.length<F+W&&(Z=H.substring(C-F,C)+H.substring(C,C+W),D=Y.substring(0,I-F),G=Y.substring(I+W),E=H.substring(0,C-F),J=H.substring(C+W))}return 2*Z.length>=Y.length?[D,G,E,J,Z]:null}if(0>=this.Diff_Timeout){return null}var R=O.length>Q.length?O:Q,L=O.length>Q.length?Q:O;if(4>R.length||2*L.length<R.length){return null}var A=this,K=N(R,L,Math.ceil(R.length/4)),R=N(R,L,Math.ceil(R.length/2)),P;if(!K&&!R){return null}P=R?K?K[4].length>R[4].length?K:R:R:K;var M;O.length>Q.length?(K=P[0],R=P[1],L=P[2],M=P[3]):(L=P[0],M=P[1],K=P[2],R=P[3]);P=P[4];return[K,R,L,M,P]};B.prototype.diff_cleanupSemantic=function(L){for(var P=!1,Q=[],A=0,N=null,M=0,T=0,R=0,O=0,S=0;M<L.length;){0==L[M][0]?(Q[A++]=M,T=O,R=S,S=O=0,N=L[M][1]):(1==L[M][0]?O+=L[M][1].length:S+=L[M][1].length,N&&(N.length<=Math.max(T,R)&&N.length<=Math.max(O,S))&&(L.splice(Q[A-1],0,[-1,N]),L[Q[A-1]+1][0]=1,A--,A--,M=0<A?Q[A-1]:-1,S=O=R=T=0,N=null,P=!0)),M++}P&&this.diff_cleanupMerge(L);this.diff_cleanupSemanticLossless(L);for(M=1;M<L.length;){if(-1==L[M-1][0]&&1==L[M][0]){P=L[M-1][1];Q=L[M][1];A=this.diff_commonOverlap_(P,Q);N=this.diff_commonOverlap_(Q,P);if(A>=N){if(A>=P.length/2||A>=Q.length/2){L.splice(M,0,[0,Q.substring(0,A)]),L[M-1][1]=P.substring(0,P.length-A),L[M+1][1]=Q.substring(A),M++}}else{if(N>=P.length/2||N>=Q.length/2){L.splice(M,0,[0,P.substring(0,N)]),L[M-1][0]=1,L[M-1][1]=Q.substring(0,Q.length-N),L[M+1][0]=-1,L[M+1][1]=P.substring(N),M++}}M++}M++}};B.prototype.diff_cleanupSemanticLossless=function(N){function S(G,I){if(!G||!I){return 6}var F=G.charAt(G.length-1),J=I.charAt(0),E=F.match(B.nonAlphaNumericRegex_),K=J.match(B.nonAlphaNumericRegex_),L=E&&F.match(B.whitespaceRegex_),D=K&&J.match(B.whitespaceRegex_),F=L&&F.match(B.linebreakRegex_),J=D&&J.match(B.linebreakRegex_),H=F&&G.match(B.blanklineEndRegex_),C=J&&I.match(B.blanklineStartRegex_);return H||C?5:F||J?4:E&&!L&&D?3:L||D?2:E||K?1:0}for(var M=1;M<N.length-1;){if(0==N[M-1][0]&&0==N[M+1][0]){var O=N[M-1][1],P=N[M][1],V=N[M+1][1],A=this.diff_commonSuffix(O,P);if(A){var U=P.substring(P.length-A),O=O.substring(0,O.length-A),P=U+P.substring(0,P.length-A),V=U+V}for(var A=O,U=P,Q=V,R=S(O,P)+S(P,V);P.charAt(0)===V.charAt(0);){var O=O+P.charAt(0),P=P.substring(1)+V.charAt(0),V=V.substring(1),T=S(O,P)+S(P,V);T>=R&&(R=T,A=O,U=P,Q=V)}N[M-1][1]!=A&&(A?N[M-1][1]=A:(N.splice(M-1,1),M--),N[M][1]=U,Q?N[M+1][1]=Q:(N.splice(M+1,1),M--))}M++}};B.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/;B.whitespaceRegex_=/\s/;B.linebreakRegex_=/[\r\n]/;B.blanklineEndRegex_=/\n\r?\n$/;B.blanklineStartRegex_=/^\r?\n\r?\n/;B.prototype.diff_cleanupEfficiency=function(L){for(var P=!1,Q=[],A=0,N=null,M=0,T=!1,R=!1,O=!1,S=!1;M<L.length;){if(0==L[M][0]){L[M][1].length<this.Diff_EditCost&&(O||S)?(Q[A++]=M,T=O,R=S,N=L[M][1]):(A=0,N=null),O=S=!1}else{if(-1==L[M][0]?S=!0:O=!0,N&&(T&&R&&O&&S||N.length<this.Diff_EditCost/2&&3==T+R+O+S)){L.splice(Q[A-1],0,[-1,N]),L[Q[A-1]+1][0]=1,A--,N=null,T&&R?(O=S=!0,A=0):(A--,M=0<A?Q[A-1]:-1,O=S=!1),P=!0}}M++}P&&this.diff_cleanupMerge(L)};B.prototype.diff_cleanupMerge=function(I){I.push([0,""]);for(var K=0,A=0,M=0,J="",N="",L;K<I.length;){switch(I[K][0]){case 1:M++;N+=I[K][1];K++;break;case -1:A++;J+=I[K][1];K++;break;case 0:1<A+M?(0!==A&&0!==M&&(L=this.diff_commonPrefix(N,J),0!==L&&(0<K-A-M&&0==I[K-A-M-1][0]?I[K-A-M-1][1]+=N.substring(0,L):(I.splice(0,0,[0,N.substring(0,L)]),K++),N=N.substring(L),J=J.substring(L)),L=this.diff_commonSuffix(N,J),0!==L&&(I[K][1]=N.substring(N.length-L)+I[K][1],N=N.substring(0,N.length-L),J=J.substring(0,J.length-L))),0===A?I.splice(K-M,A+M,[1,N]):0===M?I.splice(K-A,A+M,[-1,J]):I.splice(K-A-M,A+M,[-1,J],[1,N]),K=K-A-M+(A?1:0)+(M?1:0)+1):0!==K&&0==I[K-1][0]?(I[K-1][1]+=I[K][1],I.splice(K,1)):K++,A=M=0,N=J=""}}""===I[I.length-1][1]&&I.pop();A=!1;for(K=1;K<I.length-1;){0==I[K-1][0]&&0==I[K+1][0]&&(I[K][1].substring(I[K][1].length-I[K-1][1].length)==I[K-1][1]?(I[K][1]=I[K-1][1]+I[K][1].substring(0,I[K][1].length-I[K-1][1].length),I[K+1][1]=I[K-1][1]+I[K+1][1],I.splice(K-1,1),A=!0):I[K][1].substring(0,I[K+1][1].length)==I[K+1][1]&&(I[K-1][1]+=I[K+1][1],I[K][1]=I[K][1].substring(I[K+1][1].length)+I[K+1][1],I.splice(K+1,1),A=!0)),K++}A&&this.diff_cleanupMerge(I)};B.prototype.diff_xIndex=function(I,K){var A=0,M=0,J=0,N=0,L;for(L=0;L<I.length;L++){1!==I[L][0]&&(A+=I[L][1].length);-1!==I[L][0]&&(M+=I[L][1].length);if(A>K){break}J=A;N=M}return I.length!=L&&-1===I[L][0]?N:N+(K-J)};B.prototype.diff_prettyHtml=function(O){for(var Q=[],N=/&/g,R=/</g,L=/>/g,A=/\n/g,K=0;K<O.length;K++){var P=O[K][0],M=O[K][1],M=M.replace(N,"&amp;").replace(R,"&lt;").replace(L,"&gt;").replace(A,"&para;<br>");switch(P){case 1:Q[K]='<ins style="background:#e6ffe6;">'+M+"</ins>";break;case -1:Q[K]='<del style="background:#ffe6e6;">'+M+"</del>";break;case 0:Q[K]="<span>"+M+"</span>"}}return Q.join("")};B.prototype.diff_text1=function(A){for(var E=[],F=0;F<A.length;F++){1!==A[F][0]&&(E[F]=A[F][1])}return E.join("")};B.prototype.diff_text2=function(A){for(var E=[],F=0;F<A.length;F++){-1!==A[F][0]&&(E[F]=A[F][1])}return E.join("")};B.prototype.diff_levenshtein=function(I){for(var K=0,A=0,M=0,J=0;J<I.length;J++){var N=I[J][0],L=I[J][1];switch(N){case 1:A+=L.length;break;case -1:M+=L.length;break;case 0:K+=Math.max(A,M),M=A=0}}return K+=Math.max(A,M)};B.prototype.diff_toDelta=function(A){for(var E=[],F=0;F<A.length;F++){switch(A[F][0]){case 1:E[F]="+"+encodeURI(A[F][1]);break;case -1:E[F]="-"+A[F][1].length;break;case 0:E[F]="="+A[F][1].length}}return E.join("\t").replace(/%20/g," ")};B.prototype.diff_fromDelta=function(L,P){for(var Q=[],A=0,N=0,M=P.split(/\t/g),T=0;T<M.length;T++){var R=M[T].substring(1);switch(M[T].charAt(0)){case"+":try{Q[A++]=[1,decodeURI(R)]}catch(O){throw Error("Illegal escape in diff_fromDelta: "+R)}break;case"-":case"=":var S=parseInt(R,10);if(isNaN(S)||0>S){throw Error("Invalid number in diff_fromDelta: "+R)}R=L.substring(N,N+=S);"="==M[T].charAt(0)?Q[A++]=[0,R]:Q[A++]=[-1,R];break;default:if(M[T]){throw Error("Invalid diff operation in diff_fromDelta: "+M[T])}}}if(N!=L.length){throw Error("Delta length ("+N+") does not equal source text length ("+L.length+").")}return Q};B.prototype.match_main=function(A,E,F){if(null==A||null==E||null==F){throw Error("Null input. (match_main)")}F=Math.max(0,Math.min(F,A.length));return A==E?0:A.length?A.substring(F,F+E.length)==E?F:this.match_bitap_(A,E,F):-1};B.prototype.match_bitap_=function(T,V,W){function e(F,D){var E=F/V.length,C=Math.abs(W-D);return !U.Match_Distance?C?1:E:E+C/U.Match_Distance}if(V.length>this.Match_MaxBits){throw Error("Pattern too long for this browser.")}var X=this.match_alphabet_(V),U=this,d=this.Match_Threshold,S=T.indexOf(V,W);-1!=S&&(d=Math.min(e(0,S),d),S=T.lastIndexOf(V,W+V.length),-1!=S&&(d=Math.min(e(0,S),d)));for(var a=1<<V.length-1,S=-1,f,R,b=V.length+T.length,Z,A=0;A<V.length;A++){f=0;for(R=b;f<R;){e(A,W+R)<=d?f=R:b=R,R=Math.floor((b-f)/2+f)}b=R;f=Math.max(1,W-R+1);var Y=Math.min(W+R,T.length)+V.length;R=Array(Y+2);for(R[Y+1]=(1<<A)-1;Y>=f;Y--){var c=X[T.charAt(Y-1)];R[Y]=0===A?(R[Y+1]<<1|1)&c:(R[Y+1]<<1|1)&c|((Z[Y+1]|Z[Y])<<1|1)|Z[Y+1];if(R[Y]&a&&(c=e(A,Y-1),c<=d)){if(d=c,S=Y-1,S>W){f=Math.max(1,2*W-S)}else{break}}}if(e(A+1,W)>d){break}Z=R}return S};B.prototype.match_alphabet_=function(A){for(var E={},F=0;F<A.length;F++){E[A.charAt(F)]=0}for(F=0;F<A.length;F++){E[A.charAt(F)]|=1<<A.length-F-1}return E};B.prototype.patch_addContext_=function(F,H){if(0!=H.length){for(var A=H.substring(F.start2,F.start2+F.length1),G=0;H.indexOf(A)!=H.lastIndexOf(A)&&A.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;){G+=this.Patch_Margin,A=H.substring(F.start2-G,F.start2+F.length1+G)}G+=this.Patch_Margin;(A=H.substring(F.start2-G,F.start2))&&F.diffs.unshift([0,A]);(G=H.substring(F.start2+F.length1,F.start2+F.length1+G))&&F.diffs.push([0,G]);F.start1-=A.length;F.start2-=A.length;F.length1+=A.length+G.length;F.length2+=A.length+G.length}};B.prototype.patch_make=function(N,S,M){var O;if("string"==typeof N&&"string"==typeof S&&"undefined"==typeof M){O=N,S=this.diff_main(O,S,!0),2<S.length&&(this.diff_cleanupSemantic(S),this.diff_cleanupEfficiency(S))}else{if(N&&"object"==typeof N&&"undefined"==typeof S&&"undefined"==typeof M){S=N,O=this.diff_text1(S)}else{if("string"==typeof N&&S&&"object"==typeof S&&"undefined"==typeof M){O=N}else{if("string"==typeof N&&"string"==typeof S&&M&&"object"==typeof M){O=N,S=M}else{throw Error("Unknown call format to patch_make.")}}}}if(0===S.length){return[]}M=[];N=new B.patch_obj;for(var P=0,V=0,A=0,U=O,Q=0;Q<S.length;Q++){var R=S[Q][0],T=S[Q][1];!P&&0!==R&&(N.start1=V,N.start2=A);switch(R){case 1:N.diffs[P++]=S[Q];N.length2+=T.length;O=O.substring(0,A)+T+O.substring(A);break;case -1:N.length1+=T.length;N.diffs[P++]=S[Q];O=O.substring(0,A)+O.substring(A+T.length);break;case 0:T.length<=2*this.Patch_Margin&&P&&S.length!=Q+1?(N.diffs[P++]=S[Q],N.length1+=T.length,N.length2+=T.length):T.length>=2*this.Patch_Margin&&P&&(this.patch_addContext_(N,U),M.push(N),N=new B.patch_obj,P=0,U=O,V=A)}1!==R&&(V+=T.length);-1!==R&&(A+=T.length)}P&&(this.patch_addContext_(N,U),M.push(N));return M};B.prototype.patch_deepCopy=function(A){for(var I=[],J=0;J<A.length;J++){var K=A[J],L=new B.patch_obj;L.diffs=[];for(var H=0;H<K.diffs.length;H++){L.diffs[H]=K.diffs[H].slice()}L.start1=K.start1;L.start2=K.start2;L.length1=K.length1;L.length2=K.length2;I[J]=L}return I};B.prototype.patch_apply=function(X,N){if(0==X.length){return[N,[]]}X=this.patch_deepCopy(X);var O=this.patch_addPadding(X);N=O+N+O;this.patch_splitMax(X);for(var Q=0,R=[],A=0;A<X.length;A++){var P=X[A].start2+Q,T=this.diff_text1(X[A].diffs),V,U=-1;if(T.length>this.Match_MaxBits){if(V=this.match_main(N,T.substring(0,this.Match_MaxBits),P),-1!=V&&(U=this.match_main(N,T.substring(T.length-this.Match_MaxBits),P+T.length-this.Match_MaxBits),-1==U||V>=U)){V=-1}}else{V=this.match_main(N,T,P)}if(-1==V){R[A]=!1,Q-=X[A].length2-X[A].length1}else{if(R[A]=!0,Q=V-P,P=-1==U?N.substring(V,V+T.length):N.substring(V,U+this.Match_MaxBits),T==P){N=N.substring(0,V)+this.diff_text2(X[A].diffs)+N.substring(V+T.length)}else{if(P=this.diff_main(T,P,!1),T.length>this.Match_MaxBits&&this.diff_levenshtein(P)/T.length>this.Patch_DeleteThreshold){R[A]=!1}else{this.diff_cleanupSemanticLossless(P);for(var T=0,W,U=0;U<X[A].diffs.length;U++){var S=X[A].diffs[U];0!==S[0]&&(W=this.diff_xIndex(P,T));1===S[0]?N=N.substring(0,V+W)+S[1]+N.substring(V+W):-1===S[0]&&(N=N.substring(0,V+W)+N.substring(V+this.diff_xIndex(P,T+S[1].length)));-1!==S[0]&&(T+=S[1].length)}}}}}N=N.substring(O.length,N.length-O.length);return[N,R]};B.prototype.patch_addPadding=function(A){for(var I=this.Patch_Margin,J="",K=1;K<=I;K++){J+=String.fromCharCode(K)}for(K=0;K<A.length;K++){A[K].start1+=I,A[K].start2+=I}var K=A[0],L=K.diffs;if(0==L.length||0!=L[0][0]){L.unshift([0,J]),K.start1-=I,K.start2-=I,K.length1+=I,K.length2+=I}else{if(I>L[0][1].length){var H=I-L[0][1].length;L[0][1]=J.substring(L[0][1].length)+L[0][1];K.start1-=H;K.start2-=H;K.length1+=H;K.length2+=H}}K=A[A.length-1];L=K.diffs;0==L.length||0!=L[L.length-1][0]?(L.push([0,J]),K.length1+=I,K.length2+=I):I>L[L.length-1][1].length&&(H=I-L[L.length-1][1].length,L[L.length-1][1]+=J.substring(0,H),K.length1+=H,K.length2+=H);return J};B.prototype.patch_splitMax=function(L){for(var P=this.Match_MaxBits,Q=0;Q<L.length;Q++){if(!(L[Q].length1<=P)){var A=L[Q];L.splice(Q--,1);for(var N=A.start1,M=A.start2,T="";0!==A.diffs.length;){var R=new B.patch_obj,O=!0;R.start1=N-T.length;R.start2=M-T.length;""!==T&&(R.length1=R.length2=T.length,R.diffs.push([0,T]));for(;0!==A.diffs.length&&R.length1<P-this.Patch_Margin;){var T=A.diffs[0][0],S=A.diffs[0][1];1===T?(R.length2+=S.length,M+=S.length,R.diffs.push(A.diffs.shift()),O=!1):-1===T&&1==R.diffs.length&&0==R.diffs[0][0]&&S.length>2*P?(R.length1+=S.length,N+=S.length,O=!1,R.diffs.push([T,S]),A.diffs.shift()):(S=S.substring(0,P-R.length1-this.Patch_Margin),R.length1+=S.length,N+=S.length,0===T?(R.length2+=S.length,M+=S.length):O=!1,R.diffs.push([T,S]),S==A.diffs[0][1]?A.diffs.shift():A.diffs[0][1]=A.diffs[0][1].substring(S.length))}T=this.diff_text2(R.diffs);T=T.substring(T.length-this.Patch_Margin);S=this.diff_text1(A.diffs).substring(0,this.Patch_Margin);""!==S&&(R.length1+=S.length,R.length2+=S.length,0!==R.diffs.length&&0===R.diffs[R.diffs.length-1][0]?R.diffs[R.diffs.length-1][1]+=S:R.diffs.push([0,S]));O||L.splice(++Q,0,R)}}}};B.prototype.patch_toText=function(A){for(var E=[],F=0;F<A.length;F++){E[F]=A[F]}return E.join("")};B.prototype.patch_fromText=function(M){var O=[];if(!M){return O}M=M.split("\n");for(var P=0,J=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;P<M.length;){var K=M[P].match(J);if(!K){throw Error("Invalid patch string: "+M[P])}var N=new B.patch_obj;O.push(N);N.start1=parseInt(K[1],10);""===K[2]?(N.start1--,N.length1=1):"0"==K[2]?N.length1=0:(N.start1--,N.length1=parseInt(K[2],10));N.start2=parseInt(K[3],10);""===K[4]?(N.start2--,N.length2=1):"0"==K[4]?N.length2=0:(N.start2--,N.length2=parseInt(K[4],10));for(P++;P<M.length;){K=M[P].charAt(0);try{var A=decodeURI(M[P].substring(1))}catch(L){throw Error("Illegal escape in patch_fromText: "+A)}if("-"==K){N.diffs.push([-1,A])}else{if("+"==K){N.diffs.push([1,A])}else{if(" "==K){N.diffs.push([0,A])}else{if("@"==K){break}else{if(""!==K){throw Error('Invalid patch mode "'+K+'" in: '+A)}}}}}P++}}return O};B.patch_obj=function(){this.diffs=[];this.start2=this.start1=null;this.length2=this.length1=0};B.patch_obj.prototype.toString=function(){var A,E;A=0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1;E=0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2;A=["@@ -"+A+" +"+E+" @@\n"];var F;for(E=0;E<this.diffs.length;E++){switch(this.diffs[E][0]){case 1:F="+";break;case -1:F="-";break;case 0:F=" "}A[E+1]=F+encodeURI(this.diffs[E][1])+"\n"}return A.join("").replace(/%20/g," ")};this.diff_match_patch=B;this.DIFF_DELETE=-1;this.DIFF_INSERT=1;this.DIFF_EQUAL=0})();