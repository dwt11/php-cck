(function(){var k=this,u=k.Chart,p=function(B){this.canvas=B.canvas,this.ctx=B;this.width=B.canvas.width,this.height=B.canvas.height;return this.aspectRatio=this.width/this.height,W.retinaScale(this),this};p.defaults={global:{animation:!0,animationSteps:60,animationEasing:"easeOutQuart",showScale:!0,scaleOverride:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:!0,scaleLabel:"<%=value%>",scaleIntegersOnly:!0,scaleBeginAtZero:!1,scaleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",responsive:!1,maintainAspectRatio:!0,showTooltips:!0,tooltipEvents:["mousemove","touchstart","touchmove","mouseout"],tooltipFillColor:"rgba(0,0,0,0.8)",tooltipFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipFontSize:14,tooltipFontStyle:"normal",tooltipFontColor:"#fff",tooltipTitleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipTitleFontSize:14,tooltipTitleFontStyle:"bold",tooltipTitleFontColor:"#fff",tooltipYPadding:6,tooltipXPadding:6,tooltipCaretSize:8,tooltipCornerRadius:6,tooltipXOffset:10,tooltipTemplate:"<%if (label){%><%=label%>: <%}%><%= value %>",multiTooltipTemplate:"<%= value %>",multiTooltipKeyBackground:"#fff",onAnimationProgress:function(){},onAnimationComplete:function(){}}},p.types={};var W=p.helpers={},T=W.each=function(D,I,H){var B=Array.prototype.slice.call(arguments,3);if(D){if(D.length===+D.length){var E;for(E=0;E<D.length;E++){I.apply(H,[D[E],E].concat(B))}}else{for(var G in D){I.apply(H,[D[G],G].concat(B))}}}},A=W.clone=function(B){var D={};return T(B,function(E,G){B.hasOwnProperty(G)&&(D[G]=E)}),D},s=W.extend=function(B){return T(Array.prototype.slice.call(arguments,1),function(D){T(D,function(E,G){D.hasOwnProperty(G)&&(B[G]=E)})}),B},z=W.merge=function(){var B=Array.prototype.slice.call(arguments,0);return B.unshift({}),s.apply(null,B)},g=W.indexOf=function(B,E){if(Array.prototype.indexOf){return B.indexOf(E)}for(var D=0;D<B.length;D++){if(B[D]===E){return D}}return -1},c=(W.where=function(B,E){var D=[];return W.each(B,function(G){E(G)&&D.push(G)}),D},W.findNextWhere=function(E,H,G){G||(G=-1);for(var B=G+1;B<E.length;B++){var D=E[B];if(H(D)){return D}}},W.findPreviousWhere=function(E,H,G){G||(G=E.length);for(var B=G-1;B>=0;B--){var D=E[B];if(H(D)){return D}}},W.inherits=function(D){var G=this,E=D&&D.hasOwnProperty("constructor")?D.constructor:function(){return G.apply(this,arguments)},B=function(){this.constructor=E};return B.prototype=G.prototype,E.prototype=new B,E.extend=c,D&&s(E.prototype,D),E.__super__=G.prototype,E}),M=W.noop=function(){},d=W.uid=function(){var B=0;return function(){return"chart-"+B++}}(),v=W.warn=function(B){window.console&&"function"==typeof window.console.warn&&console.warn(B)},y=W.amd="function"==typeof k.define&&k.define.amd,a=W.isNumber=function(B){return !isNaN(parseFloat(B))&&isFinite(B)},S=W.max=function(B){return Math.max.apply(Math,B)},R=W.min=function(B){return Math.min.apply(Math,B)},w=(W.cap=function(B,E,D){if(a(E)){if(B>E){return E}}else{if(a(D)&&D>B){return D}}return B},W.getDecimalPlaces=function(B){return B%1!==0&&a(B)?B.toString().split(".")[1].length:0}),f=W.radians=function(B){return B*(Math.PI/180)},t=(W.getAngleFromPoint=function(D,I){var H=I.x-D.x,B=I.y-D.y,E=Math.sqrt(H*H+B*B),G=2*Math.PI+Math.atan2(B,H);return 0>H&&0>B&&(G+=2*Math.PI),{angle:G,distance:E}},W.aliasPixel=function(B){return B%2===0?0:0.5}),b=(W.splineCurve=function(H,D,G,E){var K=Math.sqrt(Math.pow(D.x-H.x,2)+Math.pow(D.y-H.y,2)),I=Math.sqrt(Math.pow(G.x-D.x,2)+Math.pow(G.y-D.y,2)),J=E*K/(K+I),B=E*I/(K+I);return{inner:{x:D.x-J*(G.x-H.x),y:D.y-J*(G.y-H.y)},outer:{x:D.x+B*(G.x-H.x),y:D.y+B*(G.y-H.y)}}},W.calculateOrderOfMagnitude=function(B){return Math.floor(Math.log(B)/Math.LN10)}),n=(W.calculateScaleRange=function(Q,j,Z,U,B){var J=2,E=Math.floor(j/(1.5*Z)),G=J>=E,H=S(Q),V=R(Q);H===V&&(H+=0.5,V>=0.5&&!U?V-=0.5:H+=0.5);for(var K=Math.abs(H-V),I=b(K),D=Math.ceil(H/(1*Math.pow(10,I)))*Math.pow(10,I),X=U?0:Math.floor(V/(1*Math.pow(10,I)))*Math.pow(10,I),N=D-X,O=Math.pow(10,I),Y=Math.round(N/O);(Y>E||E>2*Y)&&!G;){if(Y>E){O*=2,Y=Math.round(N/O),Y%1!==0&&(G=!0)}else{if(B&&I>=0){if(O/2%1!==0){break}O/=2,Y=Math.round(N/O)}else{O/=2,Y=Math.round(N/O)}}}return G&&(Y=J,O=N/Y),{steps:Y,stepValue:O,min:X,max:X+Y*O}},W.template=function(D,G){function E(H,J){var I=/\W/.test(H)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+H.replace(/[\r\t\n]/g," ").split("<%").join("	").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("	").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):B[H]=B[H];return J?I(J):I}if(D instanceof Function){return D(G)}var B={};return E(D,G)}),L=(W.generateLabels=function(E,H,G,B){var D=new Array(H);return labelTemplateString&&T(D,function(J,I){D[I]=n(E,{value:G+B*(I+1)})}),D},W.easingEffects={linear:function(B){return B},easeInQuad:function(B){return B*B},easeOutQuad:function(B){return -1*B*(B-2)},easeInOutQuad:function(B){return(B/=0.5)<1?0.5*B*B:-0.5*(--B*(B-2)-1)},easeInCubic:function(B){return B*B*B},easeOutCubic:function(B){return 1*((B=B/1-1)*B*B+1)},easeInOutCubic:function(B){return(B/=0.5)<1?0.5*B*B*B:0.5*((B-=2)*B*B+2)},easeInQuart:function(B){return B*B*B*B},easeOutQuart:function(B){return -1*((B=B/1-1)*B*B*B-1)},easeInOutQuart:function(B){return(B/=0.5)<1?0.5*B*B*B*B:-0.5*((B-=2)*B*B*B-2)},easeInQuint:function(B){return 1*(B/=1)*B*B*B*B},easeOutQuint:function(B){return 1*((B=B/1-1)*B*B*B*B+1)},easeInOutQuint:function(B){return(B/=0.5)<1?0.5*B*B*B*B*B:0.5*((B-=2)*B*B*B*B+2)},easeInSine:function(B){return -1*Math.cos(B/1*(Math.PI/2))+1},easeOutSine:function(B){return 1*Math.sin(B/1*(Math.PI/2))},easeInOutSine:function(B){return -0.5*(Math.cos(Math.PI*B/1)-1)},easeInExpo:function(B){return 0===B?1:1*Math.pow(2,10*(B/1-1))},easeOutExpo:function(B){return 1===B?1:1*(-Math.pow(2,-10*B/1)+1)},easeInOutExpo:function(B){return 0===B?0:1===B?1:(B/=0.5)<1?0.5*Math.pow(2,10*(B-1)):0.5*(-Math.pow(2,-10*--B)+2)},easeInCirc:function(B){return B>=1?B:-1*(Math.sqrt(1-(B/=1)*B)-1)},easeOutCirc:function(B){return 1*Math.sqrt(1-(B=B/1-1)*B)},easeInOutCirc:function(B){return(B/=0.5)<1?-0.5*(Math.sqrt(1-B*B)-1):0.5*(Math.sqrt(1-(B-=2)*B)+1)},easeInElastic:function(D){var G=1.70158,E=0,B=1;return 0===D?0:1==(D/=1)?1:(E||(E=0.3),B<Math.abs(1)?(B=1,G=E/4):G=E/(2*Math.PI)*Math.asin(1/B),-(B*Math.pow(2,10*(D-=1))*Math.sin(2*(1*D-G)*Math.PI/E)))},easeOutElastic:function(D){var G=1.70158,E=0,B=1;return 0===D?0:1==(D/=1)?1:(E||(E=0.3),B<Math.abs(1)?(B=1,G=E/4):G=E/(2*Math.PI)*Math.asin(1/B),B*Math.pow(2,-10*D)*Math.sin(2*(1*D-G)*Math.PI/E)+1)},easeInOutElastic:function(D){var G=1.70158,E=0,B=1;return 0===D?0:2==(D/=0.5)?1:(E||(E=0.3*1.5),B<Math.abs(1)?(B=1,G=E/4):G=E/(2*Math.PI)*Math.asin(1/B),1>D?-0.5*B*Math.pow(2,10*(D-=1))*Math.sin(2*(1*D-G)*Math.PI/E):B*Math.pow(2,-10*(D-=1))*Math.sin(2*(1*D-G)*Math.PI/E)*0.5+1)},easeInBack:function(B){var D=1.70158;return 1*(B/=1)*B*((D+1)*B-D)},easeOutBack:function(B){var D=1.70158;return 1*((B=B/1-1)*B*((D+1)*B+D)+1)},easeInOutBack:function(B){var D=1.70158;return(B/=0.5)<1?0.5*B*B*(((D*=1.525)+1)*B-D):0.5*((B-=2)*B*(((D*=1.525)+1)*B+D)+2)},easeInBounce:function(B){return 1-L.easeOutBounce(1-B)},easeOutBounce:function(B){return(B/=1)<1/2.75?7.5625*B*B:2/2.75>B?1*(7.5625*(B-=1.5/2.75)*B+0.75):2.5/2.75>B?1*(7.5625*(B-=2.25/2.75)*B+0.9375):1*(7.5625*(B-=2.625/2.75)*B+0.984375)},easeInOutBounce:function(B){return 0.5>B?0.5*L.easeInBounce(2*B):0.5*L.easeOutBounce(2*B-1)+0.5}}),x=W.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(B){return window.setTimeout(B,1000/60)}}(),r=(W.cancelAnimFrame=function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||function(B){return window.clearTimeout(B,1000/60)}}(),W.animationLoop=function(H,D,G,E,K,I){var N=0,B=L[G]||L.linear,J=function(){N++;var Q=N/D,O=B(Q);H.call(I,O,Q,N),E.call(I,O,Q),D>N?I.animationFrame=x(J):K.apply(I)};x(J)},W.getRelativePosition=function(D){var I,H,B=D.originalEvent||D,E=D.currentTarget||D.srcElement,G=E.getBoundingClientRect();return B.touches?(I=B.touches[0].clientX-G.left,H=B.touches[0].clientY-G.top):(I=B.clientX-G.left,H=B.clientY-G.top),{x:I,y:H}},W.addEvent=function(B,E,D){B.addEventListener?B.addEventListener(E,D):B.attachEvent?B.attachEvent("on"+E,D):B["on"+E]=D}),i=W.removeEvent=function(B,E,D){B.removeEventListener?B.removeEventListener(E,D,!1):B.detachEvent?B.detachEvent("on"+E,D):B["on"+E]=M},F=(W.bindEvents=function(B,E,D){B.events||(B.events={}),T(E,function(G){B.events[G]=function(){D.apply(B,arguments)},r(B.chart.canvas,G,B.events[G])})},W.unbindEvents=function(B,D){T(D,function(E,G){i(B.chart.canvas,G,E)})}),e=W.getMaximumWidth=function(B){var D=B.parentNode;return D.clientWidth},P=W.getMaximumHeight=function(B){var D=B.parentNode;return D.clientHeight},o=(W.getMaximumSize=W.getMaximumWidth,W.retinaScale=function(D){var G=D.ctx,E=D.canvas.width,B=D.canvas.height;window.devicePixelRatio&&(G.canvas.style.width=E+"px",G.canvas.style.height=B+"px",G.canvas.height=B*window.devicePixelRatio,G.canvas.width=E*window.devicePixelRatio,G.scale(window.devicePixelRatio,window.devicePixelRatio))}),m=W.clear=function(B){B.ctx.clearRect(0,0,B.width,B.height)},C=W.fontString=function(B,E,D){return E+" "+B+"px "+D},l=W.longestText=function(D,G,E){D.font=G;var B=0;return T(E,function(I){var H=D.measureText(I).width;B=H>B?H:B}),B},h=W.drawRoundedRectangle=function(D,I,H,B,E,G){D.beginPath(),D.moveTo(I+G,H),D.lineTo(I+B-G,H),D.quadraticCurveTo(I+B,H,I+B,H+G),D.lineTo(I+B,H+E-G),D.quadraticCurveTo(I+B,H+E,I+B-G,H+E),D.lineTo(I+G,H+E),D.quadraticCurveTo(I,H+E,I,H+E-G),D.lineTo(I,H+G),D.quadraticCurveTo(I,H,I+G,H),D.closePath()};p.instances={},p.Type=function(B,E,D){this.options=E,this.chart=D,this.id=d(),p.instances[this.id]=this,E.responsive&&this.resize(),this.initialize.call(this,B)},s(p.Type.prototype,{initialize:function(){return this},clear:function(){return m(this.chart),this},stop:function(){return W.cancelAnimFrame.call(k,this.animationFrame),this},resize:function(D){this.stop();var G=this.chart.canvas,E=e(this.chart.canvas),B=this.options.maintainAspectRatio?E/this.chart.aspectRatio:P(this.chart.canvas);return G.width=this.chart.width=E,G.height=this.chart.height=B,o(this.chart),"function"==typeof D&&D.apply(this,Array.prototype.slice.call(arguments,1)),this},reflow:M,render:function(B){return B&&this.reflow(),this.options.animation&&!B?W.animationLoop(this.draw,this.options.animationSteps,this.options.animationEasing,this.options.onAnimationProgress,this.options.onAnimationComplete,this):(this.draw(),this.options.onAnimationComplete.call(this)),this},generateLegend:function(){return n(this.options.legendTemplate,this)},destroy:function(){this.clear(),F(this,this.events),delete p.instances[this.id]},showTooltip:function(E,D){"undefined"==typeof this.activeElements&&(this.activeElements=[]);var K=function(Q){var O=!1;return Q.length!==this.activeElements.length?O=!0:(T(Q,function(V,U){V!==this.activeElements[U]&&(O=!0)},this),O)}.call(this,E);if(K||D){if(this.activeElements=E,this.draw(),E.length>0){if(this.datasets&&this.datasets.length>1){for(var J,B,G=this.datasets.length-1;G>=0&&(J=this.datasets[G].points||this.datasets[G].bars||this.datasets[G].segments,B=g(J,E[0]),-1===B);G--){}var I=[],H=[],N=function(){var V,j,X,Y,Z,O=[],Q=[],U=[];return W.each(this.datasets,function(q){V=q.points||q.bars||q.segments,V[B]&&V[B].hasValue()&&O.push(V[B])}),W.each(O,function(q){Q.push(q.x),U.push(q.y),I.push(W.template(this.options.multiTooltipTemplate,q)),H.push({fill:q._saved.fillColor||q.fillColor,stroke:q._saved.strokeColor||q.strokeColor})},this),Z=R(U),X=S(U),Y=R(Q),j=S(Q),{x:Y>this.chart.width/2?Y:j,y:(Z+X)/2}}.call(this,B);new p.MultiTooltip({x:N.x,y:N.y,xPadding:this.options.tooltipXPadding,yPadding:this.options.tooltipYPadding,xOffset:this.options.tooltipXOffset,fillColor:this.options.tooltipFillColor,textColor:this.options.tooltipFontColor,fontFamily:this.options.tooltipFontFamily,fontStyle:this.options.tooltipFontStyle,fontSize:this.options.tooltipFontSize,titleTextColor:this.options.tooltipTitleFontColor,titleFontFamily:this.options.tooltipTitleFontFamily,titleFontStyle:this.options.tooltipTitleFontStyle,titleFontSize:this.options.tooltipTitleFontSize,cornerRadius:this.options.tooltipCornerRadius,labels:I,legendColors:H,legendColorBackground:this.options.multiTooltipKeyBackground,title:E[0].label,chart:this.chart,ctx:this.chart.ctx}).draw()}else{T(E,function(Q){var O=Q.tooltipPosition();new p.Tooltip({x:Math.round(O.x),y:Math.round(O.y),xPadding:this.options.tooltipXPadding,yPadding:this.options.tooltipYPadding,fillColor:this.options.tooltipFillColor,textColor:this.options.tooltipFontColor,fontFamily:this.options.tooltipFontFamily,fontStyle:this.options.tooltipFontStyle,fontSize:this.options.tooltipFontSize,caretHeight:this.options.tooltipCaretSize,cornerRadius:this.options.tooltipCornerRadius,text:n(this.options.tooltipTemplate,Q),chart:this.chart}).draw()},this)}}return this}},toBase64Image:function(){return this.chart.canvas.toDataURL.apply(this.chart.canvas,arguments)}}),p.Type.extend=function(E){var H=this,G=function(){return H.apply(this,arguments)};if(G.prototype=A(H.prototype),s(G.prototype,E),G.extend=p.Type.extend,E.name||H.prototype.name){var B=E.name||H.prototype.name,D=p.defaults[H.prototype.name]?A(p.defaults[H.prototype.name]):{};p.defaults[B]=s(D,E.defaults),p.types[B]=G,p.prototype[B]=function(J,K){var I=z(p.defaults.global,p.defaults[B],K||{});return new G(J,I,this)}}else{v("Name not provided for this chart, so it hasn't been registered")}return H},p.Element=function(B){s(this,B),this.initialize.apply(this,arguments),this.save()},s(p.Element.prototype,{initialize:function(){},restore:function(B){return B?T(B,function(D){this[D]=this._saved[D]},this):s(this,this._saved),this},save:function(){return this._saved=A(this),delete this._saved._saved,this},update:function(B){return T(B,function(D,E){this._saved[E]=this[E],this[E]=D},this),this},transition:function(B,D){return T(B,function(G,E){this[E]=(G-this._saved[E])*D+this._saved[E]},this),this},tooltipPosition:function(){return{x:this.x,y:this.y}},hasValue:function(){return a(this.value)}}),p.Element.extend=c,p.Point=p.Element.extend({display:!0,inRange:function(B,E){var D=this.hitDetectionRadius+this.radius;return Math.pow(B-this.x,2)+Math.pow(E-this.y,2)<Math.pow(D,2)},draw:function(){if(this.display){var B=this.ctx;B.beginPath(),B.arc(this.x,this.y,this.radius,0,2*Math.PI),B.closePath(),B.strokeStyle=this.strokeColor,B.lineWidth=this.strokeWidth,B.fillStyle=this.fillColor,B.fill(),B.stroke()}}}),p.Arc=p.Element.extend({inRange:function(E,H){var G=W.getAngleFromPoint(this,{x:E,y:H}),B=G.angle>=this.startAngle&&G.angle<=this.endAngle,D=G.distance>=this.innerRadius&&G.distance<=this.outerRadius;return B&&D},tooltipPosition:function(){var B=this.startAngle+(this.endAngle-this.startAngle)/2,D=(this.outerRadius-this.innerRadius)/2+this.innerRadius;return{x:this.x+Math.cos(B)*D,y:this.y+Math.sin(B)*D}},draw:function(B){var D=this.ctx;D.beginPath(),D.arc(this.x,this.y,this.outerRadius,this.startAngle,this.endAngle),D.arc(this.x,this.y,this.innerRadius,this.endAngle,this.startAngle,!0),D.closePath(),D.strokeStyle=this.strokeColor,D.lineWidth=this.strokeWidth,D.fillStyle=this.fillColor,D.fill(),D.lineJoin="bevel",this.showStroke&&D.stroke()}}),p.Rectangle=p.Element.extend({draw:function(){var D=this.ctx,I=this.width/2,H=this.x-I,B=this.x+I,E=this.base-(this.base-this.y),G=this.strokeWidth/2;this.showStroke&&(H+=G,B-=G,E+=G),D.beginPath(),D.fillStyle=this.fillColor,D.strokeStyle=this.strokeColor,D.lineWidth=this.strokeWidth,D.moveTo(H,this.base),D.lineTo(H,E),D.lineTo(B,E),D.lineTo(B,this.base),D.fill(),this.showStroke&&D.stroke()},height:function(){return this.base-this.y},inRange:function(B,D){return B>=this.x-this.width/2&&B<=this.x+this.width/2&&D>=this.y&&D<=this.base}}),p.Tooltip=p.Element.extend({draw:function(){var E=this.chart.ctx;E.font=C(this.fontSize,this.fontStyle,this.fontFamily),this.xAlign="center",this.yAlign="above";var J=2,I=E.measureText(this.text).width+2*this.xPadding,B=this.fontSize+2*this.yPadding,G=B+this.caretHeight+J;this.x+I/2>this.chart.width?this.xAlign="left":this.x-I/2<0&&(this.xAlign="right"),this.y-G<0&&(this.yAlign="below");var H=this.x-I/2,D=this.y-G;switch(E.fillStyle=this.fillColor,this.yAlign){case"above":E.beginPath(),E.moveTo(this.x,this.y-J),E.lineTo(this.x+this.caretHeight,this.y-(J+this.caretHeight)),E.lineTo(this.x-this.caretHeight,this.y-(J+this.caretHeight)),E.closePath(),E.fill();break;case"below":D=this.y+J+this.caretHeight,E.beginPath(),E.moveTo(this.x,this.y+J),E.lineTo(this.x+this.caretHeight,this.y+J+this.caretHeight),E.lineTo(this.x-this.caretHeight,this.y+J+this.caretHeight),E.closePath(),E.fill()}switch(this.xAlign){case"left":H=this.x-I+(this.cornerRadius+this.caretHeight);break;case"right":H=this.x-(this.cornerRadius+this.caretHeight)}h(E,H,D,I,B,this.cornerRadius),E.fill(),E.fillStyle=this.textColor,E.textAlign="center",E.textBaseline="middle",E.fillText(this.text,H+I/2,D+B/2)}}),p.MultiTooltip=p.Element.extend({initialize:function(){this.font=C(this.fontSize,this.fontStyle,this.fontFamily),this.titleFont=C(this.titleFontSize,this.titleFontStyle,this.titleFontFamily),this.height=this.labels.length*this.fontSize+(this.labels.length-1)*(this.fontSize/2)+2*this.yPadding+1.5*this.titleFontSize,this.ctx.font=this.titleFont;var D=this.ctx.measureText(this.title).width,G=l(this.ctx,this.font,this.labels)+this.fontSize+3,E=S([G,D]);this.width=E+2*this.xPadding;var B=this.height/2;this.y-B<0?this.y=B:this.y+B>this.chart.height&&(this.y=this.chart.height-B),this.x>this.chart.width/2?this.x-=this.xOffset+this.width:this.x+=this.xOffset},getLineHeight:function(B){var E=this.y-this.height/2+this.yPadding,D=B-1;return 0===B?E+this.titleFontSize/2:E+(1.5*this.fontSize*D+this.fontSize/2)+1.5*this.titleFontSize},draw:function(){h(this.ctx,this.x,this.y-this.height/2,this.width,this.height,this.cornerRadius);var B=this.ctx;B.fillStyle=this.fillColor,B.fill(),B.closePath(),B.textAlign="left",B.textBaseline="middle",B.fillStyle=this.titleTextColor,B.font=this.titleFont,B.fillText(this.title,this.x+this.xPadding,this.getLineHeight(0)),B.font=this.font,W.each(this.labels,function(E,D){B.fillStyle=this.textColor,B.fillText(E,this.x+this.xPadding+this.fontSize+3,this.getLineHeight(D+1)),B.fillStyle=this.legendColorBackground,B.fillRect(this.x+this.xPadding,this.getLineHeight(D+1)-this.fontSize/2,this.fontSize,this.fontSize),B.fillStyle=this.legendColors[D].fill,B.fillRect(this.x+this.xPadding,this.getLineHeight(D+1)-this.fontSize/2,this.fontSize,this.fontSize)},this)}}),p.Scale=p.Element.extend({initialize:function(){this.fit()},buildYLabels:function(){this.yLabels=[];for(var B=w(this.stepValue),D=0;D<=this.steps;D++){this.yLabels.push(n(this.templateString,{value:(this.min+D*this.stepValue).toFixed(B)}))}this.yLabelWidth=this.display&&this.showLabels?l(this.ctx,this.font,this.yLabels):0},addXLabel:function(B){this.xLabels.push(B),this.valuesCount++,this.fit()},removeXLabel:function(){this.xLabels.shift(),this.valuesCount--,this.fit()},fit:function(){this.startPoint=this.display?this.fontSize:0,this.endPoint=this.display?this.height-1.5*this.fontSize-5:this.height,this.startPoint+=this.padding,this.endPoint-=this.padding;var B,D=this.endPoint-this.startPoint;for(this.calculateYRange(D),this.buildYLabels(),this.calculateXLabelRotation();D>this.endPoint-this.startPoint;){D=this.endPoint-this.startPoint,B=this.yLabelWidth,this.calculateYRange(D),this.buildYLabels(),B<this.yLabelWidth&&this.calculateXLabelRotation()}},calculateXLabelRotation:function(){this.ctx.font=this.font;var E,J,I=this.ctx.measureText(this.xLabels[0]).width,B=this.ctx.measureText(this.xLabels[this.xLabels.length-1]).width;if(this.xScalePaddingRight=B/2+3,this.xScalePaddingLeft=I/2>this.yLabelWidth+10?I/2:this.yLabelWidth+10,this.xLabelRotation=0,this.display){var G,H=l(this.ctx,this.font,this.xLabels);this.xLabelWidth=H;for(var D=Math.floor(this.calculateX(1)-this.calculateX(0))-6;this.xLabelWidth>D&&0===this.xLabelRotation||this.xLabelWidth>D&&this.xLabelRotation<=90&&this.xLabelRotation>0;){G=Math.cos(f(this.xLabelRotation)),E=G*I,J=G*B,E+this.fontSize/2>this.yLabelWidth+8&&(this.xScalePaddingLeft=E+this.fontSize/2),this.xScalePaddingRight=this.fontSize/2,this.xLabelRotation++,this.xLabelWidth=G*H}this.xLabelRotation>0&&(this.endPoint-=Math.sin(f(this.xLabelRotation))*H+3)}else{this.xLabelWidth=0,this.xScalePaddingRight=this.padding,this.xScalePaddingLeft=this.padding}},calculateYRange:M,drawingArea:function(){return this.startPoint-this.endPoint},calculateY:function(B){var D=this.drawingArea()/(this.min-this.max);return this.endPoint-D*(B-this.min)},calculateX:function(D){var G=(this.xLabelRotation>0,this.width-(this.xScalePaddingLeft+this.xScalePaddingRight)),E=G/(this.valuesCount-(this.offsetGridLines?0:1)),B=E*D+this.xScalePaddingLeft;return this.offsetGridLines&&(B+=E/2),Math.round(B)},update:function(B){W.extend(this,B),this.fit()},draw:function(){var B=this.ctx,E=(this.endPoint-this.startPoint)/this.steps,D=Math.round(this.xScalePaddingLeft);this.display&&(B.fillStyle=this.textColor,B.font=this.font,T(this.yLabels,function(J,H){var G=this.endPoint-E*H,I=Math.round(G);B.textAlign="right",B.textBaseline="middle",this.showLabels&&B.fillText(J,D-10,G),B.beginPath(),H>0?(B.lineWidth=this.gridLineWidth,B.strokeStyle=this.gridLineColor):(B.lineWidth=this.lineWidth,B.strokeStyle=this.lineColor),I+=W.aliasPixel(B.lineWidth),B.moveTo(D,I),B.lineTo(this.width,I),B.stroke(),B.closePath(),B.lineWidth=this.lineWidth,B.strokeStyle=this.lineColor,B.beginPath(),B.moveTo(D-5,I),B.lineTo(D,I),B.stroke(),B.closePath()},this),T(this.xLabels,function(J,K){var I=this.calculateX(K)+t(this.lineWidth),G=this.calculateX(K-(this.offsetGridLines?0.5:0))+t(this.lineWidth),H=this.xLabelRotation>0;B.beginPath(),K>0?(B.lineWidth=this.gridLineWidth,B.strokeStyle=this.gridLineColor):(B.lineWidth=this.lineWidth,B.strokeStyle=this.lineColor),B.moveTo(G,this.endPoint),B.lineTo(G,this.startPoint-3),B.stroke(),B.closePath(),B.lineWidth=this.lineWidth,B.strokeStyle=this.lineColor,B.beginPath(),B.moveTo(G,this.endPoint),B.lineTo(G,this.endPoint+5),B.stroke(),B.closePath(),B.save(),B.translate(I,H?this.endPoint+12:this.endPoint+8),B.rotate(-1*f(this.xLabelRotation)),B.font=this.font,B.textAlign=H?"right":"center",B.textBaseline=H?"middle":"top",B.fillText(J,0,0),B.restore()},this))}}),p.RadialScale=p.Element.extend({initialize:function(){this.size=R([this.height,this.width]),this.drawingArea=this.display?this.size/2-(this.fontSize/2+this.backdropPaddingY):this.size/2},calculateCenterOffset:function(B){var D=this.drawingArea/(this.max-this.min);return(B-this.min)*D},update:function(){this.lineArc?this.drawingArea=this.display?this.size/2-(this.fontSize/2+this.backdropPaddingY):this.size/2:this.setScaleSize(),this.buildYLabels()},buildYLabels:function(){this.yLabels=[];for(var B=w(this.stepValue),D=0;D<=this.steps;D++){this.yLabels.push(n(this.templateString,{value:(this.min+D*this.stepValue).toFixed(B)}))}},getCircumference:function(){return 2*Math.PI/this.valuesCount},setScaleSize:function(){var G,O,J,H,X,V,I,N,Q,E,B,U,D=R([this.height/2-this.pointLabelFontSize-5,this.width/2]),K=this.width,Y=0;for(this.ctx.font=C(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily),O=0;O<this.valuesCount;O++){G=this.getPointPosition(O,D),J=this.ctx.measureText(n(this.templateString,{value:this.labels[O]})).width+5,0===O||O===this.valuesCount/2?(H=J/2,G.x+H>K&&(K=G.x+H,X=O),G.x-H<Y&&(Y=G.x-H,I=O)):O<this.valuesCount/2?G.x+J>K&&(K=G.x+J,X=O):O>this.valuesCount/2&&G.x-J<Y&&(Y=G.x-J,I=O)}Q=Y,E=Math.ceil(K-this.width),V=this.getIndexAngle(X),N=this.getIndexAngle(I),B=E/Math.sin(V+Math.PI/2),U=Q/Math.sin(N+Math.PI/2),B=a(B)?B:0,U=a(U)?U:0,this.drawingArea=D-(U+B)/2,this.setCenterPoint(U,B)},setCenterPoint:function(D,G){var E=this.width-G-this.drawingArea,B=D+this.drawingArea;this.xCenter=(B+E)/2,this.yCenter=this.height/2},getIndexAngle:function(B){var D=2*Math.PI/this.valuesCount;return B*D-Math.PI/2},getPointPosition:function(B,E){var D=this.getIndexAngle(B);return{x:Math.cos(D)*E+this.xCenter,y:Math.sin(D)*E+this.yCenter}},draw:function(){if(this.display){var B=this.ctx;if(T(this.yLabels,function(X,Y){if(Y>0){var Q,Z=Y*(this.drawingArea/this.steps),O=this.yCenter-Z;if(this.lineWidth>0){if(B.strokeStyle=this.lineColor,B.lineWidth=this.lineWidth,this.lineArc){B.beginPath(),B.arc(this.xCenter,this.yCenter,Z,0,2*Math.PI),B.closePath(),B.stroke()}else{B.beginPath();for(var U=0;U<this.valuesCount;U++){Q=this.getPointPosition(U,this.calculateCenterOffset(this.min+Y*this.stepValue)),0===U?B.moveTo(Q.x,Q.y):B.lineTo(Q.x,Q.y)}B.closePath(),B.stroke()}}if(this.showLabels){if(B.font=C(this.fontSize,this.fontStyle,this.fontFamily),this.showLabelBackdrop){var V=B.measureText(X).width;B.fillStyle=this.backdropColor,B.fillRect(this.xCenter-V/2-this.backdropPaddingX,O-this.fontSize/2-this.backdropPaddingY,V+2*this.backdropPaddingX,this.fontSize+2*this.backdropPaddingY)}B.textAlign="center",B.textBaseline="middle",B.fillStyle=this.fontColor,B.fillText(X,this.xCenter,O)}}},this),!this.lineArc){B.lineWidth=this.angleLineWidth,B.strokeStyle=this.angleLineColor;for(var K=this.valuesCount-1;K>=0;K--){if(this.angleLineWidth>0){var G=this.getPointPosition(K,this.calculateCenterOffset(this.max));B.beginPath(),B.moveTo(this.xCenter,this.yCenter),B.lineTo(G.x,G.y),B.stroke(),B.closePath()}var E=this.getPointPosition(K,this.calculateCenterOffset(this.max)+5);B.font=C(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily),B.fillStyle=this.pointLabelFontColor;var I=this.labels.length,N=this.labels.length/2,D=N/2,J=D>K||K>I-D,H=K===D||K===I-D;B.textAlign=0===K?"center":K===N?"center":N>K?"left":"right",B.textBaseline=H?"middle":J?"bottom":"top",B.fillText(this.labels[K],E.x,E.y)}}}}}),W.addEvent(window,"resize",function(){var B;return function(){clearTimeout(B),B=setTimeout(function(){T(p.instances,function(D){D.options.responsive&&D.resize(D.render,!0)})},50)}}()),y?define(function(){return p}):"object"==typeof module&&module.exports&&(module.exports=p),k.Chart=p,p.noConflict=function(){return k.Chart=u,p}}).call(this),function(){var E=this,H=E.Chart,F=H.helpers,G={scaleBeginAtZero:!0,scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,barShowStroke:!0,barStrokeWidth:2,barValueSpacing:5,barDatasetSpacing:1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].fillColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'};H.Type.extend({name:"Bar",defaults:G,initialize:function(A){var B=this.options;this.ScaleClass=H.Scale.extend({offsetGridLines:!0,calculateBarX:function(C,D,P){var M=this.calculateBaseWidth(),O=this.calculateX(P)-M/2,N=this.calculateBarWidth(C);return O+N*D+D*B.barDatasetSpacing+N/2},calculateBaseWidth:function(){return this.calculateX(1)-this.calculateX(0)-2*B.barValueSpacing},calculateBarWidth:function(C){var D=this.calculateBaseWidth()-(C-1)*B.barDatasetSpacing;return D/C}}),this.datasets=[],this.options.showTooltips&&F.bindEvents(this,this.options.tooltipEvents,function(C){var D="mouseout"!==C.type?this.getBarsAtEvent(C):[];this.eachBars(function(J){J.restore(["fillColor","strokeColor"])}),F.each(D,function(J){J.fillColor=J.highlightFill,J.strokeColor=J.highlightStroke}),this.showTooltip(D)}),this.BarClass=H.Rectangle.extend({strokeWidth:this.options.barStrokeWidth,showStroke:this.options.barShowStroke,ctx:this.chart.ctx}),F.each(A.datasets,function(D){var C={label:D.label||null,fillColor:D.fillColor,strokeColor:D.strokeColor,bars:[]};this.datasets.push(C),F.each(D.data,function(K,L){C.bars.push(new this.BarClass({value:K,label:A.labels[L],datasetLabel:D.label,strokeColor:D.strokeColor,fillColor:D.fillColor,highlightFill:D.highlightFill||D.fillColor,highlightStroke:D.highlightStroke||D.strokeColor}))},this)},this),this.buildScale(A.labels),this.BarClass.prototype.base=this.scale.endPoint,this.eachBars(function(J,D,C){F.extend(J,{width:this.scale.calculateBarWidth(this.datasets.length),x:this.scale.calculateBarX(this.datasets.length,C,D),y:this.scale.endPoint}),J.save()},this),this.render()},update:function(){this.scale.update(),F.each(this.activeElements,function(A){A.restore(["fillColor","strokeColor"])}),this.eachBars(function(A){A.save()}),this.render()},eachBars:function(A){F.each(this.datasets,function(B,C){F.each(B.bars,A,this,C)},this)},getBarsAtEvent:function(C){for(var D,A=[],B=F.getRelativePosition(C),L=function(I){A.push(I.bars[D])},K=0;K<this.datasets.length;K++){for(D=0;D<this.datasets[K].bars.length;D++){if(this.datasets[K].bars[D].inRange(B.x,B.y)){return F.each(this.datasets,L),A}}}return A},buildScale:function(B){var D=this,A=function(){var J=[];return D.eachBars(function(I){J.push(I.value)}),J},C={templateString:this.options.scaleLabel,height:this.chart.height,width:this.chart.width,ctx:this.chart.ctx,textColor:this.options.scaleFontColor,fontSize:this.options.scaleFontSize,fontStyle:this.options.scaleFontStyle,fontFamily:this.options.scaleFontFamily,valuesCount:B.length,beginAtZero:this.options.scaleBeginAtZero,integersOnly:this.options.scaleIntegersOnly,calculateYRange:function(L){var K=F.calculateScaleRange(A(),L,this.fontSize,this.beginAtZero,this.integersOnly);F.extend(this,K)},xLabels:B,font:F.fontString(this.options.scaleFontSize,this.options.scaleFontStyle,this.options.scaleFontFamily),lineWidth:this.options.scaleLineWidth,lineColor:this.options.scaleLineColor,gridLineWidth:this.options.scaleShowGridLines?this.options.scaleGridLineWidth:0,gridLineColor:this.options.scaleShowGridLines?this.options.scaleGridLineColor:"rgba(0,0,0,0)",padding:this.options.showScale?0:this.options.barShowStroke?this.options.barStrokeWidth:0,showLabels:this.options.scaleShowLabels,display:this.options.showScale};this.options.scaleOverride&&F.extend(C,{calculateYRange:F.noop,steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}),this.scale=new this.ScaleClass(C)},addData:function(A,B){F.each(A,function(C,D){this.datasets[D].bars.push(new this.BarClass({value:C,label:B,x:this.scale.calculateBarX(this.datasets.length,D,this.scale.valuesCount+1),y:this.scale.endPoint,width:this.scale.calculateBarWidth(this.datasets.length),base:this.scale.endPoint,strokeColor:this.datasets[D].strokeColor,fillColor:this.datasets[D].fillColor}))},this),this.scale.addXLabel(B),this.update()},removeData:function(){this.scale.removeXLabel(),F.each(this.datasets,function(A){A.bars.shift()},this),this.update()},reflow:function(){F.extend(this.BarClass.prototype,{y:this.scale.endPoint,base:this.scale.endPoint});var A=F.extend({height:this.chart.height,width:this.chart.width});this.scale.update(A)},draw:function(A){var B=A||1;this.clear();this.chart.ctx;this.scale.draw(B),F.each(this.datasets,function(C,D){F.each(C.bars,function(L,K){L.hasValue()&&(L.base=this.scale.endPoint,L.transition({x:this.scale.calculateBarX(this.datasets.length,D,K),y:this.scale.calculateY(L.value),width:this.scale.calculateBarWidth(this.datasets.length)},B).draw())},this)},this)}})}.call(this),function(){var E=this,H=E.Chart,F=H.helpers,G={segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,percentageInnerCutout:50,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"></span><%if(segments[i].label){%><%=segments[i].label%><%}%></li><%}%></ul>'};H.Type.extend({name:"Doughnut",defaults:G,initialize:function(A){this.segments=[],this.outerRadius=(F.min([this.chart.width,this.chart.height])-this.options.segmentStrokeWidth/2)/2,this.SegmentArc=H.Arc.extend({ctx:this.chart.ctx,x:this.chart.width/2,y:this.chart.height/2}),this.options.showTooltips&&F.bindEvents(this,this.options.tooltipEvents,function(C){var B="mouseout"!==C.type?this.getSegmentsAtEvent(C):[];F.each(this.segments,function(D){D.restore(["fillColor"])}),F.each(B,function(D){D.fillColor=D.highlightColor}),this.showTooltip(B)}),this.calculateTotal(A),F.each(A,function(C,B){this.addData(C,B,!0)},this),this.render()},getSegmentsAtEvent:function(B){var C=[],A=F.getRelativePosition(B);return F.each(this.segments,function(D){D.inRange(A.x,A.y)&&C.push(D)},this),C},addData:function(B,D,A){var C=D||this.segments.length;this.segments.splice(C,0,new this.SegmentArc({value:B.value,outerRadius:this.options.animateScale?0:this.outerRadius,innerRadius:this.options.animateScale?0:this.outerRadius/100*this.options.percentageInnerCutout,fillColor:B.color,highlightColor:B.highlight||B.color,showStroke:this.options.segmentShowStroke,strokeWidth:this.options.segmentStrokeWidth,strokeColor:this.options.segmentStrokeColor,startAngle:1.5*Math.PI,circumference:this.options.animateRotate?0:this.calculateCircumference(B.value),label:B.label})),A||(this.reflow(),this.update())},calculateCircumference:function(A){return 2*Math.PI*(A/this.total)},calculateTotal:function(A){this.total=0,F.each(A,function(B){this.total+=B.value},this)},update:function(){this.calculateTotal(this.segments),F.each(this.activeElements,function(A){A.restore(["fillColor"])}),F.each(this.segments,function(A){A.save()}),this.render()},removeData:function(A){var B=F.isNumber(A)?A:this.segments.length-1;this.segments.splice(B,1),this.reflow(),this.update()},reflow:function(){F.extend(this.SegmentArc.prototype,{x:this.chart.width/2,y:this.chart.height/2}),this.outerRadius=(F.min([this.chart.width,this.chart.height])-this.options.segmentStrokeWidth/2)/2,F.each(this.segments,function(A){A.update({outerRadius:this.outerRadius,innerRadius:this.outerRadius/100*this.options.percentageInnerCutout})},this)},draw:function(A){var B=A?A:1;this.clear(),F.each(this.segments,function(C,D){C.transition({circumference:this.calculateCircumference(C.value),outerRadius:this.outerRadius,innerRadius:this.outerRadius/100*this.options.percentageInnerCutout},B),C.endAngle=C.startAngle+C.circumference,C.draw(),0===D&&(C.startAngle=1.5*Math.PI),D<this.segments.length-1&&(this.segments[D+1].startAngle=C.endAngle)},this)}}),H.types.Doughnut.extend({name:"Pie",defaults:F.merge(G,{percentageInnerCutout:0})})}.call(this),function(){var E=this,H=E.Chart,F=H.helpers,G={scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,bezierCurve:!0,bezierCurveTension:0.4,pointDot:!0,pointDotRadius:4,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:!0,datasetStrokeWidth:2,datasetFill:!0,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].strokeColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'};H.Type.extend({name:"Line",defaults:G,initialize:function(A){this.PointClass=H.Point.extend({strokeWidth:this.options.pointDotStrokeWidth,radius:this.options.pointDotRadius,display:this.options.pointDot,hitDetectionRadius:this.options.pointHitDetectionRadius,ctx:this.chart.ctx,inRange:function(B){return Math.pow(B-this.x,2)<Math.pow(this.radius+this.hitDetectionRadius,2)}}),this.datasets=[],this.options.showTooltips&&F.bindEvents(this,this.options.tooltipEvents,function(C){var B="mouseout"!==C.type?this.getPointsAtEvent(C):[];this.eachPoints(function(D){D.restore(["fillColor","strokeColor"])}),F.each(B,function(D){D.fillColor=D.highlightFill,D.strokeColor=D.highlightStroke}),this.showTooltip(B)}),F.each(A.datasets,function(B){var C={label:B.label||null,fillColor:B.fillColor,strokeColor:B.strokeColor,pointColor:B.pointColor,pointStrokeColor:B.pointStrokeColor,points:[]};this.datasets.push(C),F.each(B.data,function(D,J){C.points.push(new this.PointClass({value:D,label:A.labels[J],datasetLabel:B.label,strokeColor:B.pointStrokeColor,fillColor:B.pointColor,highlightFill:B.pointHighlightFill||B.pointColor,highlightStroke:B.pointHighlightStroke||B.pointStrokeColor}))},this),this.buildScale(A.labels),this.eachPoints(function(J,D){F.extend(J,{x:this.scale.calculateX(D),y:this.scale.endPoint}),J.save()},this)},this),this.render()},update:function(){this.scale.update(),F.each(this.activeElements,function(A){A.restore(["fillColor","strokeColor"])}),this.eachPoints(function(A){A.save()}),this.render()},eachPoints:function(A){F.each(this.datasets,function(B){F.each(B.points,A,this)},this)},getPointsAtEvent:function(B){var C=[],A=F.getRelativePosition(B);return F.each(this.datasets,function(D){F.each(D.points,function(J){J.inRange(A.x,A.y)&&C.push(J)})},this),C},buildScale:function(B){var D=this,A=function(){var J=[];return D.eachPoints(function(I){J.push(I.value)}),J},C={templateString:this.options.scaleLabel,height:this.chart.height,width:this.chart.width,ctx:this.chart.ctx,textColor:this.options.scaleFontColor,fontSize:this.options.scaleFontSize,fontStyle:this.options.scaleFontStyle,fontFamily:this.options.scaleFontFamily,valuesCount:B.length,beginAtZero:this.options.scaleBeginAtZero,integersOnly:this.options.scaleIntegersOnly,calculateYRange:function(L){var K=F.calculateScaleRange(A(),L,this.fontSize,this.beginAtZero,this.integersOnly);F.extend(this,K)},xLabels:B,font:F.fontString(this.options.scaleFontSize,this.options.scaleFontStyle,this.options.scaleFontFamily),lineWidth:this.options.scaleLineWidth,lineColor:this.options.scaleLineColor,gridLineWidth:this.options.scaleShowGridLines?this.options.scaleGridLineWidth:0,gridLineColor:this.options.scaleShowGridLines?this.options.scaleGridLineColor:"rgba(0,0,0,0)",padding:this.options.showScale?0:this.options.pointDotRadius+this.options.pointDotStrokeWidth,showLabels:this.options.scaleShowLabels,display:this.options.showScale};this.options.scaleOverride&&F.extend(C,{calculateYRange:F.noop,steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}),this.scale=new H.Scale(C)},addData:function(A,B){F.each(A,function(C,D){this.datasets[D].points.push(new this.PointClass({value:C,label:B,x:this.scale.calculateX(this.scale.valuesCount+1),y:this.scale.endPoint,strokeColor:this.datasets[D].pointStrokeColor,fillColor:this.datasets[D].pointColor}))},this),this.scale.addXLabel(B),this.update()},removeData:function(){this.scale.removeXLabel(),F.each(this.datasets,function(A){A.points.shift()},this),this.update()},reflow:function(){var A=F.extend({height:this.chart.height,width:this.chart.width});this.scale.update(A)},draw:function(C){var D=C||1;this.clear();var A=this.chart.ctx,B=function(I){return null!==I.value},L=function(N,I,J){return F.findNextWhere(I,B,J)||N},K=function(N,I,J){return F.findPreviousWhere(I,B,J)||N};this.scale.draw(D),F.each(this.datasets,function(J){var I=F.where(J.points,B);F.each(J.points,function(O,P){O.hasValue()&&O.transition({y:this.scale.calculateY(O.value),x:this.scale.calculateX(P)},D)},this),this.options.bezierCurve&&F.each(I,function(Q,R){var P=R>0&&R<I.length-1?this.options.bezierCurveTension:0;Q.controlPoints=F.splineCurve(K(Q,I,R),Q,L(Q,I,R),P),Q.controlPoints.outer.y>this.scale.endPoint?Q.controlPoints.outer.y=this.scale.endPoint:Q.controlPoints.outer.y<this.scale.startPoint&&(Q.controlPoints.outer.y=this.scale.startPoint),Q.controlPoints.inner.y>this.scale.endPoint?Q.controlPoints.inner.y=this.scale.endPoint:Q.controlPoints.inner.y<this.scale.startPoint&&(Q.controlPoints.inner.y=this.scale.startPoint)},this),A.lineWidth=this.options.datasetStrokeWidth,A.strokeStyle=J.strokeColor,A.beginPath(),F.each(I,function(Q,R){if(0===R){A.moveTo(Q.x,Q.y)}else{if(this.options.bezierCurve){var P=K(Q,I,R);A.bezierCurveTo(P.controlPoints.outer.x,P.controlPoints.outer.y,Q.controlPoints.inner.x,Q.controlPoints.inner.y,Q.x,Q.y)}else{A.lineTo(Q.x,Q.y)}}},this),A.stroke(),this.options.datasetFill&&I.length>0&&(A.lineTo(I[I.length-1].x,this.scale.endPoint),A.lineTo(I[0].x,this.scale.endPoint),A.fillStyle=J.fillColor,A.closePath(),A.fill()),F.each(I,function(N){N.draw()})},this)}})}.call(this),function(){var E=this,H=E.Chart,F=H.helpers,G={scaleShowLabelBackdrop:!0,scaleBackdropColor:"rgba(255,255,255,0.75)",scaleBeginAtZero:!0,scaleBackdropPaddingY:2,scaleBackdropPaddingX:2,scaleShowLine:!0,segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"></span><%if(segments[i].label){%><%=segments[i].label%><%}%></li><%}%></ul>'};H.Type.extend({name:"PolarArea",defaults:G,initialize:function(A){this.segments=[],this.SegmentArc=H.Arc.extend({showStroke:this.options.segmentShowStroke,strokeWidth:this.options.segmentStrokeWidth,strokeColor:this.options.segmentStrokeColor,ctx:this.chart.ctx,innerRadius:0,x:this.chart.width/2,y:this.chart.height/2}),this.scale=new H.RadialScale({display:this.options.showScale,fontStyle:this.options.scaleFontStyle,fontSize:this.options.scaleFontSize,fontFamily:this.options.scaleFontFamily,fontColor:this.options.scaleFontColor,showLabels:this.options.scaleShowLabels,showLabelBackdrop:this.options.scaleShowLabelBackdrop,backdropColor:this.options.scaleBackdropColor,backdropPaddingY:this.options.scaleBackdropPaddingY,backdropPaddingX:this.options.scaleBackdropPaddingX,lineWidth:this.options.scaleShowLine?this.options.scaleLineWidth:0,lineColor:this.options.scaleLineColor,lineArc:!0,width:this.chart.width,height:this.chart.height,xCenter:this.chart.width/2,yCenter:this.chart.height/2,ctx:this.chart.ctx,templateString:this.options.scaleLabel,valuesCount:A.length}),this.updateScaleRange(A),this.scale.update(),F.each(A,function(C,B){this.addData(C,B,!0)},this),this.options.showTooltips&&F.bindEvents(this,this.options.tooltipEvents,function(C){var B="mouseout"!==C.type?this.getSegmentsAtEvent(C):[];F.each(this.segments,function(D){D.restore(["fillColor"])}),F.each(B,function(D){D.fillColor=D.highlightColor}),this.showTooltip(B)}),this.render()},getSegmentsAtEvent:function(B){var C=[],A=F.getRelativePosition(B);return F.each(this.segments,function(D){D.inRange(A.x,A.y)&&C.push(D)},this),C},addData:function(B,D,A){var C=D||this.segments.length;this.segments.splice(C,0,new this.SegmentArc({fillColor:B.color,highlightColor:B.highlight||B.color,label:B.label,value:B.value,outerRadius:this.options.animateScale?0:this.scale.calculateCenterOffset(B.value),circumference:this.options.animateRotate?0:this.scale.getCircumference(),startAngle:1.5*Math.PI})),A||(this.reflow(),this.update())},removeData:function(A){var B=F.isNumber(A)?A:this.segments.length-1;this.segments.splice(B,1),this.reflow(),this.update()},calculateTotal:function(A){this.total=0,F.each(A,function(B){this.total+=B.value},this),this.scale.valuesCount=this.segments.length},updateScaleRange:function(B){var C=[];F.each(B,function(D){C.push(D.value)});var A=this.options.scaleOverride?{steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}:F.calculateScaleRange(C,F.min([this.chart.width,this.chart.height])/2,this.options.scaleFontSize,this.options.scaleBeginAtZero,this.options.scaleIntegersOnly);F.extend(this.scale,A,{size:F.min([this.chart.width,this.chart.height]),xCenter:this.chart.width/2,yCenter:this.chart.height/2})},update:function(){this.calculateTotal(this.segments),F.each(this.segments,function(A){A.save()}),this.render()},reflow:function(){F.extend(this.SegmentArc.prototype,{x:this.chart.width/2,y:this.chart.height/2}),this.updateScaleRange(this.segments),this.scale.update(),F.extend(this.scale,{xCenter:this.chart.width/2,yCenter:this.chart.height/2}),F.each(this.segments,function(A){A.update({outerRadius:this.scale.calculateCenterOffset(A.value)})},this)},draw:function(A){var B=A||1;this.clear(),F.each(this.segments,function(C,D){C.transition({circumference:this.scale.getCircumference(),outerRadius:this.scale.calculateCenterOffset(C.value)},B),C.endAngle=C.startAngle+C.circumference,0===D&&(C.startAngle=1.5*Math.PI),D<this.segments.length-1&&(this.segments[D+1].startAngle=C.endAngle),C.draw()},this),this.scale.draw()}})}.call(this),function(){var E=this,F=E.Chart,D=F.helpers;F.Type.extend({name:"Radar",defaults:{scaleShowLine:!0,angleShowLineOut:!0,scaleShowLabels:!1,scaleBeginAtZero:!0,angleLineColor:"rgba(0,0,0,.1)",angleLineWidth:1,pointLabelFontFamily:"'Arial'",pointLabelFontStyle:"normal",pointLabelFontSize:10,pointLabelFontColor:"#666",pointDot:!0,pointDotRadius:3,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:!0,datasetStrokeWidth:2,datasetFill:!0,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].strokeColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'},initialize:function(A){this.PointClass=F.Point.extend({strokeWidth:this.options.pointDotStrokeWidth,radius:this.options.pointDotRadius,display:this.options.pointDot,hitDetectionRadius:this.options.pointHitDetectionRadius,ctx:this.chart.ctx}),this.datasets=[],this.buildScale(A),this.options.showTooltips&&D.bindEvents(this,this.options.tooltipEvents,function(B){var C="mouseout"!==B.type?this.getPointsAtEvent(B):[];this.eachPoints(function(H){H.restore(["fillColor","strokeColor"])}),D.each(C,function(H){H.fillColor=H.highlightFill,H.strokeColor=H.highlightStroke}),this.showTooltip(C)}),D.each(A.datasets,function(C){var B={label:C.label||null,fillColor:C.fillColor,strokeColor:C.strokeColor,pointColor:C.pointColor,pointStrokeColor:C.pointStrokeColor,points:[]};this.datasets.push(B),D.each(C.data,function(K,J){var L;this.scale.animation||(L=this.scale.getPointPosition(J,this.scale.calculateCenterOffset(K))),B.points.push(new this.PointClass({value:K,label:A.labels[J],datasetLabel:C.label,x:this.options.animation?this.scale.xCenter:L.x,y:this.options.animation?this.scale.yCenter:L.y,strokeColor:C.pointStrokeColor,fillColor:C.pointColor,highlightFill:C.pointHighlightFill||C.pointColor,highlightStroke:C.pointHighlightStroke||C.pointStrokeColor}))},this)},this),this.render()},eachPoints:function(A){D.each(this.datasets,function(B){D.each(B.points,A,this)},this)},getPointsAtEvent:function(B){var C=D.getRelativePosition(B),J=D.getAngleFromPoint({x:this.scale.xCenter,y:this.scale.yCenter},C),A=2*Math.PI/this.scale.valuesCount,K=Math.round((J.angle-1.5*Math.PI)/A),L=[];return(K>=this.scale.valuesCount||0>K)&&(K=0),J.distance<=this.scale.drawingArea&&D.each(this.datasets,function(G){L.push(G.points[K])}),L},buildScale:function(A){this.scale=new F.RadialScale({display:this.options.showScale,fontStyle:this.options.scaleFontStyle,fontSize:this.options.scaleFontSize,fontFamily:this.options.scaleFontFamily,fontColor:this.options.scaleFontColor,showLabels:this.options.scaleShowLabels,showLabelBackdrop:this.options.scaleShowLabelBackdrop,backdropColor:this.options.scaleBackdropColor,backdropPaddingY:this.options.scaleBackdropPaddingY,backdropPaddingX:this.options.scaleBackdropPaddingX,lineWidth:this.options.scaleShowLine?this.options.scaleLineWidth:0,lineColor:this.options.scaleLineColor,angleLineColor:this.options.angleLineColor,angleLineWidth:this.options.angleShowLineOut?this.options.angleLineWidth:0,pointLabelFontColor:this.options.pointLabelFontColor,pointLabelFontSize:this.options.pointLabelFontSize,pointLabelFontFamily:this.options.pointLabelFontFamily,pointLabelFontStyle:this.options.pointLabelFontStyle,height:this.chart.height,width:this.chart.width,xCenter:this.chart.width/2,yCenter:this.chart.height/2,ctx:this.chart.ctx,templateString:this.options.scaleLabel,labels:A.labels,valuesCount:A.datasets[0].data.length}),this.scale.setScaleSize(),this.updateScaleRange(A.datasets),this.scale.buildYLabels()},updateScaleRange:function(A){var B=function(){var H=[];return D.each(A,function(G){G.data?H=H.concat(G.data):D.each(G.points,function(J){H.push(J.value)})}),H}(),C=this.options.scaleOverride?{steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}:D.calculateScaleRange(B,D.min([this.chart.width,this.chart.height])/2,this.options.scaleFontSize,this.options.scaleBeginAtZero,this.options.scaleIntegersOnly);D.extend(this.scale,C)},addData:function(B,A){this.scale.valuesCount++,D.each(B,function(I,C){var J=this.scale.getPointPosition(this.scale.valuesCount,this.scale.calculateCenterOffset(I));this.datasets[C].points.push(new this.PointClass({value:I,label:A,x:J.x,y:J.y,strokeColor:this.datasets[C].pointStrokeColor,fillColor:this.datasets[C].pointColor}))},this),this.scale.labels.push(A),this.reflow(),this.update()},removeData:function(){this.scale.valuesCount--,this.scale.labels.shift(),D.each(this.datasets,function(A){A.points.shift()},this),this.reflow(),this.update()},update:function(){this.eachPoints(function(A){A.save()}),this.reflow(),this.render()},reflow:function(){D.extend(this.scale,{width:this.chart.width,height:this.chart.height,size:D.min([this.chart.width,this.chart.height]),xCenter:this.chart.width/2,yCenter:this.chart.height/2}),this.updateScaleRange(this.datasets),this.scale.setScaleSize(),this.scale.buildYLabels()},draw:function(A){var B=A||1,C=this.chart.ctx;this.clear(),this.scale.draw(),D.each(this.datasets,function(H){D.each(H.points,function(J,G){J.hasValue()&&J.transition(this.scale.getPointPosition(G,this.scale.calculateCenterOffset(J.value)),B)},this),C.lineWidth=this.options.datasetStrokeWidth,C.strokeStyle=H.strokeColor,C.beginPath(),D.each(H.points,function(J,G){0===G?C.moveTo(J.x,J.y):C.lineTo(J.x,J.y)},this),C.closePath(),C.stroke(),C.fillStyle=H.fillColor,C.fill(),D.each(H.points,function(G){G.hasValue()&&G.draw()})},this)}})}.call(this);