(function(B){if(typeof define==="function"&&define.amd){define(["jquery","ChineseDistricts"],B)}else{if(typeof exports==="object"){B(require("jquery"),require("ChineseDistricts"))}else{B(jQuery,ChineseDistricts)}}})(function(P,K){if(typeof K==="undefined"){throw new Error('The file "distpicker.data.js" must be included first!')}var M="distpicker";var L="change."+M;var J="province";var I="city";var N="district";function O(B,A){this.$element=P(B);this.options=P.extend({},O.DEFAULTS,P.isPlainObject(A)&&A);this.placeholders=P.extend({},O.DEFAULTS);this.active=false;this.init()}O.prototype={constructor:O,init:function(){var D=this.options;var A=this.$element.find("select");var B=A.length;var C={};A.each(function(){P.extend(C,P(this).data())});P.each([J,I,N],P.proxy(function(E,F){if(C[F]){D[F]=C[F];this["$"+F]=A.filter("[data-"+F+"]")}else{this["$"+F]=B>E?A.eq(E):null}},this));this.bind();this.reset();this.active=true},bind:function(){if(this.$province){this.$province.on(L,(this._changeProvince=P.proxy(function(){this.output(I);this.output(N)},this)))}if(this.$city){this.$city.on(L,(this._changeCity=P.proxy(function(){this.output(N)},this)))}},unbind:function(){if(this.$province){this.$province.off(L,this._changeProvince)}if(this.$city){this.$city.off(L,this._changeCity)}},output:function(D){var C=this.options;var H=this.placeholders;var G=this["$"+D];var B={};var A=[];var E;var R;var F;if(!G||!G.length){return}F=C[D];E=(D===J?86:D===I?this.$province&&this.$province.find(":selected").data("code"):D===N?this.$city&&this.$city.find(":selected").data("code"):E);B=P.isNumeric(E)?K[E]:null;if(P.isPlainObject(B)){P.each(B,function(Q,U){var V=U===F;if(V){R=true}A.push({code:Q,address:U,selected:V})})}if(!R){if(A.length&&(C.autoSelect||C.autoselect)){A[0].selected=true}if(!this.active&&F){H[D]=F}}if(C.placeholder){A.unshift({code:"",address:H[D],selected:false})}G.html(this.getList(A))},getList:function(B){var A=[];P.each(B,function(C,D){A.push('<option value="'+(D.address&&D.code?D.address:"")+'" data-code="'+(D.code||"")+'"'+(D.selected?" selected":"")+">"+(D.address||"")+"</option>")});return A.join("")},reset:function(A){if(!A){this.output(J);this.output(I);this.output(N)}else{if(this.$province){this.$province.find(":first").prop("selected",true).trigger(L)}}},destroy:function(){this.unbind();this.$element.removeData(M)}};O.DEFAULTS={autoSelect:true,placeholder:true,province:"—— 省 ——",city:"—— 市 ——",district:"—— 县 ——"};O.setDefaults=function(A){P.extend(O.DEFAULTS,A)};O.other=P.fn.distpicker;P.fn.distpicker=function(A){var B=[].slice.call(arguments,1);return this.each(function(){var C=P(this);var D=C.data(M);var E;var F;if(!D){if(/destroy/.test(A)){return}E=P.extend({},C.data(),P.isPlainObject(A)&&A);C.data(M,(D=new O(this,E)))}if(typeof A==="string"&&P.isFunction(F=D[A])){F.apply(D,B)}})};P.fn.distpicker.Constructor=O;P.fn.distpicker.setDefaults=O.setDefaults;P.fn.distpicker.noConflict=function(){P.fn.distpicker=O.other;return this};P(function(){P('[data-toggle="distpicker"]').distpicker()})});