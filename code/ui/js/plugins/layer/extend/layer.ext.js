!function(){layer.use("skin/layer.ext.css",function(){layer.layui_layer_extendlayerextjs=!0});var C=layer.cache||{},D=function(A){return C.skin?" "+C.skin+" "+C.skin+"-"+A:""};layer.prompt=function(A,G){A=A||{},"function"==typeof A&&(G=A);var H,B=2==A.formType?'<textarea class="layui-layer-input">'+(A.value||"")+"</textarea>":function(){return'<input type="'+(1==A.formType?"password":"text")+'" class="layui-layer-input" value="'+(A.value||"")+'">'}();return layer.open($.extend({btn:["&#x786E;&#x5B9A;","&#x53D6;&#x6D88;"],content:B,skin:"layui-layer-prompt"+D("prompt"),success:function(E){H=E.find(".layui-layer-input"),H.focus()},yes:function(E){var F=H.val();""===F?H.focus():F.length>(A.maxlength||500)?layer.tips("&#x6700;&#x591A;&#x8F93;&#x5165;"+(A.maxlength||500)+"&#x4E2A;&#x5B57;&#x6570;",H,{tips:1}):G&&G(F,E,H)}},A))},layer.tab=function(A){A=A||{};var B=A.tab||{};return layer.open($.extend({type:1,skin:"layui-layer-tab"+D("tab"),title:function(){var I=B.length,H=1,J="";if(I>0){for(J='<span class="layui-layer-tabnow">'+B[0].title+"</span>";I>H;H++){J+="<span>"+B[H].title+"</span>"}}return J}(),content:'<ul class="layui-layer-tabmain">'+function(){var I=B.length,H=1,J="";if(I>0){for(J='<li class="layui-layer-tabli xubox_tab_layer">'+(B[0].content||"no content")+"</li>";I>H;H++){J+='<li class="layui-layer-tabli">'+(B[H].content||"no  content")+"</li>"}}return J}()+"</ul>",success:function(I){var J=I.find(".layui-layer-title").children(),H=I.find(".layui-layer-tabmain").children();J.on("mousedown",function(G){G.stopPropagation?G.stopPropagation():G.cancelBubble=!0;var F=$(this),E=F.index();F.addClass("layui-layer-tabnow").siblings().removeClass("layui-layer-tabnow"),H.eq(E).show().siblings().hide()})}},A))},layer.photos=function(V,N,P){function Q(H,G,F){var E=new Image;E.onload=function(){E.onload=null,G(E)},E.onerror=function(I){E.onerror=null,F(I)},E.src=H}var A={};if(V=V||{},V.photos){var O=V.photos.constructor===Object,R=O?V.photos:{},S=R.data||[],T=R.start||0;if(A.imgIndex=T+1,O){if(0===S.length){return void layer.msg("&#x6CA1;&#x6709;&#x56FE;&#x7247;")}}else{var U=$(V.photos),B=U.find(V.img||"img");if(0===B.length){return}if(N||U.find(R.img||"img").each(function(E){var F=$(this);S.push({alt:F.attr("alt"),pid:F.attr("layer-pid"),src:F.attr("layer-src")||F.attr("src"),thumb:F.attr("src")}),F.on("click",function(){layer.photos($.extend(V,{photos:{start:E,data:S,tab:V.tab},full:V.full}),!0)})}),!N){return}}A.imgprev=function(E){A.imgIndex--,A.imgIndex<1&&(A.imgIndex=S.length),A.tabimg(E)},A.imgnext=function(F,E){A.imgIndex++,A.imgIndex>S.length&&(A.imgIndex=1,E)||A.tabimg(F)},A.keyup=function(F){if(!A.end){var E=F.keyCode;F.preventDefault(),37===E?A.imgprev(!0):39===E?A.imgnext(!0):27===E&&layer.close(A.index)}},A.tabimg=function(E){S.length<=1||(R.start=A.imgIndex-1,layer.close(A.index),layer.photos(V,!0,E))},A.event=function(){A.bigimg.hover(function(){A.imgsee.show()},function(){A.imgsee.hide()}),A.bigimg.find(".layui-layer-imgprev").on("click",function(E){E.preventDefault(),A.imgprev()}),A.bigimg.find(".layui-layer-imgnext").on("click",function(E){E.preventDefault(),A.imgnext()}),$(document).on("keyup",A.keyup)},A.loadi=layer.load(1,{shade:"shade" in V?!1:0.9,scrollbar:!1}),Q(S[T].src,function(E){layer.close(A.loadi),A.index=layer.open($.extend({type:1,area:function(){var G=[E.width,E.height],F=[$(window).width()-100,$(window).height()-100];return !V.full&&G[0]>F[0]&&(G[0]=F[0],G[1]=G[0]*F[1]/G[0]),[G[0]+"px",G[1]+"px"]}(),title:!1,shade:0.9,shadeClose:!0,closeBtn:!1,move:".layui-layer-phimg img",moveType:1,scrollbar:!1,moveOut:!0,shift:5*Math.random()|0,skin:"layui-layer-photos"+D("photos"),content:'<div class="layui-layer-phimg"><img src="'+S[T].src+'" alt="'+(S[T].alt||"")+'" layer-pid="'+S[T].pid+'"><div class="layui-layer-imgsee">'+(S.length>1?'<span class="layui-layer-imguide"><a href="javascript:;" class="layui-layer-iconext layui-layer-imgprev"></a><a href="javascript:;" class="layui-layer-iconext layui-layer-imgnext"></a></span>':"")+'<div class="layui-layer-imgbar" style="display:'+(P?"block":"")+'"><span class="layui-layer-imgtit"><a href="javascript:;">'+(S[T].alt||"")+"</a><em>"+A.imgIndex+"/"+S.length+"</em></span></div></div></div>",success:function(G,F){A.bigimg=G.find(".layui-layer-phimg"),A.imgsee=G.find(".layui-layer-imguide,.layui-layer-imgbar"),A.event(G),V.tab&&V.tab(S[T],G)},end:function(){A.end=!0,$(document).off("keyup",A.keyup)}},V))},function(){layer.close(A.loadi),layer.msg("&#x5F53;&#x524D;&#x56FE;&#x7247;&#x5730;&#x5740;&#x5F02;&#x5E38;<br>&#x662F;&#x5426;&#x7EE7;&#x7EED;&#x67E5;&#x770B;&#x4E0B;&#x4E00;&#x5F20;&#xFF1F;",{time:30000,btn:["下一张","不看了"],yes:function(){S.length>1&&A.imgnext(!0,!0)}})})}}}();