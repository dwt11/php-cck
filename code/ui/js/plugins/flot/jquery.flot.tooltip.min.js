(function(E){var G={tooltip:!1,tooltipOpts:{content:"%s | X: %x | Y: %y",xDateFormat:null,yDateFormat:null,shifts:{x:10,y:20},defaultTheme:!0,onHover:function(){}}},H=function(A){this.tipPosition={x:0,y:0},this.init(A)};H.prototype.init=function(B){function C(L){var K={};K.x=L.pageX,K.y=L.pageY,D.updateTooltipPosition(K)}function A(Q,N,O){var R=D.getDomElement();if(O){var P;P=D.stringFormat(D.tooltipOptions.content,O),R.html(P),D.updateTooltipPosition({x:N.pageX,y:N.pageY}),R.css({left:D.tipPosition.x+D.tooltipOptions.shifts.x,top:D.tipPosition.y+D.tooltipOptions.shifts.y}).show(),"function"==typeof D.tooltipOptions.onHover&&D.tooltipOptions.onHover(O,R)}else{R.hide().html("")}}var D=this;B.hooks.bindEvents.push(function(L,K){D.plotOptions=L.getOptions(),D.plotOptions.tooltip!==!1&&void 0!==D.plotOptions.tooltip&&(D.tooltipOptions=D.plotOptions.tooltipOpts,D.getDomElement(),E(L.getPlaceholder()).bind("plothover",A),E(K).bind("mousemove",C))}),B.hooks.shutdown.push(function(L,K){E(L.getPlaceholder()).unbind("plothover",A),E(K).unbind("mousemove",C)})},H.prototype.getDomElement=function(){var A;return E("#flotTip").length>0?A=E("#flotTip"):(A=E("<div />").attr("id","flotTip"),A.appendTo("body").hide().css({position:"absolute"}),this.tooltipOptions.defaultTheme&&A.css({background:"#fff","z-index":"100",padding:"0.4em 0.6em","border-radius":"0.5em","font-size":"0.8em",border:"1px solid #111",display:"none","white-space":"nowrap"})),A},H.prototype.updateTooltipPosition=function(B){var C=E("#flotTip").outerWidth()+this.tooltipOptions.shifts.x,A=E("#flotTip").outerHeight()+this.tooltipOptions.shifts.y;B.x-E(window).scrollLeft()>E(window).innerWidth()-C&&(B.x-=C),B.y-E(window).scrollTop()>E(window).innerHeight()-A&&(B.y-=A),this.tipPosition.x=B.x,this.tipPosition.y=B.y},H.prototype.stringFormat=function(L,B){var D=/%p\.{0,1}(\d{0,})/,A=/%s/,K=/%x\.{0,1}(?:\d{0,})/,C=/%y\.{0,1}(?:\d{0,})/;return"function"==typeof L&&(L=L(B.series.label,B.series.data[B.dataIndex][0],B.series.data[B.dataIndex][1],B)),B.series.percent!==void 0&&(L=this.adjustValPrecision(D,L,B.series.percent)),B.series.label!==void 0&&(L=L.replace(A,B.series.label)),this.isTimeMode("xaxis",B)&&this.isXDateFormat(B)&&(L=L.replace(K,this.timestampToDate(B.series.data[B.dataIndex][0],this.tooltipOptions.xDateFormat))),this.isTimeMode("yaxis",B)&&this.isYDateFormat(B)&&(L=L.replace(C,this.timestampToDate(B.series.data[B.dataIndex][1],this.tooltipOptions.yDateFormat))),"number"==typeof B.series.data[B.dataIndex][0]&&(L=this.adjustValPrecision(K,L,B.series.data[B.dataIndex][0])),"number"==typeof B.series.data[B.dataIndex][1]&&(L=this.adjustValPrecision(C,L,B.series.data[B.dataIndex][1])),B.series.xaxis.tickFormatter!==void 0&&(L=L.replace(K,B.series.xaxis.tickFormatter(B.series.data[B.dataIndex][0],B.series.xaxis))),B.series.yaxis.tickFormatter!==void 0&&(L=L.replace(C,B.series.yaxis.tickFormatter(B.series.data[B.dataIndex][1],B.series.yaxis))),L},H.prototype.isTimeMode=function(A,B){return B.series[A].options.mode!==void 0&&"time"===B.series[A].options.mode},H.prototype.isXDateFormat=function(){return this.tooltipOptions.xDateFormat!==void 0&&null!==this.tooltipOptions.xDateFormat},H.prototype.isYDateFormat=function(){return this.tooltipOptions.yDateFormat!==void 0&&null!==this.tooltipOptions.yDateFormat},H.prototype.timestampToDate=function(B,C){var A=new Date(B);return E.plot.formatDate(A,C)},H.prototype.adjustValPrecision=function(C,B,D){var A,J=B.match(C);return null!==J&&""!==RegExp.$1&&(A=RegExp.$1,D=D.toFixed(A),B=B.replace(C,D)),B};var F=function(A){new H(A)};E.plot.plugins.push({init:F,options:G,name:"tooltip",version:"0.6.1"})})(jQuery);