(function(){var L,e,Q,s,M,h,F,E,c,u,g,C,k,X,I,W,r,K,w,T,y,n,a,N,P,q,A,V,G,j,B,Z,S,R,p,l,Y,t,v,i,x,U,D,z,o,J,m,d,O=[].slice,b={}.hasOwnProperty,H=function(Aa,Ab){function Ac(){this.constructor=Aa}for(var Ad in Ab){b.call(Ab,Ad)&&(Aa[Ad]=Ab[Ad])}return Ac.prototype=Ab.prototype,Aa.prototype=new Ac,Aa.__super__=Ab.prototype,Aa},f=[].indexOf||function(Ab){for(var Ac=0,Aa=this.length;Aa>Ac;Ac++){if(Ac in this&&this[Ac]===Ab){return Ac}}return -1};for(T={catchupTime:500,initialRate:0.03,minTime:500,ghostTime:500,maxProgressPerFrame:10,easeFactor:1.25,startOnPageLoad:!0,restartOnPushState:!0,restartOnRequestAfter:500,target:"body",elements:{checkInterval:100,selectors:["body"]},eventLag:{minSamples:10,sampleCount:3,lagThreshold:3},ajax:{trackMethods:["GET"],trackWebSockets:!0,ignoreURLs:[]}},V=function(){var Aa;return null!=(Aa="undefined"!=typeof performance&&null!==performance?"function"==typeof performance.now?performance.now():void 0:void 0)?Aa:+new Date},j=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,w=window.cancelAnimationFrame||window.mozCancelAnimationFrame,null==j&&(j=function(Aa){return setTimeout(Aa,50)},w=function(Aa){return clearTimeout(Aa)}),Z=function(Ab){var Ac,Aa;return Ac=V(),(Aa=function(){var Ad;return Ad=V()-Ac,Ad>=33?(Ac=V(),Ab(Ad,function(){return j(Aa)})):setTimeout(Aa,33-Ad)})()},B=function(){var Ab,Ac,Aa;return Aa=arguments[0],Ac=arguments[1],Ab=3<=arguments.length?O.call(arguments,2):[],"function"==typeof Aa[Ac]?Aa[Ac].apply(Aa,Ab):Aa[Ac]},y=function(){var Aa,Ac,Ad,Ae,Af,Ab,Ag;for(Ac=arguments[0],Ae=2<=arguments.length?O.call(arguments,1):[],Ab=0,Ag=Ae.length;Ag>Ab;Ab++){if(Ad=Ae[Ab]){for(Aa in Ad){b.call(Ad,Aa)&&(Af=Ad[Aa],null!=Ac[Aa]&&"object"==typeof Ac[Aa]&&null!=Af&&"object"==typeof Af?y(Ac[Aa],Af):Ac[Aa]=Af)}}}return Ac},W=function(Ac){var Ae,Ab,Af,Ad,Aa;for(Ab=Ae=0,Ad=0,Aa=Ac.length;Aa>Ad;Ad++){Af=Ac[Ad],Ab+=Math.abs(Af),Ae++}return Ab/Ae},a=function(Ac,Ae){var Ab,Af,Ad;if(null==Ac&&(Ac="options"),null==Ae&&(Ae=!0),Ad=document.querySelector("[data-pace-"+Ac+"]")){if(Ab=Ad.getAttribute("data-pace-"+Ac),!Ae){return Ab}try{return JSON.parse(Ab)}catch(Aa){return Af=Aa,"undefined"!=typeof console&&null!==console?console.error("Error parsing inline pace options",Af):void 0}}},F=function(){function Aa(){}return Aa.prototype.on=function(Ab,Ac,Ad,Ae){var Af;return null==Ae&&(Ae=!1),null==this.bindings&&(this.bindings={}),null==(Af=this.bindings)[Ab]&&(Af[Ab]=[]),this.bindings[Ab].push({handler:Ac,ctx:Ad,once:Ae})},Aa.prototype.once=function(Ab,Ac,Ad){return this.on(Ab,Ac,Ad,!0)},Aa.prototype.off=function(Ab,Ac){var Ad,Ae,Af;if(null!=(null!=(Ae=this.bindings)?Ae[Ab]:void 0)){if(null==Ac){return delete this.bindings[Ab]}for(Ad=0,Af=[];Ad<this.bindings[Ab].length;){this.bindings[Ab][Ad].handler===Ac?Af.push(this.bindings[Ab].splice(Ad,1)):Af.push(Ad++)}return Af}},Aa.prototype.trigger=function(){var Ag,Ai,Af,Aj,Ad,Ab,Ac,Ae,Ah;if(Af=arguments[0],Ag=2<=arguments.length?O.call(arguments,1):[],null!=(Ac=this.bindings)?Ac[Af]:void 0){for(Ad=0,Ah=[];Ad<this.bindings[Af].length;){Ae=this.bindings[Af][Ad],Aj=Ae.handler,Ai=Ae.ctx,Ab=Ae.once,Aj.apply(null!=Ai?Ai:this,Ag),Ab?Ah.push(this.bindings[Af].splice(Ad,1)):Ah.push(Ad++)}return Ah}},Aa}(),null==window.Pace&&(window.Pace={}),y(Pace,F.prototype),G=Pace.options=y({},T,window.paceOptions,a()),J=["ajax","document","eventLag","elements"],U=0,z=J.length;z>U;U++){l=J[U],G[l]===!0&&(G[l]=T[l])}c=function(Aa){function Ab(){return m=Ab.__super__.constructor.apply(this,arguments)}return H(Ab,Aa),Ab}(Error),e=function(){function Aa(){this.progress=0}return Aa.prototype.getElement=function(){var Ab;if(null==this.el){if(Ab=document.querySelector(G.target),!Ab){throw new c}this.el=document.createElement("div"),this.el.className="pace pace-active",document.body.className=document.body.className.replace(/pace-done/g,""),document.body.className+=" pace-running",this.el.innerHTML='<div class="pace-progress">\n  <div class="pace-progress-inner"></div>\n</div>\n<div class="pace-activity"></div>',null!=Ab.firstChild?Ab.insertBefore(this.el,Ab.firstChild):Ab.appendChild(this.el)}return this.el},Aa.prototype.finish=function(){var Ab;return Ab=this.getElement(),Ab.className=Ab.className.replace("pace-active",""),Ab.className+=" pace-inactive",document.body.className=document.body.className.replace("pace-running",""),document.body.className+=" pace-done"},Aa.prototype.update=function(Ab){return this.progress=Ab,this.render()},Aa.prototype.destroy=function(){try{this.getElement().parentNode.removeChild(this.getElement())}catch(Ab){c=Ab}return this.el=void 0},Aa.prototype.render=function(){var Ac,Ab;return null==document.querySelector(G.target)?!1:(Ac=this.getElement(),Ac.children[0].style.width=""+this.progress+"%",(!this.lastRenderedProgress||this.lastRenderedProgress|0!==this.progress|0)&&(Ac.children[0].setAttribute("data-progress-text",""+(0|this.progress)+"%"),this.progress>=100?Ab="99":(Ab=this.progress<10?"0":"",Ab+=0|this.progress),Ac.children[0].setAttribute("data-progress",""+Ab)),this.lastRenderedProgress=this.progress)},Aa.prototype.done=function(){return this.progress>=100},Aa}(),E=function(){function Aa(){this.bindings={}}return Aa.prototype.trigger=function(Ac,Ae){var Ab,Ag,Ad,Ah,Af;if(null!=this.bindings[Ac]){for(Ah=this.bindings[Ac],Af=[],Ag=0,Ad=Ah.length;Ad>Ag;Ag++){Ab=Ah[Ag],Af.push(Ab.call(this,Ae))}return Af}},Aa.prototype.on=function(Ab,Ac){var Ad;return null==(Ad=this.bindings)[Ab]&&(Ad[Ab]=[]),this.bindings[Ab].push(Ac)},Aa}(),x=window.XMLHttpRequest,i=window.XDomainRequest,v=window.WebSocket,n=function(Aa,Ac){var Ad,Ae,Af,Ab;Ab=[];for(Ae in Ac.prototype){try{Af=Ac.prototype[Ae],null==Aa[Ae]&&"function"!=typeof Af?Ab.push(Aa[Ae]=Af):Ab.push(void 0)}catch(Ag){Ad=Ag}}return Ab},q=[],Pace.ignore=function(){var Ab,Ac,Aa;return Ac=arguments[0],Ab=2<=arguments.length?O.call(arguments,1):[],q.unshift("ignore"),Aa=Ac.apply(null,Ab),q.shift(),Aa},Pace.track=function(){var Ab,Ac,Aa;return Ac=arguments[0],Ab=2<=arguments.length?O.call(arguments,1):[],q.unshift("track"),Aa=Ac.apply(null,Ab),q.shift(),Aa},p=function(Aa){var Ab;if(null==Aa&&(Aa="GET"),"track"===q[0]){return"force"}if(!q.length&&G.ajax){if("socket"===Aa&&G.ajax.trackWebSockets){return !0}if(Ab=Aa.toUpperCase(),f.call(G.ajax.trackMethods,Ab)>=0){return !0}}return !1},u=function(Aa){function Ab(){var Ac,Ad=this;Ab.__super__.constructor.apply(this,arguments),Ac=function(Ae){var Af;return Af=Ae.open,Ae.open=function(Ah,Ag){return p(Ah)&&Ad.trigger("request",{type:Ah,url:Ag,request:Ae}),Af.apply(Ae,arguments)}},window.XMLHttpRequest=function(Af){var Ae;return Ae=new x(Af),Ac(Ae),Ae},n(window.XMLHttpRequest,x),null!=i&&(window.XDomainRequest=function(){var Ae;return Ae=new i,Ac(Ae),Ae},n(window.XDomainRequest,i)),null!=v&&G.ajax.trackWebSockets&&(window.WebSocket=function(Af,Ae){var Ag;return Ag=null!=Ae?new v(Af,Ae):new v(Af),p("socket")&&Ad.trigger("request",{type:"socket",url:Af,protocols:Ae,request:Ag}),Ag},n(window.WebSocket,v))}return H(Ab,Aa),Ab}(E),D=null,N=function(){return null==D&&(D=new u),D},R=function(Ab){var Ad,Aa,Ae,Ac;for(Ac=G.ajax.ignoreURLs,Aa=0,Ae=Ac.length;Ae>Aa;Aa++){if(Ad=Ac[Aa],"string"==typeof Ad){if(-1!==Ab.indexOf(Ad)){return !0}}else{if(Ad.test(Ab)){return !0}}}return !1},N().on("request",function(Ab){var Ac,Ad,Ae,Aa,Af;return Aa=Ab.type,Ae=Ab.request,Af=Ab.url,R(Af)?void 0:Pace.running||G.restartOnRequestAfter===!1&&"force"!==p(Aa)?void 0:(Ad=arguments,Ac=G.restartOnRequestAfter||0,"boolean"==typeof Ac&&(Ac=0),setTimeout(function(){var Al,Ag,Ah,Ak,Ai,Aj;if(Al="socket"===Aa?Ae.readyState<2:0<(Ak=Ae.readyState)&&4>Ak){for(Pace.restart(),Ai=Pace.sources,Aj=[],Ag=0,Ah=Ai.length;Ah>Ag;Ag++){if(l=Ai[Ag],l instanceof L){l.watch.apply(l,Ad);break}Aj.push(void 0)}return Aj}},Ac))}),L=function(){function Aa(){var Ab=this;this.elements=[],N().on("request",function(){return Ab.watch.apply(Ab,arguments)})}return Aa.prototype.watch=function(Ab){var Ac,Ad,Ae,Af;return Ae=Ab.type,Ac=Ab.request,Af=Ab.url,R(Af)?void 0:(Ad="socket"===Ae?new k(Ac):new X(Ac),this.elements.push(Ad))},Aa}(),X=function(){function Aa(Af){var Ah,Ai,Ac,Ad,Ag,Ab,Ae=this;if(this.progress=0,null!=window.ProgressEvent){for(Ai=null,Af.addEventListener("progress",function(Aj){return Ae.progress=Aj.lengthComputable?100*Aj.loaded/Aj.total:Ae.progress+(100-Ae.progress)/2}),Ab=["load","abort","timeout","error"],Ac=0,Ad=Ab.length;Ad>Ac;Ac++){Ah=Ab[Ac],Af.addEventListener(Ah,function(){return Ae.progress=100})}}else{Ag=Af.onreadystatechange,Af.onreadystatechange=function(){var Aj;return 0===(Aj=Af.readyState)||4===Aj?Ae.progress=100:3===Af.readyState&&(Ae.progress=50),"function"==typeof Ag?Ag.apply(null,arguments):void 0}}}return Aa}(),k=function(){function Aa(Ab){var Ad,Ae,Af,Ag,Ac=this;for(this.progress=0,Ag=["error","open"],Ae=0,Af=Ag.length;Af>Ae;Ae++){Ad=Ag[Ae],Ab.addEventListener(Ad,function(){return Ac.progress=100})}}return Aa}(),s=function(){function Aa(Ad){var Af,Ac,Ae,Ab;for(null==Ad&&(Ad={}),this.elements=[],null==Ad.selectors&&(Ad.selectors=[]),Ab=Ad.selectors,Ac=0,Ae=Ab.length;Ae>Ac;Ac++){Af=Ab[Ac],this.elements.push(new M(Af))}}return Aa}(),M=function(){function Aa(Ab){this.selector=Ab,this.progress=0,this.check()}return Aa.prototype.check=function(){var Ab=this;return document.querySelector(this.selector)?this.done():setTimeout(function(){return Ab.check()},G.elements.checkInterval)},Aa.prototype.done=function(){return this.progress=100},Aa}(),Q=function(){function Aa(){var Ab,Ac,Ad=this;this.progress=null!=(Ac=this.states[document.readyState])?Ac:100,Ab=document.onreadystatechange,document.onreadystatechange=function(){return null!=Ad.states[document.readyState]&&(Ad.progress=Ad.states[document.readyState]),"function"==typeof Ab?Ab.apply(null,arguments):void 0}}return Aa.prototype.states={loading:0,interactive:50,complete:100},Aa}(),h=function(){function Aa(){var Ab,Ad,Ae,Af,Ag,Ac=this;this.progress=0,Ab=0,Ag=[],Af=0,Ae=V(),Ad=setInterval(function(){var Ah;return Ah=V()-Ae-50,Ae=V(),Ag.push(Ah),Ag.length>G.eventLag.sampleCount&&Ag.shift(),Ab=W(Ag),++Af>=G.eventLag.minSamples&&Ab<G.eventLag.lagThreshold?(Ac.progress=100,clearInterval(Ad)):Ac.progress=100*(3/(Ab+3))},50)}return Aa}(),C=function(){function Aa(Ab){this.source=Ab,this.last=this.sinceLastUpdate=0,this.rate=G.initialRate,this.catchup=0,this.progress=this.lastProgress=0,null!=this.source&&(this.progress=B(this.source,"progress"))}return Aa.prototype.tick=function(Ab,Ac){var Ad;return null==Ac&&(Ac=B(this.source,"progress")),Ac>=100&&(this.done=!0),Ac===this.last?this.sinceLastUpdate+=Ab:(this.sinceLastUpdate&&(this.rate=(Ac-this.last)/this.sinceLastUpdate),this.catchup=(Ac-this.progress)/G.catchupTime,this.sinceLastUpdate=0,this.last=Ac),Ac>this.progress&&(this.progress+=this.catchup*Ab),Ad=1-Math.pow(this.progress/100,G.easeFactor),this.progress+=Ad*this.rate*Ab,this.progress=Math.min(this.lastProgress+G.maxProgressPerFrame,this.progress),this.progress=Math.max(0,this.progress),this.progress=Math.min(100,this.progress),this.lastProgress=this.progress,this.progress},Aa}(),Y=null,S=null,r=null,t=null,I=null,K=null,Pace.running=!1,P=function(){return G.restartOnPushState?Pace.restart():void 0},null!=window.history.pushState&&(o=window.history.pushState,window.history.pushState=function(){return P(),o.apply(window.history,arguments)}),null!=window.history.replaceState&&(d=window.history.replaceState,window.history.replaceState=function(){return P(),d.apply(window.history,arguments)}),g={ajax:L,elements:s,document:Q,eventLag:h},(A=function(){var Ah,Ag,Aa,Ad,Ae,Af,Ab,Ac;for(Pace.sources=Y=[],Af=["ajax","elements","document","eventLag"],Ag=0,Ad=Af.length;Ad>Ag;Ag++){Ah=Af[Ag],G[Ah]!==!1&&Y.push(new g[Ah](G[Ah]))}for(Ac=null!=(Ab=G.extraSources)?Ab:[],Aa=0,Ae=Ac.length;Ae>Aa;Aa++){l=Ac[Aa],Y.push(new l(G))}return Pace.bar=r=new e,S=[],t=new C})(),Pace.stop=function(){return Pace.trigger("stop"),Pace.running=!1,r.destroy(),K=!0,null!=I&&("function"==typeof w&&w(I),I=null),A()},Pace.restart=function(){return Pace.trigger("restart"),Pace.stop(),Pace.start()},Pace.go=function(){var Aa;return Pace.running=!0,r.render(),Aa=V(),K=!1,I=Z(function(Aj,Ak){var Ab,Ac,Ad,Ae,Ai,Af,Aq,Ah,Am,Ag,Al,Ao,An,As,Ap,Ar;for(Ah=100-r.progress,Ac=Al=0,Ad=!0,Af=Ao=0,As=Y.length;As>Ao;Af=++Ao){for(l=Y[Af],Ag=null!=S[Af]?S[Af]:S[Af]=[],Ai=null!=(Ar=l.elements)?Ar:[l],Aq=An=0,Ap=Ai.length;Ap>An;Aq=++An){Ae=Ai[Aq],Am=null!=Ag[Aq]?Ag[Aq]:Ag[Aq]=new C(Ae),Ad&=Am.done,Am.done||(Ac++,Al+=Am.tick(Aj))}}return Ab=Al/Ac,r.update(t.tick(Aj,Ab)),r.done()||Ad||K?(r.update(100),Pace.trigger("done"),setTimeout(function(){return r.finish(),Pace.running=!1,Pace.trigger("hide")},Math.max(G.ghostTime,Math.max(G.minTime-(V()-Aa),0)))):Ak()})},Pace.start=function(Aa){y(G,Aa),Pace.running=!0;try{r.render()}catch(Ab){c=Ab}return document.querySelector(".pace")?(Pace.trigger("start"),Pace.go()):setTimeout(Pace.start,50)},"function"==typeof define&&define.amd?define(function(){return Pace}):"object"==typeof exports?module.exports=Pace:G.startOnPageLoad&&Pace.start()}).call(this);